/*! For license information please see telekinesis.js.LICENSE.txt */
(()=>{var t={26:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))},r=this&&this.__await||function(t){return this instanceof r?(this.v=t,this):new r(t)},o=this&&this.__asyncValues||function(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t="function"==typeof __values?__values(t):t[Symbol.iterator](),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}},s=this&&this.__asyncDelegator||function(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,o){e[i]=t[i]?function(e){return(n=!n)?{value:r(t[i](e)),done:"return"===i}:o?o(e):e}:o}},a=this&&this.__asyncGenerator||function(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){o[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||l(t,e)}))})}function l(t,e){try{(n=o[t](e)).value instanceof r?Promise.resolve(n.value.v).then(u,h):f(s[0][2],n)}catch(t){f(s[0][3],t)}var n}function u(t){l("next",t)}function h(t){l("throw",t)}function f(t,e){t(e),s.shift(),s.length&&l(s[0][0],s[0][1])}};Object.defineProperty(e,"__esModule",{value:!0}),e.RequestMetadata=e.Route=e.Channel=e.Session=e.Connection=void 0;const l=n(121),u=n(591),h=n(297),f=n(988),c=void 0!==n.g&&1==(null===n.g||void 0===n.g?void 0:n.g.isNode),d=c?n.g.crypto:crypto,p=c?n.g.WebSocket:WebSocket;e.Connection=class{constructor(t,e="ws://localhost:8776"){this.RESEND_TIMEOUT=2,this.MAX_SEND_RETRIES=3,this.session=t,this.url=e,this.tOffset=0,this.awaitingAck=new Map,t.connections.push(this)}connect(t=0){return new Promise(((e,n)=>i(this,void 0,void 0,(function*(){void 0!==this.websocket&&(this.websocket.close(),this.websocket=void 0),this.websocket=new p(this.url),this.websocket.onerror=r=>{t<this.MAX_SEND_RETRIES?(console.warn(`Failed connecting to ${this.url}. Retrying: ${t+1} of ${this.MAX_SEND_RETRIES}`),setTimeout((()=>i(this,void 0,void 0,(function*(){return e(yield this.connect(t+1))}))),1e3*this.RESEND_TIMEOUT)):n(r)};let r=[],o=[],s=()=>new Promise((t=>r.length>0?t(r.splice(0,1)[0]):o.push(t)));this.websocket.onmessage=t=>i(this,void 0,void 0,(function*(){let e=c?t.data:yield fetch(URL.createObjectURL(t.data)).then((t=>t.arrayBuffer())),n=new Uint8Array(e);if(o.length>0)for(var i in o){let t=o.pop();t&&t(n)}else r.push(n)}));let a=yield s(),l=yield this.session.sessionKey.sign(a),u=(new TextEncoder).encode(yield this.session.sessionKey.publicSerial(!1)),g=d.getRandomValues(new Uint8Array(32)),_=(new TextEncoder).encode(JSON.stringify({version:"0.1.60"}));this.websocket.send(new Uint8Array([...l,...u,...g,..._])),this.tOffset=Date.now()/1e3-(0,f.bytesToInt)(a.slice(32,36));let b=yield s(),w=(new TextDecoder).decode(b.slice(64,152)),m=new h.PublicKey("verify",w),v=JSON.parse((new TextDecoder).decode(b.slice(152)));v.hasOwnProperty("entrypoint")&&v.entrypoint&&(this.entrypoint=y.fromObject(v.entrypoint)),v.hasOwnProperty("peers")&&v.peers&&(this.brokerPeers=v.peers);try{yield m.verify(b.slice(0,64),g)}catch(t){return this.websocket.close(),delete this.websocket,void n(t)}this.websocket.onmessage=t=>i(this,void 0,void 0,(function*(){return this.recv(t)})),this.brokerId=w,this.websocket.onerror=t=>{console.warn(`Connection to ${this.url} closed: ${JSON.stringify(t,void 0,2)}. Reconnecting...`),setTimeout((()=>this.connect()),1e3*this.RESEND_TIMEOUT)},e(this)}))))}recv(t){return i(this,void 0,void 0,(function*(){let e=c?t.data:yield fetch(URL.createObjectURL(t.data)).then((t=>t.arrayBuffer())),n=new Uint8Array(e),i=n.slice(0,64),r=(0,f.bytesToInt)(n.slice(64,68));if(this.session.checkNoRepeat(i,r+this.tOffset)){let t=(0,f.bytesToInt)(n.slice(68,70)),e=(0,f.bytesToInt)(n.slice(70,73)),o=JSON.parse((new TextDecoder).decode(n.slice(73,73+t))),s=n.slice(73+t,73+t+e);for(let e in o)if("send"===o[e][0]){let a=o[e][1],l=new h.PublicKey("verify",a.source.session[0]);try{if(yield l.verify(i,n.slice(64,73+t+65+32)),this.session.channels.has(a.destination.channel))if(255==s[0])this.ack(a.source.session[0],(0,f.b64encode)(s.slice(1,65)));else{let e=0==s[0]?i:s.slice(1,65);yield this.send([["send",{source:a.destination,destination:a.source}]],void 0,void 0,new Uint8Array([255,...e]));let o=s.slice(97),l=new Uint8Array(yield d.subtle.digest("SHA-256",o));if(s.slice(65,97).reduce(((t,e,n)=>t&&e===l[n]),!0)&&(e.reduce(((t,e,n)=>t&&e===i[n]),!0)||this.session.checkNoRepeat(e,r+this.tOffset))){let e=this.session.channels.get(a.destination.channel);e&&(yield e.handleMessage(y.fromObject(a.source),y.fromObject(a.destination),o,n.slice(0,73+t+65+32)))}}}catch(t){console.error("On receive message error: "+t)}}}}))}send(t,e=new Uint8Array,n,r){return new Promise(((n,o)=>i(this,void 0,void 0,(function*(){var s,a,l,u,h;const c=(n,o)=>i(this,void 0,void 0,(function*(){let i=(new TextEncoder).encode(JSON.stringify(t)),s=r||(o&&n?new Uint8Array([o,...(0,f.b64decode)(n)]):new Uint8Array(65)),a=new Uint8Array(yield d.subtle.digest("SHA-256",e)),l=new Uint8Array([...(0,f.intToBytes)(Date.now()/1e3-this.tOffset,4),...(0,f.intToBytes)(i.length,2),...(0,f.intToBytes)(e.length+32+65,3),...i,...s,...a]),u=yield this.session.sessionKey.sign(l);return[u,new Uint8Array([...u,...l,...e])]}));let[p,y]=yield c();const g=t.map((([t,e])=>t)).includes("send")&&null==r,_=(0,f.b64encode)(p);g&&this.awaitingAck.set(_,[t,n]);for(let e in Array(this.MAX_SEND_RETRIES+1).fill(0)){if((void 0===this.websocket||this.websocket.readyState>1)&&(yield this.connect()),void 0!==this.websocket&&this.websocket.send(y),!g){n(void 0);break}if(yield new Promise((t=>setTimeout(t,1e3*this.RESEND_TIMEOUT))),!this.awaitingAck.has(_))break;if(parseInt(e)===this.MAX_SEND_RETRIES){this.awaitingAck.delete(_);const e=t.filter((([t,e])=>"send"===t))[0][1];o(`${null===(s=null==e?void 0:e.source)||void 0===s?void 0:s.session[0].slice(0,4)} send ${null===(a=null==e?void 0:e.destination)||void 0===a?void 0:a.session[0].slice(0,4)} ${null===(l=e.destination)||void 0===l?void 0:l.session[1].slice(0,2)} - ${null===(h=null===(u=null==e?void 0:e.destination)||void 0===u?void 0:u.channel)||void 0===h?void 0:h.slice(0,4)} max retries reached `)}else[p,y]=yield c(_,parseInt(e))}}))))}ack(t,e){if(this.awaitingAck.has(e)){const[n,i]=this.awaitingAck.get(e);if(void 0!==n)for(let[r,o]of n)"send"===r&&o.destination.session[0]===t&&(this.awaitingAck.delete(e),i(void 0))}}clear(t){}close(){this.websocket&&(this.websocket.onerror=()=>{},this.websocket.close(1e3))}},e.Session=class{constructor(t){this.sessionKey=new h.PrivateKey("sign",t),this.instanceId=(0,f.b64encode)(Uint8Array.from(d.getRandomValues(new Uint8Array(6)))),this.channels=new Map,this.connections=[],this.seenMessages=[new Set,new Set,0],this.issuedTokens=new Map,this.targets=new Map,this.routes=new Map}toString(){var t;return`Session ${null===(t=this.sessionKey.repr)||void 0===t?void 0:t.slice(0,4)} ${this.instanceId.slice(0,2)}`}checkNoRepeat(t,e){let n=Date.now()/1e3,i=Math.floor(n/60),r=(0,f.b64encode)(t);return this.seenMessages[2]!=i&&(this.seenMessages[i%2]=new Set,this.seenMessages[2]=i),n-60+4<=e&&e<n+4&&!this.seenMessages[0].has(r)&&!this.seenMessages[1].has(r)&&(this.seenMessages[i%2].add(r),!0)}issueToken(t,e,n){return i(this,void 0,void 0,(function*(){let i,r,o,s;t instanceof h.Token?(i="extension",r=t,o=t.signature):(i="root",o=t);let a=!1;for(var l of this.issuedTokens.values())if(s=l[0],s.asset===o&&s.receiver===e&&s.tokenType===i&&s.maxDepth===n){for(var u in this.connections)if(this.connections[u].brokerId&&s.brokers.includes(this.connections[u].brokerId)){r=l[1],a=!0;break}if(a)break}if(!a){s=new h.Token(yield this.sessionKey.publicSerial(!1),this.connections.map((t=>t.brokerId)),e,o,i||"root",n);let t=yield s.sign(this.sessionKey);this.issuedTokens.set(t,[s,r])}return s&&s.encode()}))}extendRoute(t,e,n){return i(this,void 0,void 0,(function*(){let i;if(t.session[0]===(yield this.sessionKey.publicSerial(!1)))return i=yield this.issueToken(t.channel,e,n),void(t.tokens=[i]);{for(var r in t.tokens){let n=yield h.Token.decode(t.tokens[r]);if(n.receiver===(yield this.sessionKey.publicSerial(!1))&&(t.tokens=t.tokens.slice(0,parseInt(r)+1)),n.receiver===e)return void(t.tokens=t.tokens.slice(0,parseInt(r)+1))}let o=yield h.Token.decode(t.tokens[t.tokens.length-1]);i=yield this.issueToken(o,e,n)}t.tokens.push(i)}))}clear(t){for(var e in this.connections)this.connections[e].clear(t)}send(t,e=new Uint8Array([]),n){return i(this,void 0,void 0,(function*(){for(var i in this.connections){let r=this.connections[i];yield r.send(t,e,n)}}))}},e.Channel=class{constructor(t,e,n=!1){this.MAX_PAYLOAD_LEN=Math.pow(2,19),this.MAX_COMPRESSION_LEN=Math.pow(2,19),this.MAX_OUTBOX=Math.pow(2,4),this.session=t,this.channelKey=new h.PrivateKey("derive",e),this.isPublic=n,this.headerBuffer=[],this.chunks=new Map,this.messages=[],this.waiting=[],this.initLocks=[],this.then=this._then,this.channelKey.publicSerial(!1).then((t=>{this.session.channels.set(t,this),this.session.sessionKey.publicSerial(!1).then((e=>{for(var n in this.route=new y(this.session.connections.map((t=>t.brokerId)),[e,this.session.instanceId],t,[]),this.initLocks)this.initLocks[n](this);this.initLocks=[]}))}))}toString(){var t,e;return`Channel ${null===(t=this.session.sessionKey.repr)||void 0===t?void 0:t.slice(0,4)} ${this.session.instanceId.slice(0,2)} - ${null===(e=this.channelKey.repr)||void 0===e?void 0:e.slice(0,4)}`}handleMessage(t,e,n,r){var o;return i(this,void 0,void 0,(function*(){if(yield this.validateTokenChain(t.session[0],e.tokens)){let e,i=new h.SharedKey(this.channelKey,t.channel),s=new Uint8Array(yield i.decrypt(n.slice(16),n.slice(0,16))),a=new g(this.session,t,[{raw_payload:n,shared_key:i.key,proof:r}]),c=new Uint8Array;if(0===(0,f.bytesToInt)(s.slice(0,4)))c=s.slice(4);else{let e=(0,f.bytesToInt)(s.slice(0,2)),n=(0,f.bytesToInt)(s.slice(2,4)),i=t.session[0]+(0,f.bytesToInt)(s.slice(4,8)),r=s.slice(8);this.chunks.has(i)||this.chunks.set(i,new Map);let l=this.chunks.get(i);if(l.set(e,[r,a]),l.size!==n)return;for(let t=0;t<n;t++){let n=l.get(t);c=new Uint8Array([...c,...n[0]]),t!=e&&(null===(o=a.rawMessages)||void 0===o||o.push(n[1]))}this.chunks.delete(i)}if(0===c[0])e=(0,l.deserialize)(c.slice(1));else{const t=(0,u.inflate)(c.slice(1));e=(0,l.deserialize)(t)}if(this.session.messageListener&&this.session.messageListener(a),this.telekinesis&&this.telekinesis._handleRequest)this.telekinesis._handleRequest(this,a,e);else if(this.waiting.length>0){let t=this.waiting.pop();t&&t([a,e])}else this.messages.push([a,e])}else console.error(`Invalid Tokens: ${t.session[0].slice(0,4)} ${t.channel.slice(0,4)} ||| ${e.session[0].slice(0,4)} ${e.channel.slice(0,4)} [${e.tokens}]`)}))}recv(){return i(this,void 0,void 0,(function*(){return new Promise((t=>this.messages.length>0?t(this.messages.splice(0,1)[0]):this.waiting.push(t)))}))}listen(){function t(t){if(void 0!==t.route){let e={brokers:t.route.brokers,session:t.route.session,channel:t.route.channel,is_public:t.isPublic};t.headerBuffer.push(["listen",e])}}return void 0===this.route?this.initLocks.push(t):t(this),this.then=this._then,this}send(t,e){return i(this,void 0,void 0,(function*(){if(void 0===this.route&&(yield new Promise((t=>this.initLocks.push(t)))),void 0!==this.route){function n(t,e,i,l,u,h){return a(this,arguments,(function*(){let a=new Uint8Array;if(h<u){if(1===u)a=new Uint8Array([0,0,0,0,...t]);else{if(u>Math.pow(2,16))throw`Payload size ${t.length/Math.pow(2,20)} MiB is too large`;a=new Uint8Array([...(0,f.intToBytes)(h,2),...(0,f.intToBytes)(u,2),...l,...t.slice(h*e,(h+1)*e)])}let c=d.getRandomValues(new Uint8Array(16));yield yield r(new Uint8Array([...c,...yield r(i.encrypt(a,c))])),yield r(yield*s(o(yield r(n(t,e,i,l,u,h+1)))))}}))}function c(t,e,n,r){var s,a,l,u;return i(this,void 0,void 0,(function*(){try{for(s=o(n);!(a=yield s.next()).done;){let n=a.value;yield t.execute(e,n,r)}}catch(t){l={error:t}}finally{try{a&&!a.done&&(u=s.return)&&(yield u.call(s))}finally{if(l)throw l.error}}}))}let p=this.route.clone();yield this.session.extendRoute(p,t.session[0]),this.listen();let y=new Uint8Array((0,l.serialize)(e));if(y.length<this.MAX_COMPRESSION_LEN){const x=(0,u.deflate)(y);y=new Uint8Array([255,...x])}else y=new Uint8Array([0,...y]);let g=d.getRandomValues(new Uint8Array(4)),_=new h.SharedKey(this.channelKey,t.channel),b=["send",{source:p.toObject(),destination:t.toObject()}],w=Math.floor((y.length-1)/this.MAX_PAYLOAD_LEN)+1,m=Math.min(w,this.MAX_OUTBOX),v=n(y,this.MAX_PAYLOAD_LEN,_,g,w,0);try{yield Promise.all(Array(m).fill(0).map((()=>new Promise(((t,e)=>{c(this,b,v,g).then(t).catch(e)})))))}catch(S){throw this.session.clear(g),S}return new Promise((t=>t(this)))}}))}execute(t,e=new Uint8Array,n){return i(this,void 0,void 0,(function*(){if(void 0===this.route&&(yield new Promise((t=>this.initLocks.push(t)))),void 0!==this.route&&(this.headerBuffer.length>0||void 0!==t)){let i=void 0!==t?this.headerBuffer.concat([t]):this.headerBuffer,r=1,o=[[]];for(let t of i){let e=JSON.stringify(t).length;r+e+1<Math.pow(256,2)?(o[o.length-1].push(t),r+=e+1):(o.push([t]),r=e+2)}for(let t of o)yield this.session.send(t,t.map((([t,e])=>t)).includes("send")?e:void 0,n),this.headerBuffer=[]}return this.then=void 0,new Promise((t=>t(this)))}))}_then(t){0===this.headerBuffer.length&&void 0!==this.route?(this.then=void 0,t(this)):this.execute().then((()=>t(this))).catch((t=>console.log("Error in channel._then",t)))}close(){var t;return i(this,void 0,void 0,(function*(){for(var e in this.session.connections){let n=this.session.connections[e],i=yield null===(t=this.route)||void 0===t?void 0:t.toObject();yield n.send([["close",i]])}for(var e in this.waiting)this.waiting[e]([void 0,void 0])}))}validateTokenChain(t,e){return i(this,void 0,void 0,(function*(){let n=yield this.session.sessionKey.publicSerial(!1);if(this.isPublic||t===n)return!0;if(0===e.length)return!1;let i=yield this.channelKey.publicSerial(!1),r=n,o=null;for(let s in e){let a;try{a=yield h.Token.decode(e[s])}catch(t){if("Invalid Signature"===t.message)return!1;throw t}if(a.asset===i&&a.issuer===r&&a.signature){if(a.issuer===n&&!this.session.issuedTokens.has(a.signature))return!1;if(a.maxDepth&&(null===o||a.maxDepth+s<o)&&(o=a.maxDepth+s),null===o||s<o){if(r=a.receiver,i=a.signature,r===t)return!0;continue}}return!1}return!1}))}};class y{constructor(t,e,n,i,r){this.brokers=t,this.session=e,this.channel=n,this.tokens=i,this._hash=this.session.join("")+this.channel,this._parentChannel=r}toObject(){return{brokers:this.brokers,session:this.session,channel:this.channel,tokens:this.tokens}}toString(){return`Route ${this.session[0].slice(0,4)} ${this.session[1].slice(0,2)} - ${this.channel.slice(0,4)}`}clone(){return y.fromObject(this.toObject())}validateTokenChain(t){return i(this,void 0,void 0,(function*(){if(this.session[0]!==t){if(!(this.tokens.length>0))throw"Invalid token chain 0";let e;for(let n in this.tokens){let i=yield h.Token.decode(this.tokens[n]);if(e=e||i,"0"===n&&(i.asset!=this.channel||"root"!=i.tokenType||i.issuer!=this.session[0])||"0"!==n&&(i.issuer!==e.receiver||i.asset!==e.signature||"extension"!==i.tokenType)||n===this.tokens.length.toString()&&i.receiver!==t)throw"Invalid token chain";if(i.receiver===t)break}}return!0}))}static fromObject(t){return new y(t.brokers,t.session,t.channel,t.tokens)}}e.Route=y;class g{constructor(t,e,n){this._session=t,this.sessionPublicKey="",t.sessionKey.publicSerial(!1).then((t=>{this.sessionPublicKey=t})),this.caller=e,this.rawMessages=n}}e.RequestMetadata=g},297:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.Token=e.SharedKey=e.PublicKey=e.PrivateKey=void 0;const r=n(988),o="undefined"==typeof crypto?n.g.crypto:crypto;e.PrivateKey=class{constructor(t,e,n){if(this.exportedKey=e,this.name=e?e.split("-----END PRIVATE KEY-----").slice(1).join("-----END PRIVATE KEY-----").replace("\n",""):n,"sign"===t)return this._algorithm="ECDSA",void(this._usage=["sign"]);this._algorithm="ECDH",this._usage=["deriveKey"]}generate(){return i(this,void 0,void 0,(function*(){if(void 0!==this.exportedKey){let t,e;t=yield o.subtle.importKey("pkcs8",(0,r.b64decode)(this.exportedKey.split("-----END PRIVATE KEY-----")[0].split("\n").slice(1).join("")),{name:this._algorithm,namedCurve:"P-256"},!0,this._usage),e=yield o.subtle.exportKey("jwk",t),this.key={privateKey:t,publicKey:yield o.subtle.importKey("jwk",{alg:e.alg,crv:e.crv,ext:!0,key_ops:[],kty:e.kty,x:e.x,y:e.y},{name:this._algorithm,namedCurve:"P-256"},!0,[])}}else this.key=yield o.subtle.generateKey({name:this._algorithm,namedCurve:"P-256"},!0,this._usage);return this}))}sign(t){return i(this,void 0,void 0,(function*(){if(void 0===this.key&&(yield this.generate()),void 0!==this.key){let e=yield o.subtle.sign({name:"ECDSA",hash:{name:"SHA-256"}},this.key.privateKey,t);return new Uint8Array(e)}throw new Error("key is undefined")}))}publicSerial(t=!0){return i(this,void 0,void 0,(function*(){if(void 0===this.key&&(yield this.generate()),void 0!==this.key){let e=(yield o.subtle.exportKey("raw",this.key.publicKey)).slice(1),n=(this.name&&t?`${this.name}.`:"")+(0,r.b64encode)(new Uint8Array(e));return void 0===this.repr&&(this.repr=n),n}throw new Error("key is undefined")}))}exportKey(){return i(this,void 0,void 0,(function*(){if(null==this.exportedKey){if(void 0===this.key&&(yield this.generate()),void 0===this.key)throw new Error("key is undefined");this.exportedKey="-----BEGIN PRIVATE KEY-----\n"+(0,r.b64encode)(new Uint8Array(yield o.subtle.exportKey("pkcs8",this.key.privateKey)))+"\n-----END PRIVATE KEY-----"+(this.name?`\n${this.name}`:"")}return this.exportedKey}))}};class s{constructor(t,e){if(this.publicSerial=e,this.name=e.split(".").slice(0,-1).join("."),"verify"===t)return this._algorithm="ECDSA",void(this._usage=["verify"]);if("derive"===t)return this._algorithm="ECDH",void(this._usage=[]);throw new Error("expected input 'use' should be 'verify' or 'derive'")}generate(){return i(this,void 0,void 0,(function*(){let t=(0,r.b64decode)(this.publicSerial.split("\n").slice(-1)[0]);return this.key=yield o.subtle.importKey("raw",new Uint8Array([4,...t]).buffer,{name:this._algorithm,namedCurve:"P-256"},!0,this._usage),this}))}verify(t,e){return i(this,void 0,void 0,(function*(){if(void 0===this.key&&(yield this.generate()),void 0!==this.key){if(yield o.subtle.verify({name:"ECDSA",hash:{name:"SHA-256"}},this.key,t,e))return;throw new Error("Invalid Signature")}throw new Error("key is undefined")}))}}e.PublicKey=s,e.SharedKey=class{constructor(t,e){this.publicSerial=e,this.privateKey=t}generate(){return i(this,void 0,void 0,(function*(){if(void 0===this.privateKey.key&&(yield this.privateKey.generate()),void 0!==this.privateKey.key)return this.key=yield o.subtle.deriveKey({name:"ECDH",public:(yield new s("derive",this.publicSerial).generate()).key},this.privateKey.key.privateKey,{name:"AES-CTR",length:256},!1,["encrypt","decrypt"]),this}))}encrypt(t,e){return i(this,void 0,void 0,(function*(){if(void 0===this.key&&(yield this.generate()),void 0!==this.key){let n=yield o.subtle.encrypt({name:"AES-CTR",counter:e,length:128},this.key,t);return new Uint8Array(n)}}))}decrypt(t,e){return i(this,void 0,void 0,(function*(){if(void 0===this.key&&(yield this.generate()),void 0!==this.key)return yield o.subtle.encrypt({name:"AES-CTR",counter:e,length:128},this.key,t)}))}};class a{constructor(t,e,n,i,r,o,s,a,l={}){this.issuer=t,this.brokers=e,this.receiver=n,this.asset=i,this.tokenType=r,this.maxDepth=o||null,this.validFrom=s||Date.now()/1e3,this.validUntil=a||null,this.metadata=l}verify(t){return i(this,void 0,void 0,(function*(){try{return yield new s("verify",this.issuer).verify((0,r.b64decode)(t),(new TextEncoder).encode(this.toString())),this.signature=t,!0}catch(t){return!1}}))}toString(){return JSON.stringify(this.toObj())}toObj(){return{issuer:this.issuer,brokers:this.brokers,receiver:this.receiver,asset:this.asset,token_type:this.tokenType,max_depth:this.maxDepth,valid_from:this.validFrom,valid_until:this.validUntil,metadata:this.metadata}}encode(){if(void 0===this.signature)throw"You need to sign the token before encoding it";return this.signature+"."+this.toString()}sign(t){return i(this,void 0,void 0,(function*(){return this.signature=(0,r.b64encode)(yield t.sign((new TextEncoder).encode(this.toString()))),this.signature}))}static decode(t,e=!0){return i(this,void 0,void 0,(function*(){let n=JSON.parse(t.substr(t.indexOf(".")+1)),i=new a(n.issuer,n.brokers,n.receiver,n.asset,n.token_type,n.max_depth,n.valid_from,n.valid_until,n.metadata),r=t.substring(0,t.indexOf("."));return e?(yield i.verify(r))?i:void console.error("Invalid Signature"):(i.signature=r,i)}))}}e.Token=a},13:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.createEntrypoint=e.Entrypoint=e.authenticate=void 0;const r=n(26),o=n(516);e.authenticate=function(t="ws://localhost:8776",e,n=console.log,i){return new s(t,e).authenticate._call([n],i)};class s{constructor(t="ws://localhost:8776",e,...n){if(!/(?![\w\d]+:\/\/[\w\d.]+):[\d]+/.exec(t)){let e=/[\w\d]+:\/\/[\w\d.]+/.exec(t)[0].length;t=t.slice(0,e)+":8776"+t.slice(e)}const i=new r.Session(e),s=new r.Connection(i,t);return new o.Telekinesis(new Promise((t=>s.connect().then((()=>t(s.entrypoint))))),i,...n)}get(){}}e.Entrypoint=s,e.createEntrypoint=function(t,e="ws://localhost:8776",n,s,a=!0,...l){return i(this,void 0,void 0,(function*(){if(!/(?![\w\d]+:\/\/[\w\d.]+):[\d]+/.exec(e)){let t=/[\w\d]+:\/\/[\w\d.]+/.exec(e)[0].length;e=e.slice(0,t)+":8776"+e.slice(t)}const i=new r.Session(n),u=new r.Connection(i,e);yield u.connect();const h=new o.Telekinesis(t,i,...l);return h._channel=new r.Channel(i,s,a),h._channel.listen(),h._channel.telekinesis=h,yield h._channel.execute(),h._channel.route,h}))}},516:function(t,e,n){"use strict";var i=this&&this.__awaiter||function(t,e,n,i){return new(n||(n=Promise))((function(r,o){function s(t){try{l(i.next(t))}catch(t){o(t)}}function a(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.blockArgEvaluation=e.injectFirstArg=e.Telekinesis=e.State=void 0;const r=n(26),o=n(988);class s{constructor(t,e,n,i,r,o){this.attributes=t||new Set,this.methods=e||new Map,this.pipeline=o||[],this.repr=n||"",this.doc=i,this.name=r,this._pendingChanges={},this._historyOffset=0,this._history=[]}toObject(t,e=!1){return t=t||new Set,{attributes:e&&this.attributes instanceof Map?Array.from(this.attributes.keys()).filter((e=>!t.has(e))).reduce(((t,e)=>(t[e]=this.attributes.get(e),t)),{}):Array.from(this.attributes.keys()).filter((e=>!t.has(e))),methods:Array.from(this.methods.keys()).filter((e=>!t.has(e))).reduce(((t,e)=>(t[e]=this.methods.get(e),t)),{}),pipeline:this.pipeline.map((t=>t)),repr:this.repr,doc:this.doc,name:this.name}}clone(){const t=s.fromObject(this.toObject(void 0,!0));return t._history=Array.from(this._history),t._historyOffset=this._historyOffset,t}static fromObject(t){return new s(t.attributes instanceof Array?new Set(t.attributes):t.attributes instanceof Set||t.attributes instanceof Map?t.attributes:Object.getOwnPropertyNames(t.attributes||{}).reduce(((e,n)=>(e.set(n,t.attributes[n]),e)),new Map),t.methods instanceof Map?t.methods:Object.getOwnPropertyNames(t.methods||{}).reduce(((e,n)=>(e.set(n,t.methods[n]),e)),new Map),t.repr,t.doc,t.name,t.pipeline)}getDiffs(t,e,n=!1){if(t<this._historyOffset&&t>=0)return[this._historyOffset+this._history.length,this.toObject(e,n)];const i={};for(let r in this._history.slice(t-this._historyOffset)){const o=this._history.slice(t-this._historyOffset)[r],s={};if(o.attributes){let t;t=n?Array.from(Object.entries(o.attributes[1])).filter((([t,n])=>!(e||new Set).has(t))):Array.from(Object.entries(o.attributes[1])).filter((([t,n])=>!(e||new Set).has(t)&&["c","d"].includes(n[0]))).map((([t,e])=>[t,e[0]])),t.length&&(s.attributes=[o.attributes[0],t.reduce(((t,[e,n])=>(t[e]=n,t)),{})])}if(o.methods){let t;t=Array.from(Object.entries(o.methods[1])).filter((([t,n])=>!(e||new Set).has(t))),t.length&&(s.methods=[o.methods[0],t.reduce(((t,[e,n])=>(t[e]=n,t)),{})])}o.repr&&(s.repr=o.repr),o.doc&&(s.doc=o.doc),i[(parseInt(r)+t+1).toString()]=s}return i.pipeline=this.pipeline,[0,i]}updateFromTarget(t){if(null!=t){if(t._isTelekinesisObject)return t._state;const e={attributes:Object.getOwnPropertyNames(t).filter((t=>"_"!==t[0])).reduce(((e,n)=>{var i;const r=t[n];return void 0!==r&&"Object"===(null===(i=Object.getPrototypeOf(r))||void 0===i?void 0:i.constructor.name)?e.set(n,Object.entries(r).reduce(((t,[e,n])=>(t[e]=n,t)),{})):e.set(n,r),e}),new Map),methods:Object.getOwnPropertyNames(Object.getPrototypeOf(t)||{}).filter((t=>!["constructor","arguments","caller","callee","prototype"].includes(t)&&"_"!==t[0])).reduce(((e,n)=>(e.set(n,["(*args)",t[n].toString()]),e)),new Map),repr:t.toString&&t.toString()||"",doc:t.__doc__,name:t.__name__};if(t instanceof Function&&e.methods.set("__call__",["(*args)",t.toString()]),0==this._historyOffset){const t=s.fromObject(e);this._historyOffset=1;for(let n of Object.getOwnPropertyNames(e))this[n]=t[n];return this}const n={};return n[this._historyOffset+this._history.length+1]=Object.getOwnPropertyNames(e).map((t=>[t,s.calcDiff(this[t],e[t])])).reduce(((t,[e,n])=>(n&&(t[e]=n),t)),{}),Object.keys(n[this._historyOffset+this._history.length+1]).length?this.updateFromDiffs(0,n):this}}updateFromDiffs(t,e){const n=["attributes","methods","repr","doc"];if(t){let i;this._history=[],this._historyOffset=t,this._pendingChanges={},i=e.attributes&&!(e.attributes instanceof Map||e.attributes instanceof Set)||e.methods&&!(e.methods instanceof Map)?s.fromObject(e):e;for(const t of n)this[t]=i[t]}else{const t=this._historyOffset+this._history.length+1;if(Object.keys(e).includes(t.toString()))for(let n in Object.keys(e))if("pipeline"===Object.keys(e)[n])this.pipeline=e.pipeline;else{const i=e[(t+parseInt(n)).toString()];void 0!==i&&this._history.push(i);for(let t of Object.getOwnPropertyNames(i))this[t]=s.applyDiff(this[t],i[t])}else Object.assign(this._pendingChanges,Object.entries(e).filter((([t,e])=>"pipeline"!=t)).reduce(((t,[e,n])=>(t[e]=n,t)),{}))}Object.keys(e).includes("pipeline")}static calcDiff(t,e,n=10){var i,r;if(t!==e){if(n>0){if(t instanceof Map&&e instanceof Map){const i={};for(let r of t.keys())if(e.has(r)){const o=s.calcDiff(t.get(r),e.get(r),n-1);o&&(i[r]=o)}else i[r]=["d"];for(let n of e.keys())t.has(n)||(i[n]=["c",e.get(n)]);return Object.keys(i).length?["u",i]:void 0}if(t instanceof Array&&e instanceof Array&&t.length==e.length){for(let n in t)if(typeof t[n]!=typeof e[n]||t[n]!==e[n])return["r",e];return}if(void 0!==t&&"Object"===(null===(i=Object.getPrototypeOf(t))||void 0===i?void 0:i.constructor.name)&&void 0!==e&&"Object"===(null===(r=Object.getPrototypeOf(e))||void 0===r?void 0:r.constructor.name)){const i={};for(const r of Object.keys(t))if(Object.getOwnPropertyNames(e).includes(r)){const o=s.calcDiff(t[r],e[r],n-1);o&&(i[r]=o)}else i[r]=["d"];for(const n of Object.keys(e))Object.keys(t).includes(n)||(i[n]=["c",e[n]]);return Object.keys(i).length?["u",i]:void 0}}return["r",e]}}static applyDiff(t,e){var n;if(!e||0===Object.keys(e).length)return t;if("c"===e[0]||"r"===e[0])return e[1];if("u"===e[0]){if(t instanceof Map){const n=new Map(t);for(const[t,i]of Object.entries(e[1])){const e=i[0];["c","r"].includes(e)?n.set(t,i[1]):"r"==e?n.delete(t):"u"==e&&n.set(t,s.applyDiff(n.get(t),i))}return n}if(t instanceof Set){const n=new Set(t);for(const[t,i]of Object.entries(e))"c"===i?n.add(t):"d"===i&&n.delete(t);return n}if(void 0!==t&&"Object"===(null===(n=Object.getPrototypeOf(t))||void 0===n?void 0:n.constructor.name)){const n=Object.entries(t).reduce(((t,[n,i])=>("d"!==e[1][n]&&(t[n]=i),t)),{});for(const[t,i]of Object.entries(e[1])){const e=i[0];["c","r"].includes(e)?n[t]=i[1]:"u"===e&&(n[t]=s.applyDiff(n[t],i))}return n}}}}e.State=s;class a extends Function{constructor(t,e,n,i=!0,o,l){if(super(),this._target=t,this._session=e,this._mask=n&&(n instanceof Set?n:n.reduce(((t,e)=>(t.add(e),t)),new Set))||new Set,this._exposeTb=i,this._maxDelegationDepth=o,this._parent=l,this._state=new s,this._subscribers=new Set,this._lastUpdate=Date.now(),this._blockThen=!1,this._catchFn,this._isTelekinesisObject=!0,this._requests=new Map,this._proxy=new Proxy(this,{get(t,e){if("_"===e[0])return t[e];if("then"===e)return t._blockThen&&Date.now()-t._lastUpdate<300?new Promise((e=>e(t))):(e,n)=>{t.__execute().catch((e=>{t._catchFn?(t._catchFn(e),t._catchFn=void 0):n(e)})).then((n=>{e&&e(n&&n[0]),t._catchFn=void 0}))};if("catch"===e)return e=>(t._catchFn=e,t._proxy);let n=t._state.clone();n.pipeline.push(["get",e]);let i=new a(t._target,t._session,t._mask,t._exposeTb,t._maxDelegationDepth,t._proxy);return i._state=n,i},apply:(t,e,n)=>t._call(n)}),t instanceof r.Route){e.routes.has(t._hash)||e.routes.set(t._hash,{refcount:0,delegations:new Set,state:new s});const n=this._session.routes.get(t._hash);this._updateState(...n.state.getDiffs(0,void 0,!0)),void 0===l&&(n.refcount+=1)}else t instanceof Promise||this._parent||(this._clients=new Map,e.targets.set(t,(e.targets.get(t)||new Set).add(this._proxy)),this._state.updateFromTarget(t));return this._proxy}_getRootParent(){return void 0!==this._parent?this._parent:this}get _lastValue(){if(1===this._state.pipeline.length&&"get"===this._state.pipeline[0][0]&&this._state.attributes instanceof Map)return this._state.attributes.get(this._state.pipeline[0][1])}_updateState(t,e){void 0!==t&&this._state.updateFromDiffs(t,e);for(const t of Object.getOwnPropertyNames(this))"_"===t[0]||["prototype","arguments","caller","length","name"].includes(t)||delete this[t];for(const t of Array.from(this._state.methods.keys()).concat(Array.from(this._state.attributes.keys())))["length","name"].includes(t)||(this[t]=null);this._onUpdateCallback&&this._onUpdateCallback(this)}_delegate(t,e){var n,o;return i(this,void 0,void 0,(function*(){let i,s=this._maxDelegationDepth,a=!0,l=[];if(this._target instanceof r.Route){if(i=this._target.clone(),s=void 0,"*"===t)throw Error("Cannot delegate remote Route to public '*'")}else(void 0===this._channel||(null===(n=this._channel)||void 0===n?void 0:n.isPublic)&&"*"===t)&&(this._channel?this._channel.isPublic=!0:(this._channel=yield new r.Channel(this._session,void 0,"*"===t),this._channel.telekinesis=this),this._channel.listen(),l.push(this._channel.headerBuffer.pop())),this._channel.isPublic&&(a=!1),i=yield this._channel.route;return a&&(yield this._session.extendRoute(i,t instanceof Array?t[0]:t,s),this._session.routes.has(i._hash)&&this._session.routes.get(i._hash).delegations.add(t instanceof Array?t:[t,null])),i._parentChannel=e||this._channel,null===(o=i._parentChannel)||void 0===o||o.headerBuffer.push(...l),i}))}_subscribe(t){return this._onUpdateCallback=t,this._subscription=new a((t=>{const e=this._state.pipeline;this._updateState(...t._state.getDiffs(0,void 0,!0)),this._state.pipeline=e}),this._session,void 0,this._exposeTb,this._maxDelegationDepth),this._state.pipeline.push(["subscribe",this._subscription]),this}_handleRequest(t,e,n){var o,s,a,l;return i(this,void 0,void 0,(function*(){let i,u;try{if(this._clients&&e.caller&&!this._clients.has(null===(o=e.caller)||void 0===o?void 0:o.session.join())&&(this._clients.set(e.caller.session.join(),{lastState:null,cacheAttributes:null}),this._clients.delete([e.caller.session[0],null].join())),void 0!==n.close&&e.caller){null===(s=this._clients)||void 0===s||s.delete(e.caller.session.join());for(const t of n.close)this._clients&&!this._clients.has(t.join())&&(this._clients.set(t.join(),{lastState:null,cacheAttributes:null}),null!==t[1]&&this._clients.delete([t[0],null].join()));0==(null===(a=this._clients)||void 0===a?void 0:a.size)&&!1===(null===(l=this._channel)||void 0===l?void 0:l.isPublic)&&(yield this._close())}else if(void 0!==n.ping&&e.caller)yield t.send(e.caller,{repr:this._state.repr});else if(void 0!==n.pipeline&&e.caller){let o={metadata:e,payload:n,channel:t};this._requests.set(e.caller,o),n.reply_to&&(u=r.Route.fromObject(n.reply_to),yield u.validateTokenChain(yield this._session.sessionKey.publicSerial(!1)),e.replyTo=u),i=this._decode(n.pipeline);let[s,a]=yield this.__execute(e,i,!0);yield this._respondRequest(e.caller,s,a,!1)}}catch(t){let i;console.log(`Telekinesis request error with payload ${JSON.stringify(n,void 0,2)}, ${t.message}`+this._exposeTb?"\n"+t.stack:""),this._state.pipeline=[],i=t instanceof Error?{error:t.name+" "+t.message+"\n"+(this._exposeTb?t.stack:""),error_type:t.name+" "+t.message}:{error:t+"",error_type:"Error"},e.caller&&(yield this._respondRequest(e.caller,i,void 0,!0))}}))}_respondRequest(t,e,n,o=!1){return i(this,void 0,void 0,(function*(){if(this._requests.has(t)){let{metadata:i,payload:s,channel:l}=this._requests.get(t),u=i.replyTo;if(this._requests.delete(i.caller),o)try{if(void 0!==u){const t=new r.Channel(this._session);try{yield t.send(u,e)}catch(t){}finally{yield t.close()}}else yield l.send(i.caller,e)}catch(t){}else if(e instanceof a&&e._target instanceof r.Route&&(e._target.session.toString()!==[yield this._session.sessionKey.publicSerial(!1),this._session.instanceId].toString()||!this._session.channels.has(e._target.channel))&&this.__onSameNetwork(e._session))yield e._forward(e._state.pipeline,u||i.caller,(yield e._session.sessionKey.publicSerial(!1))!=(yield this._session.sessionKey.publicSerial(!1))?this._session:void 0,{root_parent:u?s.root_parent:[this,i.caller.session]});else if(void 0!==u){const t=new r.Channel(this._session);try{yield t.send(u,{return:yield this._encode(e,u.session,t,n),root_parent:s.root_parent})}catch(t){}finally{yield t.close()}}else{const t=yield this._encode(this,i.caller.session,l);yield l.send(i.caller,{return:yield this._encode(e,i.caller.session,void 0,n),root_parent:e===this||e===this._target&&e===this._proxy?null:t}).catch((t=>null))}}}))}_call(t,e){let n=this._state.clone();n.pipeline.push(["call",[t,e||{}]]);let i=new a(this._target,this._session,this._mask,this._exposeTb,this._maxDelegationDepth,this._proxy);return i._state.pipeline=n.pipeline,i}_execute(){return i(this,void 0,void 0,(function*(){return(yield this.__execute())[0]}))}__execute(t,e,n=!1){var o,u;return i(this,void 0,void 0,(function*(){if(this._target instanceof Promise&&(this._target=yield this._target,this._target instanceof r.Route?void 0===this._parent&&(this._session.routes.has(this._target._hash)||this._session.routes.set(this._target._hash,{refcount:0,delegations:new Set,state:new s}),this._session.routes.get(this._target._hash).refcount+=1):this._session.targets.set(this._target,(this._session.targets.get(this._target)||new Set).add(this._proxy))),e=e||[],e=this._state.pipeline.concat(e),this._state.pipeline=[],void 0===t&&(t=new r.RequestMetadata(this._session)),this._target instanceof r.Route)return[yield this._forward(e),void 0];function i(e){var n,i;return void 0!==(null==e?void 0:e._blockThen)&&(null==e?void 0:e._lastUpdate)&&(null===(i=null===(n=null==e?void 0:e._state)||void 0===n?void 0:n.pipeline)||void 0===i?void 0:i.length)?new Promise((n=>e._execute(t).then((t=>n(t[0]))))):e}let h=this._target,f=this._prevTarget||h,c=!1,d=this._session.targets.get(this._target)||new Set;for(let s in e){let p=!1;if(n&&h instanceof a&&h._target instanceof r.Route&&(h._target.session.toString()!==[yield this._session.sessionKey.publicSerial(!1),this._session.instanceId].toString()||!this._session.channels.has(h._target.channel))){const t=h._state;h=new a(h._target,h._session,h._mask,h._exposeTb,h._maxDelegationDepth,h._parent),h._state=t.clone(),h._state.pipeline.push(...e.slice(parseInt(s))),this.__onSameNetwork(h._session)?h._blockThen=!0:h=yield h;break}let y=e[s][0];if("get"===y){let t=e[s][1];if("__getitem__"!==t&&"_"===t[0]||this._mask.has(t))throw new l("Private attributes and methods (those starting with _) cannot be accessed remotely");if(f=h,h="__getitem__"===t?t=>{if("_"===t[0]||this._mask.has(t))throw new l("Private attributes and methods (those starting with _) cannot be accessed remotely");return[f[t],f]}:h[t],void 0===h)throw ReferenceError(`Attribute ${t} not found`);h instanceof Function&&h.bind(f)}else if("call"===y){let n=e[s][1][0],r=[];if(!0===h._tk_block_arg_evaluation)r=n;else for(let t in n)r[t]=i(n[t]),r[t]instanceof Promise&&(r[t]=yield r[t]);!0===h._tk_inject_first&&(t.pipeline=e.slice(Number(s)+1),p=!0,r=[t,...r]);try{h=h.call(f,...r)}catch(t){try{h=new h(...r)}catch(e){throw t}}(h instanceof Promise||h&&"Promise"===(null===(o=Object.getPrototypeOf(h))||void 0===o?void 0:o.constructor.name))&&(h=yield h),!p||t.pipeline&&t.pipeline.length||(c=!0)}else if("subscribe"===y){const n=e[s][1],i=n._target;if(t&&t.caller&&(yield i.validateTokenChain(t.caller.session[0]))){const t=a._reuse(h,this._session,this._mask,this._exposeTb,this._maxDelegationDepth);t._clients&&!t._clients.has(i.session.join())&&(t._clients.set(i.session.join(),{lastState:null,cacheAttributes:null}),t._clients.delete([i.session[0],null].join())),(null===(u=t._clients)||void 0===u?void 0:u.get(i.session.join())).cacheAttributes=!0,t._subscribers.add(n)}}if(h instanceof a&&!(n&&h._target instanceof r.Route)&&(h=(yield h.__execute())[0]),d=new Set([...d,...this._session.targets.get(h)||[]]),c)break}for(const t of d){t._state.updateFromTarget(t._target),t._updateState();const e=Array.from(t._subscribers);e.length&&e.map((e=>e(t)._execute()))}return h!==this._target||void 0!==this._target&&null!==this._target?(h instanceof a&&!h._blockThen&&(h._blockThen=!0),[h,f]):(this._lastUpdate=Date.now(),this._blockThen=!0,[this._proxy,f])}))}_timeout(t){return Promise.race([new Promise((e=>setTimeout((()=>{this._catchFn&&this._catchFn("Timeout"),e()}),1e3*t))),this._execute().catch(this._catchFn)])}_sendRequest(t,e){var n;return i(this,void 0,void 0,(function*(){try{yield t.send(this._target,e)}catch(t){throw t}if(void 0===e.reply_to){let[e,i]=yield t.recv();if(i.root_parent){const t=this._getRootParent(),[r,o]=t._decode(i.root_parent,null===(n=e.caller)||void 0===n?void 0:n.session[0])._state.getDiffs(0,void 0,!0);t._updateState(r,o)}if(Object.getOwnPropertyNames(i).includes("error"))throw Error(i.error);if(Object.getOwnPropertyNames(i).includes("return")){let t=this._decode(i.return,this._target.session[0]);return!0===(null==t?void 0:t._isTelekinesisObject)&&(t._lastUpdate=Date.now(),t._blockThen=!0),t}}}))}_close(){var t,e,n;return i(this,void 0,void 0,(function*(){try{if(this._target instanceof r.Route){const t=this._session.routes.get(this._target._hash);if(void 0!==t.refcount&&(t.refcount-=0,t.refcount<=0)){const e=new r.Channel(this._session);yield e.send(this._target,{close:Array.from(t.delegations)||[]})}}else null===(t=this._session.targets.get(this._target))||void 0===t||t.delete(this),0===(null===(e=this._session.targets.get(this._target))||void 0===e?void 0:e.size)&&this._session.targets.delete(this._target),yield null===(n=this._channel)||void 0===n?void 0:n.close()}catch(t){console.error(t)}}))}_forward(t,e,n,o){return i(this,void 0,void 0,(function*(){let i=new r.Channel(this._session);try{if(void 0!==e&&(void 0!==n&&(yield n.extendRoute(e,yield this._session.sessionKey.publicSerial(!1))),yield this._session.extendRoute(e,this._target.session[0])),o)for(let[t,e]of Object.entries(o))e instanceof Array&&2==e.length&&e[0]instanceof a&&(o[t]=yield e[0]._encode(e[0]._proxy,e[1],i));return yield this._sendRequest(i,Object.assign({reply_to:null==e?void 0:e.toObject(),pipeline:yield this._encode(t,this._target.session,i)},o))}catch(t){if(void 0===e)throw t}finally{yield i.close()}}))}_encode(t,e,n,o,s,l=!1){var h,f,c,d,p,y,g,_,b,w,m,v,x,S,O;return i(this,void 0,void 0,(function*(){let i=0;if(void 0===s)s=new Map;else{if(s.has(t))return s.get(t)[0].toString();i=s.size}void 0===e&&(e=[yield this._session.sessionKey.publicSerial(!1),this._session.instanceId]);let k=[i,["placeholder",null]];if(s.set(t,k),["number","boolean","string"].includes(typeof t)||null==t)k[1]=[{number:Number.isInteger(t)?"int":"float",string:"str",boolean:"bool",object:"NoneType",undefined:"NoneType"}[typeof t],t];else if(void 0!==t&&"Uint8Array"===(null===(h=Object.getPrototypeOf(t))||void 0===h?void 0:h.constructor.name)||t instanceof Uint8Array)k[1]=["bytes",t];else if(void 0!==t&&"Array"===(null===(f=Object.getPrototypeOf(t))||void 0===f?void 0:f.constructor.name)&&u(t))k[1]=["raw_list",t];else if(void 0!==t&&"Object"===(null===(c=Object.getPrototypeOf(t))||void 0===c?void 0:c.constructor.name)&&u(t))k[1]=["raw_dict",t];else if(void 0===t||"Array"!==(null===(d=Object.getPrototypeOf(t))||void 0===d?void 0:d.constructor.name)&&"Set"!==(null===(p=Object.getPrototypeOf(t))||void 0===p?void 0:p.constructor.name))if(void 0!==t&&"Object"===(null===(g=Object.getPrototypeOf(t))||void 0===g?void 0:g.constructor.name)){let i=[];for(let r in t)i.push([yield this._encode(r,e,n,void 0,s,l),yield this._encode(t[r],e,n,void 0,s,l)]);k[1]=["dict",i]}else if(void 0!==t&&t instanceof r.Route)k[1]=["route",t.toObject()];else{let i;i=!0!==t._isTelekinesisObject||t._target instanceof r.Route&&!this.__onSameNetwork(t._session)?a._reuse(t,this._session,this._mask,this._exposeTb,this._maxDelegationDepth,void 0):t,t._target instanceof r.Route||(!1===(null===(_=i._clients)||void 0===_?void 0:_.has(e.join()))&&(null===(b=i._clients)||void 0===b||b.set(e.join(),{lastState:null,cacheAttributes:null})),null!==e[1]&&(null===(w=i._clients)||void 0===w||w.delete([e[0],null].join())),o&&(i._prevTarget=o));let u=yield i._delegate(e[0],n||this._channel),h=e!==u.session?i._state.getDiffs((null===(v=null===(m=i._clients)||void 0===m?void 0:m.get(e.join()))||void 0===v?void 0:v.lastState)||0,this._mask,!l&&(null===(S=null===(x=i._clients)||void 0===x?void 0:x.get(e.join()))||void 0===S?void 0:S.cacheAttributes)):[0,{pipeline:i._state.pipeline}];k[1]=["obj",[u.toObject(),yield this._encode(h,e,n,void 0,s,!0)]],(null===(O=i._clients)||void 0===O?void 0:O.has(e.join()))&&(i._clients.get(e.join()).lastState=i._state._historyOffset+i._state._history.length)}else{let i=[],r=t instanceof Array?t:Array.from(t.values());for(let t in r)i[t]=yield this._encode(r[t],e,n,void 0,s,l);k[1]=["Array"===(null===(y=Object.getPrototypeOf(t))||void 0===y?void 0:y.constructor.name)?"list":"set",i]}return s.delete(t),s.set(t,k),0===i?Array.from(s.values()).reduce(((t,e)=>(t[e[0]]=e[1],t)),{}):i.toString()}))}_decode(t,e,n,i=new Map){let o;if(void 0===n&&(n="0"),void 0!==n){if(i.has(n))return i.get(n);let l=t[n][0],u=t[n][1];if(["int","float","str","bool","NoneType","raw_list","raw_dict"].includes(l))o=u;else if("bytes"===l)o=u.buffer;else if(["list","tuple","set"].includes(l)){let r=Array(u.length);i.set(n,r);for(let n in u)r[n]=this._decode(t,e,u[n],i);o="set"===l?r.reduce(((t,e)=>(t.add(e),t)),new Set):r,i.set(n,o)}else if(["range","slice"].includes(l)){let t=Math.ceil((u[1]-u[0])/u[2]);o=t<=0?[]:new Array(t).fill(0).map(((t,e)=>u[0]+u[2]*e))}else if("dict"===l){o={},i.set(n,o);for(let[n,r]of u)o[this._decode(t,e,n,i)]=this._decode(t,e,r,i);i.set(n,o)}else if("route"===l)o=r.Route.fromObject(u);else{const l=r.Route.fromObject(u[0]),[h,f]=this._decode(t,e,u[1],i);this._session.routes.has(l._hash)||this._session.routes.set(l._hash,{refcount:0,delegations:new Set,state:new s});const c=this._session.routes.get(l._hash);c.state.updateFromDiffs(h,f),this._parent&&"0"===n?(this._target=l,c.refcount+=1,this._updateState(...c.state.getDiffs(0,void 0,!0)),this._parent=void 0,o=this._proxy):this._target instanceof r.Route&&JSON.stringify(this._target.toObject())===JSON.stringify(l.toObject())?(this._updateState(...c.state.getDiffs(0,void 0,!0)),o=this._proxy):o=new a(l,this._session,this._mask,this._exposeTb,this._maxDelegationDepth)}return i.set(n,o),o}}__onSameNetwork(t){for(let e of t.connections)for(let t of this._session.connections)if([...e.brokerPeers||[],e.brokerId||""].filter((e=>[...t.brokerPeers||[],t.brokerId||""].includes(e))).length)return!0;return!1}get __signature__(){return this._state.pipeline.length?(this._state.methods.get(this._state.pipeline[this._state.pipeline.length-1][1])||[void 0])[0]:(this._state.methods.get("__call__")||[void 0])[0]}get __doc__(){return this._state.pipeline.length?(this._state.methods.get(this._state.pipeline[this._state.pipeline.length-1][1])||[null,void 0])[1]:(this._state.doc||"")+"\n"+(this._state.methods.get("__call__")||[null,""])[1]}static _reuse(t,e,n,i=!0,r,s=!0,l){const u={target:t,session:e,mask:new Set(n),exposeTb:i,maxDelegationDepth:r,compileSignatures:s};return Array.from(e.targets.get(t)||[]).reduce(((t,e)=>t||Object.entries(u).reduce(((t,n)=>t&&(e["_"+n[0]]instanceof Set?(0,o.eqSet)(e["_"+n[0]],n[1]):e["_"+n[0]]===n[1])),!0)&&e),void 0)||new a(t,e,n,i,r,l)}}e.Telekinesis=a,e.injectFirstArg=function(t){return t._tk_inject_first=!0,t},e.blockArgEvaluation=function(t){return t._tk_block_arg_evaluation=!0,t};class l extends Error{constructor(t){super(t),this.name="PermissionError"}}function u(t,e=0){var n,i,r;return!(e>=300)&&(!!(["number","boolean","string"].includes(typeof t)||null==t||void 0!==t&&"Uint8Array"===(null===(n=Object.getPrototypeOf(t))||void 0===n?void 0:n.constructor.name))||(void 0!==t&&"Array"===(null===(i=Object.getPrototypeOf(t))||void 0===i?void 0:i.constructor.name)?t.reduce(((t,n)=>t&&u(n,e+1)),!0):void 0!==t&&"Object"===(null===(r=Object.getPrototypeOf(t))||void 0===r?void 0:r.constructor.name)&&Array.from(Object.values(t)).reduce(((t,n)=>t&&u(n,e+1)),!0)))}},988:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.eqSet=e.bytesToInt=e.intToBytes=e.b64decode=e.b64encode=void 0;const i="undefined"!=typeof btoa?btoa:n(706),r="undefined"!=typeof atob?atob:n(892);e.b64encode=function(t){return i(String.fromCharCode.apply(null,t))},e.b64decode=function(t){return new Uint8Array(r(t).split("").map((function(t){return t.charCodeAt(0)})))},e.intToBytes=function(t,e){return new Uint8Array(e).map(((n,i)=>t/Math.pow(256,e-i-1)))},e.bytesToInt=function(t){return Array.from(t).reduce(((e,n,i)=>e+n*Math.pow(256,t.length-i-1)),0)},e.eqSet=function(t,e){if(t.size!==e.size)return!1;for(var n of t)if(!e.has(n))return!1;return!0}},892:(t,e,n)=>{t=n.nmd(t),function(e){"use strict";var n,i="function"==typeof(n=e.atob)?n:"function"==typeof Buffer?function(t){return new Buffer(t,"base64").toString("binary")}:"object"==typeof e.base64js?function(t){var n=e.base64js.b64ToByteArray(t);return Array.prototype.map.call(n,(function(t){return String.fromCharCode(t)})).join("")}:function(){throw new Error("You're probably in an old browser or an iOS webworker. It might help to include beatgammit's base64-js.")};e.atob=i,t&&t.exports&&(t.exports=i)}(window)},121:(t,e,n)=>{"use strict";n.r(e),n.d(e,{BSONError:()=>x,BSONRegExp:()=>xt,BSONSymbol:()=>St,BSONTypeError:()=>S,BSON_BINARY_SUBTYPE_BYTE_ARRAY:()=>pe,BSON_BINARY_SUBTYPE_COLUMN:()=>we,BSON_BINARY_SUBTYPE_DEFAULT:()=>ce,BSON_BINARY_SUBTYPE_ENCRYPTED:()=>be,BSON_BINARY_SUBTYPE_FUNCTION:()=>de,BSON_BINARY_SUBTYPE_MD5:()=>_e,BSON_BINARY_SUBTYPE_USER_DEFINED:()=>me,BSON_BINARY_SUBTYPE_UUID:()=>ye,BSON_BINARY_SUBTYPE_UUID_NEW:()=>ge,BSON_DATA_ARRAY:()=>Vt,BSON_DATA_BINARY:()=>qt,BSON_DATA_BOOLEAN:()=>Gt,BSON_DATA_CODE:()=>ie,BSON_DATA_CODE_W_SCOPE:()=>oe,BSON_DATA_DATE:()=>Qt,BSON_DATA_DBPOINTER:()=>ne,BSON_DATA_DECIMAL128:()=>ue,BSON_DATA_INT:()=>se,BSON_DATA_LONG:()=>le,BSON_DATA_MAX_KEY:()=>fe,BSON_DATA_MIN_KEY:()=>he,BSON_DATA_NULL:()=>te,BSON_DATA_NUMBER:()=>Yt,BSON_DATA_OBJECT:()=>Ht,BSON_DATA_OID:()=>Wt,BSON_DATA_REGEXP:()=>ee,BSON_DATA_STRING:()=>Jt,BSON_DATA_SYMBOL:()=>re,BSON_DATA_TIMESTAMP:()=>ae,BSON_DATA_UNDEFINED:()=>Xt,BSON_INT32_MAX:()=>zt,BSON_INT32_MIN:()=>$t,BSON_INT64_MAX:()=>Ct,BSON_INT64_MIN:()=>Ft,Binary:()=>Z,Code:()=>Y,DBRef:()=>H,Decimal128:()=>dt,Double:()=>pt,EJSON:()=>Dt,Int32:()=>yt,Long:()=>tt,LongWithoutOverridesClass:()=>Ot,Map:()=>Lt,MaxKey:()=>gt,MinKey:()=>_t,ObjectID:()=>vt,ObjectId:()=>vt,Timestamp:()=>kt,UUID:()=>K,calculateObjectSize:()=>hn,default:()=>cn,deserialize:()=>un,deserializeStream:()=>fn,serialize:()=>an,serializeWithBufferAndIndex:()=>ln,setInternalBufferSize:()=>sn});for(var i=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,l=s.length;a<l;++a)i[a]=s[a],r[s.charCodeAt(a)]=a;function u(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=t.indexOf("=");return-1===n&&(n=e),[n,n===e?0:4-n%4]}function h(t,e,n){for(var r,o,s=[],a=e;a<n;a+=3)r=(t[a]<<16&16711680)+(t[a+1]<<8&65280)+(255&t[a+2]),s.push(i[(o=r)>>18&63]+i[o>>12&63]+i[o>>6&63]+i[63&o]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63;var f,c,d=function(t){var e,n,i=u(t),s=i[0],a=i[1],l=new o(function(t,e,n){return 3*(e+n)/4-n}(0,s,a)),h=0,f=a>0?s-4:s;for(n=0;n<f;n+=4)e=r[t.charCodeAt(n)]<<18|r[t.charCodeAt(n+1)]<<12|r[t.charCodeAt(n+2)]<<6|r[t.charCodeAt(n+3)],l[h++]=e>>16&255,l[h++]=e>>8&255,l[h++]=255&e;return 2===a&&(e=r[t.charCodeAt(n)]<<2|r[t.charCodeAt(n+1)]>>4,l[h++]=255&e),1===a&&(e=r[t.charCodeAt(n)]<<10|r[t.charCodeAt(n+1)]<<4|r[t.charCodeAt(n+2)]>>2,l[h++]=e>>8&255,l[h++]=255&e),l},p=function(t){for(var e,n=t.length,r=n%3,o=[],s=16383,a=0,l=n-r;a<l;a+=s)o.push(h(t,a,a+s>l?l:a+s));return 1===r?(e=t[n-1],o.push(i[e>>2]+i[e<<4&63]+"==")):2===r&&(e=(t[n-2]<<8)+t[n-1],o.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),o.join("")},y=function(t,e,n,i,r){var o,s,a=8*r-i-1,l=(1<<a)-1,u=l>>1,h=-7,f=n?r-1:0,c=n?-1:1,d=t[e+f];for(f+=c,o=d&(1<<-h)-1,d>>=-h,h+=a;h>0;o=256*o+t[e+f],f+=c,h-=8);for(s=o&(1<<-h)-1,o>>=-h,h+=i;h>0;s=256*s+t[e+f],f+=c,h-=8);if(0===o)o=1-u;else{if(o===l)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,i),o-=u}return(d?-1:1)*s*Math.pow(2,o-i)},g=function(t,e,n,i,r,o){var s,a,l,u=8*o-r-1,h=(1<<u)-1,f=h>>1,c=23===r?Math.pow(2,-24)-Math.pow(2,-77):0,d=i?0:o-1,p=i?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=h):(s=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-s))<1&&(s--,l*=2),(e+=s+f>=1?c/l:c*Math.pow(2,1-f))*l>=2&&(s++,l/=2),s+f>=h?(a=0,s=h):s+f>=1?(a=(e*l-1)*Math.pow(2,r),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,r),s=0));r>=8;t[n+d]=255&a,d+=p,a/=256,r-=8);for(s=s<<r|a,u+=r;u>0;t[n+d]=255&s,d+=p,s/=256,u-=8);t[n+d-p]|=128*y},_=(f=function(t,e){var n="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=o,e.SlowBuffer=function(t){return+t!=t&&(t=0),o.alloc(+t)},e.INSPECT_MAX_BYTES=50;var i=2147483647;function r(t){if(t>i)throw new RangeError('The value "'+t+'" is invalid for option "size"');var e=new Uint8Array(t);return Object.setPrototypeOf(e,o.prototype),e}function o(t,e,n){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return l(t)}return s(t,e,n)}function s(t,e,n){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!o.isEncoding(e))throw new TypeError("Unknown encoding: "+e);var n=0|c(t,e),i=r(n),s=i.write(t,e);return s!==n&&(i=i.slice(0,s)),i}(t,e);if(ArrayBuffer.isView(t))return function(t){if(F(t,Uint8Array)){var e=new Uint8Array(t);return h(e.buffer,e.byteOffset,e.byteLength)}return u(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t));if(F(t,ArrayBuffer)||t&&F(t.buffer,ArrayBuffer))return h(t,e,n);if("undefined"!=typeof SharedArrayBuffer&&(F(t,SharedArrayBuffer)||t&&F(t.buffer,SharedArrayBuffer)))return h(t,e,n);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');var i=t.valueOf&&t.valueOf();if(null!=i&&i!==t)return o.from(i,e,n);var s=function(t){if(o.isBuffer(t)){var e=0|f(t.length),n=r(e);return 0===n.length||t.copy(n,0,0,e),n}return void 0!==t.length?"number"!=typeof t.length||K(t.length)?r(0):u(t):"Buffer"===t.type&&Array.isArray(t.data)?u(t.data):void 0}(t);if(s)return s;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return o.from(t[Symbol.toPrimitive]("string"),e,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+babelHelpers.typeof(t))}function a(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function l(t){return a(t),r(t<0?0:0|f(t))}function u(t){for(var e=t.length<0?0:0|f(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function h(t,e,n){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(n||0))throw new RangeError('"length" is outside of buffer bounds');var i;return i=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),Object.setPrototypeOf(i,o.prototype),i}function f(t){if(t>=i)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+i.toString(16)+" bytes");return 0|t}function c(t,e){if(o.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||F(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+babelHelpers.typeof(t));var n=t.length,i=arguments.length>2&&!0===arguments[2];if(!i&&0===n)return 0;for(var r=!1;;)switch(e){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return z(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return $(t).length;default:if(r)return i?-1:z(t).length;e=(""+e).toLowerCase(),r=!0}}function _(t,e,n){var i=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return U(this,e,n);case"utf8":case"utf-8":return A(this,e,n);case"ascii":return B(this,e,n);case"latin1":case"binary":return T(this,e,n);case"base64":return E(this,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j(this,e,n);default:if(i)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),i=!0}}function b(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}function w(t,e,n,i,r){if(0===t.length)return-1;if("string"==typeof n?(i=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),K(n=+n)&&(n=r?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(r)return-1;n=t.length-1}else if(n<0){if(!r)return-1;n=0}if("string"==typeof e&&(e=o.from(e,i)),o.isBuffer(e))return 0===e.length?-1:m(t,e,n,i,r);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?r?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):m(t,[e],n,i,r);throw new TypeError("val must be string, number or Buffer")}function m(t,e,n,i,r){var o,s=1,a=t.length,l=e.length;if(void 0!==i&&("ucs2"===(i=String(i).toLowerCase())||"ucs-2"===i||"utf16le"===i||"utf-16le"===i)){if(t.length<2||e.length<2)return-1;s=2,a/=2,l/=2,n/=2}function u(t,e){return 1===s?t[e]:t.readUInt16BE(e*s)}if(r){var h=-1;for(o=n;o<a;o++)if(u(t,o)===u(e,-1===h?0:o-h)){if(-1===h&&(h=o),o-h+1===l)return h*s}else-1!==h&&(o-=o-h),h=-1}else for(n+l>a&&(n=a-l),o=n;o>=0;o--){for(var f=!0,c=0;c<l;c++)if(u(t,o+c)!==u(e,c)){f=!1;break}if(f)return o}return-1}function v(t,e,n,i){n=Number(n)||0;var r=t.length-n;i?(i=Number(i))>r&&(i=r):i=r;var o=e.length;i>o/2&&(i=o/2);for(var s=0;s<i;++s){var a=parseInt(e.substr(2*s,2),16);if(K(a))return s;t[n+s]=a}return s}function x(t,e,n,i){return C(z(e,t.length-n),t,n,i)}function S(t,e,n,i){return C(function(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}(e),t,n,i)}function O(t,e,n,i){return C($(e),t,n,i)}function k(t,e,n,i){return C(function(t,e){for(var n,i,r,o=[],s=0;s<t.length&&!((e-=2)<0);++s)i=(n=t.charCodeAt(s))>>8,r=n%256,o.push(r),o.push(i);return o}(e,t.length-n),t,n,i)}function E(t,e,n){return 0===e&&n===t.length?p(t):p(t.slice(e,n))}function A(t,e,n){n=Math.min(t.length,n);for(var i=[],r=e;r<n;){var o,s,a,l,u=t[r],h=null,f=u>239?4:u>223?3:u>191?2:1;if(r+f<=n)switch(f){case 1:u<128&&(h=u);break;case 2:128==(192&(o=t[r+1]))&&(l=(31&u)<<6|63&o)>127&&(h=l);break;case 3:o=t[r+1],s=t[r+2],128==(192&o)&&128==(192&s)&&(l=(15&u)<<12|(63&o)<<6|63&s)>2047&&(l<55296||l>57343)&&(h=l);break;case 4:o=t[r+1],s=t[r+2],a=t[r+3],128==(192&o)&&128==(192&s)&&128==(192&a)&&(l=(15&u)<<18|(63&o)<<12|(63&s)<<6|63&a)>65535&&l<1114112&&(h=l)}null===h?(h=65533,f=1):h>65535&&(h-=65536,i.push(h>>>10&1023|55296),h=56320|1023&h),i.push(h),r+=f}return function(t){var e=t.length;if(e<=N)return String.fromCharCode.apply(String,t);for(var n="",i=0;i<e;)n+=String.fromCharCode.apply(String,t.slice(i,i+=N));return n}(i)}e.kMaxLength=i,o.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),o.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}}),o.poolSize=8192,o.from=function(t,e,n){return s(t,e,n)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array),o.alloc=function(t,e,n){return function(t,e,n){return a(t),t<=0?r(t):void 0!==e?"string"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}(t,e,n)},o.allocUnsafe=function(t){return l(t)},o.allocUnsafeSlow=function(t){return l(t)},o.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==o.prototype},o.compare=function(t,e){if(F(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),F(e,Uint8Array)&&(e=o.from(e,e.offset,e.byteLength)),!o.isBuffer(t)||!o.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;for(var n=t.length,i=e.length,r=0,s=Math.min(n,i);r<s;++r)if(t[r]!==e[r]){n=t[r],i=e[r];break}return n<i?-1:i<n?1:0},o.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return o.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var i=o.allocUnsafe(e),r=0;for(n=0;n<t.length;++n){var s=t[n];if(F(s,Uint8Array))r+s.length>i.length?o.from(s).copy(i,r):Uint8Array.prototype.set.call(i,s,r);else{if(!o.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(i,r)}r+=s.length}return i},o.byteLength=c,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)b(this,e,e+1);return this},o.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)b(this,e,e+3),b(this,e+1,e+2);return this},o.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)b(this,e,e+7),b(this,e+1,e+6),b(this,e+2,e+5),b(this,e+3,e+4);return this},o.prototype.toString=function(){var t=this.length;return 0===t?"":0===arguments.length?A(this,0,t):_.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(t){if(!o.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===o.compare(this,t)},o.prototype.inspect=function(){var t="",n=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(t+=" ... "),"<Buffer "+t+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(t,e,n,i,r){if(F(t,Uint8Array)&&(t=o.from(t,t.offset,t.byteLength)),!o.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+babelHelpers.typeof(t));if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===i&&(i=0),void 0===r&&(r=this.length),e<0||n>t.length||i<0||r>this.length)throw new RangeError("out of range index");if(i>=r&&e>=n)return 0;if(i>=r)return-1;if(e>=n)return 1;if(this===t)return 0;for(var s=(r>>>=0)-(i>>>=0),a=(n>>>=0)-(e>>>=0),l=Math.min(s,a),u=this.slice(i,r),h=t.slice(e,n),f=0;f<l;++f)if(u[f]!==h[f]){s=u[f],a=h[f];break}return s<a?-1:a<s?1:0},o.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},o.prototype.indexOf=function(t,e,n){return w(this,t,e,n,!0)},o.prototype.lastIndexOf=function(t,e,n){return w(this,t,e,n,!1)},o.prototype.write=function(t,e,n,i){if(void 0===e)i="utf8",n=this.length,e=0;else if(void 0===n&&"string"==typeof e)i=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(n)?(n>>>=0,void 0===i&&(i="utf8")):(i=n,n=void 0)}var r=this.length-e;if((void 0===n||n>r)&&(n=r),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");i||(i="utf8");for(var o=!1;;)switch(i){case"hex":return v(this,t,e,n);case"utf8":case"utf-8":return x(this,t,e,n);case"ascii":case"latin1":case"binary":return S(this,t,e,n);case"base64":return O(this,t,e,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,t,e,n);default:if(o)throw new TypeError("Unknown encoding: "+i);i=(""+i).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var N=4096;function B(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(127&t[r]);return i}function T(t,e,n){var i="";n=Math.min(t.length,n);for(var r=e;r<n;++r)i+=String.fromCharCode(t[r]);return i}function U(t,e,n){var i=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>i)&&(n=i);for(var r="",o=e;o<n;++o)r+=Z[t[o]];return r}function j(t,e,n){for(var i=t.slice(e,n),r="",o=0;o<i.length-1;o+=2)r+=String.fromCharCode(i[o]+256*i[o+1]);return r}function I(t,e,n){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>n)throw new RangeError("Trying to access beyond buffer length")}function R(t,e,n,i,r,s){if(!o.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>r||e<s)throw new RangeError('"value" argument is out of bounds');if(n+i>t.length)throw new RangeError("Index out of range")}function D(t,e,n,i,r,o){if(n+i>t.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function L(t,e,n,i,r){return e=+e,n>>>=0,r||D(t,0,n,4),g(t,e,n,i,23,4),n+4}function P(t,e,n,i,r){return e=+e,n>>>=0,r||D(t,0,n,8),g(t,e,n,i,52,8),n+8}o.prototype.slice=function(t,e){var n=this.length;(t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var i=this.subarray(t,e);return Object.setPrototypeOf(i,o.prototype),i},o.prototype.readUintLE=o.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i},o.prototype.readUintBE=o.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var i=this[t+--e],r=1;e>0&&(r*=256);)i+=this[t+--e]*r;return i},o.prototype.readUint8=o.prototype.readUInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),this[t]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]|this[t+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(t,e){return t>>>=0,e||I(t,2,this.length),this[t]<<8|this[t+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},o.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var i=this[t],r=1,o=0;++o<e&&(r*=256);)i+=this[t+o]*r;return i>=(r*=128)&&(i-=Math.pow(2,8*e)),i},o.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||I(t,e,this.length);for(var i=e,r=1,o=this[t+--i];i>0&&(r*=256);)o+=this[t+--i]*r;return o>=(r*=128)&&(o-=Math.pow(2,8*e)),o},o.prototype.readInt8=function(t,e){return t>>>=0,e||I(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},o.prototype.readInt16LE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(t,e){t>>>=0,e||I(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},o.prototype.readInt32BE=function(t,e){return t>>>=0,e||I(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},o.prototype.readFloatLE=function(t,e){return t>>>=0,e||I(t,4,this.length),y(this,t,!0,23,4)},o.prototype.readFloatBE=function(t,e){return t>>>=0,e||I(t,4,this.length),y(this,t,!1,23,4)},o.prototype.readDoubleLE=function(t,e){return t>>>=0,e||I(t,8,this.length),y(this,t,!0,52,8)},o.prototype.readDoubleBE=function(t,e){return t>>>=0,e||I(t,8,this.length),y(this,t,!1,52,8)},o.prototype.writeUintLE=o.prototype.writeUIntLE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=1,o=0;for(this[e]=255&t;++o<n&&(r*=256);)this[e+o]=t/r&255;return e+n},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(t,e,n,i){t=+t,e>>>=0,n>>>=0,i||R(this,t,e,n,Math.pow(2,8*n)-1,0);var r=n-1,o=1;for(this[e+r]=255&t;--r>=0&&(o*=256);)this[e+r]=t/o&255;return e+n},o.prototype.writeUint8=o.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,255,0),this[e]=255&t,e+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeIntLE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=0,s=1,a=0;for(this[e]=255&t;++o<n&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeIntBE=function(t,e,n,i){if(t=+t,e>>>=0,!i){var r=Math.pow(2,8*n-1);R(this,t,e,n,r-1,-r)}var o=n-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+n},o.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},o.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},o.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},o.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},o.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||R(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},o.prototype.writeFloatLE=function(t,e,n){return L(this,t,e,!0,n)},o.prototype.writeFloatBE=function(t,e,n){return L(this,t,e,!1,n)},o.prototype.writeDoubleLE=function(t,e,n){return P(this,t,e,!0,n)},o.prototype.writeDoubleBE=function(t,e,n){return P(this,t,e,!1,n)},o.prototype.copy=function(t,e,n,i){if(!o.isBuffer(t))throw new TypeError("argument should be a Buffer");if(n||(n=0),i||0===i||(i=this.length),e>=t.length&&(e=t.length),e||(e=0),i>0&&i<n&&(i=n),i===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("sourceEnd out of bounds");i>this.length&&(i=this.length),t.length-e<i-n&&(i=t.length-e+n);var r=i-n;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,n,i):Uint8Array.prototype.set.call(t,this.subarray(n,i),e),r},o.prototype.fill=function(t,e,n,i){if("string"==typeof t){if("string"==typeof e?(i=e,e=0,n=this.length):"string"==typeof n&&(i=n,n=this.length),void 0!==i&&"string"!=typeof i)throw new TypeError("encoding must be a string");if("string"==typeof i&&!o.isEncoding(i))throw new TypeError("Unknown encoding: "+i);if(1===t.length){var r=t.charCodeAt(0);("utf8"===i&&r<128||"latin1"===i)&&(t=r)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<n)throw new RangeError("Out of range index");if(n<=e)return this;var s;if(e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0),"number"==typeof t)for(s=e;s<n;++s)this[s]=t;else{var a=o.isBuffer(t)?t:o.from(t,i),l=a.length;if(0===l)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(s=0;s<n-e;++s)this[s+e]=a[s%l]}return this};var M=/[^+/0-9A-Za-z-_]/g;function z(t,e){var n;e=e||1/0;for(var i=t.length,r=null,o=[],s=0;s<i;++s){if((n=t.charCodeAt(s))>55295&&n<57344){if(!r){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===i){(e-=3)>-1&&o.push(239,191,189);continue}r=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),r=n;continue}n=65536+(r-55296<<10|n-56320)}else r&&(e-=3)>-1&&o.push(239,191,189);if(r=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function $(t){return d(function(t){if((t=(t=t.split("=")[0]).trim().replace(M,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function C(t,e,n,i){for(var r=0;r<i&&!(r+n>=e.length||r>=t.length);++r)e[r+n]=t[r];return r}function F(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function K(t){return t!=t}var Z=function(){for(var t="0123456789abcdef",e=new Array(256),n=0;n<16;++n)for(var i=16*n,r=0;r<16;++r)e[i+r]=t[n]+t[r];return e}()},f(c={exports:{}},c.exports),c.exports),b=_.Buffer;_.SlowBuffer,_.INSPECT_MAX_BYTES,_.kMaxLength;var w=function(t,e){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},w(t,e)};function m(t,e){function n(){this.constructor=t}w(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var v=function(){return v=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},v.apply(this,arguments)},x=function(t){function e(n){var i=t.call(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return m(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONError"},enumerable:!1,configurable:!0}),e}(Error),S=function(t){function e(n){var i=t.call(this,n)||this;return Object.setPrototypeOf(i,e.prototype),i}return m(e,t),Object.defineProperty(e.prototype,"name",{get:function(){return"BSONTypeError"},enumerable:!1,configurable:!0}),e}(TypeError);function O(t){return t&&t.Math==Math&&t}function k(){return O("object"==typeof globalThis&&globalThis)||O("object"==typeof window&&window)||O("object"==typeof self&&self)||O("object"==typeof n.g&&n.g)||Function("return this")()}function E(t){return t.toString().replace("function(","function (")}var A=function(t){var e,n="object"==typeof(e=k()).navigator&&"ReactNative"===e.navigator.product?"BSON: For React Native please polyfill crypto.getRandomValues, e.g. using: https://www.npmjs.com/package/react-native-get-random-values.":"BSON: No cryptographic implementation for random bytes present, falling back to a less secure implementation.";console.warn(n);for(var i=b.alloc(t),r=0;r<t;++r)i[r]=Math.floor(256*Math.random());return i},N=function(){if("undefined"!=typeof window){var t=window.crypto||window.msCrypto;if(t&&t.getRandomValues)return function(e){return t.getRandomValues(b.alloc(e))}}return void 0!==n.g&&n.g.crypto&&n.g.crypto.getRandomValues?function(t){return n.g.crypto.getRandomValues(b.alloc(t))}:A}();function B(t){return["[object ArrayBuffer]","[object SharedArrayBuffer]"].includes(Object.prototype.toString.call(t))}function T(t){return"[object Uint8Array]"===Object.prototype.toString.call(t)}function U(t){return"[object BigInt64Array]"===Object.prototype.toString.call(t)}function j(t){return"[object BigUint64Array]"===Object.prototype.toString.call(t)}function I(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function R(t){return D(t)&&"[object Date]"===Object.prototype.toString.call(t)}function D(t){return"object"==typeof t&&null!==t}function L(t,e){var n=!1;return function(){for(var i=[],r=0;r<arguments.length;r++)i[r]=arguments[r];return n||(console.warn(e),n=!0),t.apply(this,i)}}function P(t){if(ArrayBuffer.isView(t))return b.from(t.buffer,t.byteOffset,t.byteLength);if(B(t))return b.from(t);throw new S("Must use either Buffer or TypedArray")}var M=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|[0-9a-f]{12}4[0-9a-f]{3}[89ab][0-9a-f]{15})$/i,z=function(t){return"string"==typeof t&&M.test(t)},$=function(t){if(!z(t))throw new S('UUID string representations must be a 32 or 36 character hex string (dashes excluded/included). Format: "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx" or "xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx".');var e=t.replace(/-/g,"");return b.from(e,"hex")},C=function(t,e){return void 0===e&&(e=!0),e?t.toString("hex",0,4)+"-"+t.toString("hex",4,6)+"-"+t.toString("hex",6,8)+"-"+t.toString("hex",8,10)+"-"+t.toString("hex",10,16):t.toString("hex")},F=Symbol("id"),K=function(){function t(e){if(void 0===e)this.id=t.generate();else if(e instanceof t)this[F]=b.from(e.id),this.__id=e.__id;else if(ArrayBuffer.isView(e)&&16===e.byteLength)this.id=P(e);else{if("string"!=typeof e)throw new S("Argument passed in UUID constructor must be a UUID, a 16 byte Buffer or a 32/36 character hex string (dashes excluded/included, format: xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx).");this.id=$(e)}}return Object.defineProperty(t.prototype,"id",{get:function(){return this[F]},set:function(e){this[F]=e,t.cacheHexString&&(this.__id=C(e))},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(e){if(void 0===e&&(e=!0),t.cacheHexString&&this.__id)return this.__id;var n=C(this.id,e);return t.cacheHexString&&(this.__id=n),n},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(!e)return!1;if(e instanceof t)return e.id.equals(this.id);try{return new t(e).id.equals(this.id)}catch(t){return!1}},t.prototype.toBinary=function(){return new Z(this.id,Z.SUBTYPE_UUID)},t.generate=function(){var t=N(16);return t[6]=15&t[6]|64,t[8]=63&t[8]|128,b.from(t)},t.isValid=function(e){if(!e)return!1;if(e instanceof t)return!0;if("string"==typeof e)return z(e);if(T(e)){if(16!==e.length)return!1;try{return parseInt(e[6].toString(16)[0],10)===Z.SUBTYPE_UUID}catch(t){return!1}}return!1},t.createFromHexString=function(e){return new t($(e))},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new UUID("'.concat(this.toHexString(),'")')},t}();Object.defineProperty(K.prototype,"_bsontype",{value:"UUID"});var Z=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(!(null==e||"string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||Array.isArray(e)))throw new S("Binary can only be constructed from string, Buffer, TypedArray, or Array<number>");this.sub_type=null!=n?n:t.BSON_BINARY_SUBTYPE_DEFAULT,null==e?(this.buffer=b.alloc(t.BUFFER_SIZE),this.position=0):("string"==typeof e?this.buffer=b.from(e,"binary"):Array.isArray(e)?this.buffer=b.from(e):this.buffer=P(e),this.position=this.buffer.byteLength)}return t.prototype.put=function(e){if("string"==typeof e&&1!==e.length)throw new S("only accepts single character String");if("number"!=typeof e&&1!==e.length)throw new S("only accepts single character Uint8Array or Array");var n;if((n="string"==typeof e?e.charCodeAt(0):"number"==typeof e?e:e[0])<0||n>255)throw new S("only accepts number in a valid unsigned byte range 0-255");if(this.buffer.length>this.position)this.buffer[this.position++]=n;else{var i=b.alloc(t.BUFFER_SIZE+this.buffer.length);this.buffer.copy(i,0,0,this.buffer.length),this.buffer=i,this.buffer[this.position++]=n}},t.prototype.write=function(t,e){if(e="number"==typeof e?e:this.position,this.buffer.length<e+t.length){var n=b.alloc(this.buffer.length+t.length);this.buffer.copy(n,0,0,this.buffer.length),this.buffer=n}ArrayBuffer.isView(t)?(this.buffer.set(P(t),e),this.position=e+t.byteLength>this.position?e+t.length:this.position):"string"==typeof t&&(this.buffer.write(t,e,t.length,"binary"),this.position=e+t.length>this.position?e+t.length:this.position)},t.prototype.read=function(t,e){return e=e&&e>0?e:this.position,this.buffer.slice(t,t+e)},t.prototype.value=function(t){return(t=!!t)&&this.buffer.length===this.position?this.buffer:t?this.buffer.slice(0,this.position):this.buffer.toString("binary",0,this.position)},t.prototype.length=function(){return this.position},t.prototype.toJSON=function(){return this.buffer.toString("base64")},t.prototype.toString=function(t){return this.buffer.toString(t)},t.prototype.toExtendedJSON=function(t){t=t||{};var e=this.buffer.toString("base64"),n=Number(this.sub_type).toString(16);return t.legacy?{$binary:e,$type:1===n.length?"0"+n:n}:{$binary:{base64:e,subType:1===n.length?"0"+n:n}}},t.prototype.toUUID=function(){if(this.sub_type===t.SUBTYPE_UUID)return new K(this.buffer.slice(0,this.position));throw new x('Binary sub_type "'.concat(this.sub_type,'" is not supported for converting to UUID. Only "').concat(t.SUBTYPE_UUID,'" is currently supported.'))},t.fromExtendedJSON=function(e,n){var i,r;if(n=n||{},"$binary"in e?n.legacy&&"string"==typeof e.$binary&&"$type"in e?(r=e.$type?parseInt(e.$type,16):0,i=b.from(e.$binary,"base64")):"string"!=typeof e.$binary&&(r=e.$binary.subType?parseInt(e.$binary.subType,16):0,i=b.from(e.$binary.base64,"base64")):"$uuid"in e&&(r=4,i=$(e.$uuid)),!i)throw new S("Unexpected Binary Extended JSON format ".concat(JSON.stringify(e)));return new t(i,r)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.value(!0);return'new Binary(Buffer.from("'.concat(t.toString("hex"),'", "hex"), ').concat(this.sub_type,")")},t.BSON_BINARY_SUBTYPE_DEFAULT=0,t.BUFFER_SIZE=256,t.SUBTYPE_DEFAULT=0,t.SUBTYPE_FUNCTION=1,t.SUBTYPE_BYTE_ARRAY=2,t.SUBTYPE_UUID_OLD=3,t.SUBTYPE_UUID=4,t.SUBTYPE_MD5=5,t.SUBTYPE_ENCRYPTED=6,t.SUBTYPE_COLUMN=7,t.SUBTYPE_USER_DEFINED=128,t}();Object.defineProperty(Z.prototype,"_bsontype",{value:"Binary"});var Y=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);this.code=e,this.scope=n}return t.prototype.toJSON=function(){return{code:this.code,scope:this.scope}},t.prototype.toExtendedJSON=function(){return this.scope?{$code:this.code,$scope:this.scope}:{$code:this.code}},t.fromExtendedJSON=function(e){return new t(e.$code,e.$scope)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toJSON();return'new Code("'.concat(String(t.code),'"').concat(t.scope?", ".concat(JSON.stringify(t.scope)):"",")")},t}();function J(t){return D(t)&&null!=t.$id&&"string"==typeof t.$ref&&(null==t.$db||"string"==typeof t.$db)}Object.defineProperty(Y.prototype,"_bsontype",{value:"Code"});var H=function(){function t(e,n,i,r){if(!(this instanceof t))return new t(e,n,i,r);var o=e.split(".");2===o.length&&(i=o.shift(),e=o.shift()),this.collection=e,this.oid=n,this.db=i,this.fields=r||{}}return Object.defineProperty(t.prototype,"namespace",{get:function(){return this.collection},set:function(t){this.collection=t},enumerable:!1,configurable:!0}),t.prototype.toJSON=function(){var t=Object.assign({$ref:this.collection,$id:this.oid},this.fields);return null!=this.db&&(t.$db=this.db),t},t.prototype.toExtendedJSON=function(t){t=t||{};var e={$ref:this.collection,$id:this.oid};return t.legacy?e:(this.db&&(e.$db=this.db),e=Object.assign(e,this.fields))},t.fromExtendedJSON=function(e){var n=Object.assign({},e);return delete n.$ref,delete n.$id,delete n.$db,new t(e.$ref,e.$id,e.$db,n)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=void 0===this.oid||void 0===this.oid.toString?this.oid:this.oid.toString();return'new DBRef("'.concat(this.namespace,'", new ObjectId("').concat(String(t),'")').concat(this.db?', "'.concat(this.db,'"'):"",")")},t}();Object.defineProperty(H.prototype,"_bsontype",{value:"DBRef"});var V=void 0;try{V=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch(t){}var q=4294967296,X=0x10000000000000000,W=X/2,G={},Q={},tt=function(){function t(e,n,i){if(void 0===e&&(e=0),!(this instanceof t))return new t(e,n,i);"bigint"==typeof e?Object.assign(this,t.fromBigInt(e,!!n)):"string"==typeof e?Object.assign(this,t.fromString(e,!!n)):(this.low=0|e,this.high=0|n,this.unsigned=!!i),Object.defineProperty(this,"__isLong__",{value:!0,configurable:!1,writable:!1,enumerable:!1})}return t.fromBits=function(e,n,i){return new t(e,n,i)},t.fromInt=function(e,n){var i,r,o;return n?(o=0<=(e>>>=0)&&e<256)&&(r=Q[e])?r:(i=t.fromBits(e,(0|e)<0?-1:0,!0),o&&(Q[e]=i),i):(o=-128<=(e|=0)&&e<128)&&(r=G[e])?r:(i=t.fromBits(e,e<0?-1:0,!1),o&&(G[e]=i),i)},t.fromNumber=function(e,n){if(isNaN(e))return n?t.UZERO:t.ZERO;if(n){if(e<0)return t.UZERO;if(e>=X)return t.MAX_UNSIGNED_VALUE}else{if(e<=-W)return t.MIN_VALUE;if(e+1>=W)return t.MAX_VALUE}return e<0?t.fromNumber(-e,n).neg():t.fromBits(e%q|0,e/q|0,n)},t.fromBigInt=function(e,n){return t.fromString(e.toString(),n)},t.fromString=function(e,n,i){if(0===e.length)throw Error("empty string");if("NaN"===e||"Infinity"===e||"+Infinity"===e||"-Infinity"===e)return t.ZERO;if("number"==typeof n?(i=n,n=!1):n=!!n,(i=i||10)<2||36<i)throw RangeError("radix");var r;if((r=e.indexOf("-"))>0)throw Error("interior hyphen");if(0===r)return t.fromString(e.substring(1),n,i).neg();for(var o=t.fromNumber(Math.pow(i,8)),s=t.ZERO,a=0;a<e.length;a+=8){var l=Math.min(8,e.length-a),u=parseInt(e.substring(a,a+l),i);if(l<8){var h=t.fromNumber(Math.pow(i,l));s=s.mul(h).add(t.fromNumber(u))}else s=(s=s.mul(o)).add(t.fromNumber(u))}return s.unsigned=n,s},t.fromBytes=function(e,n,i){return i?t.fromBytesLE(e,n):t.fromBytesBE(e,n)},t.fromBytesLE=function(e,n){return new t(e[0]|e[1]<<8|e[2]<<16|e[3]<<24,e[4]|e[5]<<8|e[6]<<16|e[7]<<24,n)},t.fromBytesBE=function(e,n){return new t(e[4]<<24|e[5]<<16|e[6]<<8|e[7],e[0]<<24|e[1]<<16|e[2]<<8|e[3],n)},t.isLong=function(t){return D(t)&&!0===t.__isLong__},t.fromValue=function(e,n){return"number"==typeof e?t.fromNumber(e,n):"string"==typeof e?t.fromString(e,n):t.fromBits(e.low,e.high,"boolean"==typeof n?n:e.unsigned)},t.prototype.add=function(e){t.isLong(e)||(e=t.fromValue(e));var n=this.high>>>16,i=65535&this.high,r=this.low>>>16,o=65535&this.low,s=e.high>>>16,a=65535&e.high,l=e.low>>>16,u=0,h=0,f=0,c=0;return f+=(c+=o+(65535&e.low))>>>16,c&=65535,h+=(f+=r+l)>>>16,f&=65535,u+=(h+=i+a)>>>16,h&=65535,u+=n+s,u&=65535,t.fromBits(f<<16|c,u<<16|h,this.unsigned)},t.prototype.and=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low&e.low,this.high&e.high,this.unsigned)},t.prototype.compare=function(e){if(t.isLong(e)||(e=t.fromValue(e)),this.eq(e))return 0;var n=this.isNegative(),i=e.isNegative();return n&&!i?-1:!n&&i?1:this.unsigned?e.high>>>0>this.high>>>0||e.high===this.high&&e.low>>>0>this.low>>>0?-1:1:this.sub(e).isNegative()?-1:1},t.prototype.comp=function(t){return this.compare(t)},t.prototype.divide=function(e){if(t.isLong(e)||(e=t.fromValue(e)),e.isZero())throw Error("division by zero");if(V){if(!this.unsigned&&-2147483648===this.high&&-1===e.low&&-1===e.high)return this;var n=(this.unsigned?V.div_u:V.div_s)(this.low,this.high,e.low,e.high);return t.fromBits(n,V.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?t.UZERO:t.ZERO;var i,r,o;if(this.unsigned){if(e.unsigned||(e=e.toUnsigned()),e.gt(this))return t.UZERO;if(e.gt(this.shru(1)))return t.UONE;o=t.UZERO}else{if(this.eq(t.MIN_VALUE))return e.eq(t.ONE)||e.eq(t.NEG_ONE)?t.MIN_VALUE:e.eq(t.MIN_VALUE)?t.ONE:(i=this.shr(1).div(e).shl(1)).eq(t.ZERO)?e.isNegative()?t.ONE:t.NEG_ONE:(r=this.sub(e.mul(i)),o=i.add(r.div(e)));if(e.eq(t.MIN_VALUE))return this.unsigned?t.UZERO:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().div(e.neg()):this.neg().div(e).neg();if(e.isNegative())return this.div(e.neg()).neg();o=t.ZERO}for(r=this;r.gte(e);){i=Math.max(1,Math.floor(r.toNumber()/e.toNumber()));for(var s=Math.ceil(Math.log(i)/Math.LN2),a=s<=48?1:Math.pow(2,s-48),l=t.fromNumber(i),u=l.mul(e);u.isNegative()||u.gt(r);)i-=a,u=(l=t.fromNumber(i,this.unsigned)).mul(e);l.isZero()&&(l=t.ONE),o=o.add(l),r=r.sub(u)}return o},t.prototype.div=function(t){return this.divide(t)},t.prototype.equals=function(e){return t.isLong(e)||(e=t.fromValue(e)),(this.unsigned===e.unsigned||this.high>>>31!=1||e.high>>>31!=1)&&this.high===e.high&&this.low===e.low},t.prototype.eq=function(t){return this.equals(t)},t.prototype.getHighBits=function(){return this.high},t.prototype.getHighBitsUnsigned=function(){return this.high>>>0},t.prototype.getLowBits=function(){return this.low},t.prototype.getLowBitsUnsigned=function(){return this.low>>>0},t.prototype.getNumBitsAbs=function(){if(this.isNegative())return this.eq(t.MIN_VALUE)?64:this.neg().getNumBitsAbs();var e,n=0!==this.high?this.high:this.low;for(e=31;e>0&&0==(n&1<<e);e--);return 0!==this.high?e+33:e+1},t.prototype.greaterThan=function(t){return this.comp(t)>0},t.prototype.gt=function(t){return this.greaterThan(t)},t.prototype.greaterThanOrEqual=function(t){return this.comp(t)>=0},t.prototype.gte=function(t){return this.greaterThanOrEqual(t)},t.prototype.ge=function(t){return this.greaterThanOrEqual(t)},t.prototype.isEven=function(){return 0==(1&this.low)},t.prototype.isNegative=function(){return!this.unsigned&&this.high<0},t.prototype.isOdd=function(){return 1==(1&this.low)},t.prototype.isPositive=function(){return this.unsigned||this.high>=0},t.prototype.isZero=function(){return 0===this.high&&0===this.low},t.prototype.lessThan=function(t){return this.comp(t)<0},t.prototype.lt=function(t){return this.lessThan(t)},t.prototype.lessThanOrEqual=function(t){return this.comp(t)<=0},t.prototype.lte=function(t){return this.lessThanOrEqual(t)},t.prototype.modulo=function(e){if(t.isLong(e)||(e=t.fromValue(e)),V){var n=(this.unsigned?V.rem_u:V.rem_s)(this.low,this.high,e.low,e.high);return t.fromBits(n,V.get_high(),this.unsigned)}return this.sub(this.div(e).mul(e))},t.prototype.mod=function(t){return this.modulo(t)},t.prototype.rem=function(t){return this.modulo(t)},t.prototype.multiply=function(e){if(this.isZero())return t.ZERO;if(t.isLong(e)||(e=t.fromValue(e)),V){var n=V.mul(this.low,this.high,e.low,e.high);return t.fromBits(n,V.get_high(),this.unsigned)}if(e.isZero())return t.ZERO;if(this.eq(t.MIN_VALUE))return e.isOdd()?t.MIN_VALUE:t.ZERO;if(e.eq(t.MIN_VALUE))return this.isOdd()?t.MIN_VALUE:t.ZERO;if(this.isNegative())return e.isNegative()?this.neg().mul(e.neg()):this.neg().mul(e).neg();if(e.isNegative())return this.mul(e.neg()).neg();if(this.lt(t.TWO_PWR_24)&&e.lt(t.TWO_PWR_24))return t.fromNumber(this.toNumber()*e.toNumber(),this.unsigned);var i=this.high>>>16,r=65535&this.high,o=this.low>>>16,s=65535&this.low,a=e.high>>>16,l=65535&e.high,u=e.low>>>16,h=65535&e.low,f=0,c=0,d=0,p=0;return d+=(p+=s*h)>>>16,p&=65535,c+=(d+=o*h)>>>16,d&=65535,c+=(d+=s*u)>>>16,d&=65535,f+=(c+=r*h)>>>16,c&=65535,f+=(c+=o*u)>>>16,c&=65535,f+=(c+=s*l)>>>16,c&=65535,f+=i*h+r*u+o*l+s*a,f&=65535,t.fromBits(d<<16|p,f<<16|c,this.unsigned)},t.prototype.mul=function(t){return this.multiply(t)},t.prototype.negate=function(){return!this.unsigned&&this.eq(t.MIN_VALUE)?t.MIN_VALUE:this.not().add(t.ONE)},t.prototype.neg=function(){return this.negate()},t.prototype.not=function(){return t.fromBits(~this.low,~this.high,this.unsigned)},t.prototype.notEquals=function(t){return!this.equals(t)},t.prototype.neq=function(t){return this.notEquals(t)},t.prototype.ne=function(t){return this.notEquals(t)},t.prototype.or=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low|e.low,this.high|e.high,this.unsigned)},t.prototype.shiftLeft=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low<<e,this.high<<e|this.low>>>32-e,this.unsigned):t.fromBits(0,this.low<<e-32,this.unsigned)},t.prototype.shl=function(t){return this.shiftLeft(t)},t.prototype.shiftRight=function(e){return t.isLong(e)&&(e=e.toInt()),0==(e&=63)?this:e<32?t.fromBits(this.low>>>e|this.high<<32-e,this.high>>e,this.unsigned):t.fromBits(this.high>>e-32,this.high>=0?0:-1,this.unsigned)},t.prototype.shr=function(t){return this.shiftRight(t)},t.prototype.shiftRightUnsigned=function(e){if(t.isLong(e)&&(e=e.toInt()),0==(e&=63))return this;var n=this.high;if(e<32){var i=this.low;return t.fromBits(i>>>e|n<<32-e,n>>>e,this.unsigned)}return 32===e?t.fromBits(n,0,this.unsigned):t.fromBits(n>>>e-32,0,this.unsigned)},t.prototype.shr_u=function(t){return this.shiftRightUnsigned(t)},t.prototype.shru=function(t){return this.shiftRightUnsigned(t)},t.prototype.subtract=function(e){return t.isLong(e)||(e=t.fromValue(e)),this.add(e.neg())},t.prototype.sub=function(t){return this.subtract(t)},t.prototype.toInt=function(){return this.unsigned?this.low>>>0:this.low},t.prototype.toNumber=function(){return this.unsigned?(this.high>>>0)*q+(this.low>>>0):this.high*q+(this.low>>>0)},t.prototype.toBigInt=function(){return BigInt(this.toString())},t.prototype.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},t.prototype.toBytesLE=function(){var t=this.high,e=this.low;return[255&e,e>>>8&255,e>>>16&255,e>>>24,255&t,t>>>8&255,t>>>16&255,t>>>24]},t.prototype.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,255&t,e>>>24,e>>>16&255,e>>>8&255,255&e]},t.prototype.toSigned=function(){return this.unsigned?t.fromBits(this.low,this.high,!1):this},t.prototype.toString=function(e){if((e=e||10)<2||36<e)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative()){if(this.eq(t.MIN_VALUE)){var n=t.fromNumber(e),i=this.div(n),r=i.mul(n).sub(this);return i.toString(e)+r.toInt().toString(e)}return"-"+this.neg().toString(e)}for(var o=t.fromNumber(Math.pow(e,6),this.unsigned),s=this,a="";;){var l=s.div(o),u=(s.sub(l.mul(o)).toInt()>>>0).toString(e);if((s=l).isZero())return u+a;for(;u.length<6;)u="0"+u;a=""+u+a}},t.prototype.toUnsigned=function(){return this.unsigned?this:t.fromBits(this.low,this.high,!0)},t.prototype.xor=function(e){return t.isLong(e)||(e=t.fromValue(e)),t.fromBits(this.low^e.low,this.high^e.high,this.unsigned)},t.prototype.eqz=function(){return this.isZero()},t.prototype.le=function(t){return this.lessThanOrEqual(t)},t.prototype.toExtendedJSON=function(t){return t&&t.relaxed?this.toNumber():{$numberLong:this.toString()}},t.fromExtendedJSON=function(e,n){var i=t.fromString(e.$numberLong);return n&&n.relaxed?i.toNumber():i},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Long("'.concat(this.toString(),'"').concat(this.unsigned?", true":"",")")},t.TWO_PWR_24=t.fromInt(16777216),t.MAX_UNSIGNED_VALUE=t.fromBits(-1,-1,!0),t.ZERO=t.fromInt(0),t.UZERO=t.fromInt(0,!0),t.ONE=t.fromInt(1),t.UONE=t.fromInt(1,!0),t.NEG_ONE=t.fromInt(-1),t.MAX_VALUE=t.fromBits(-1,2147483647,!1),t.MIN_VALUE=t.fromBits(0,-2147483648,!1),t}();Object.defineProperty(tt.prototype,"__isLong__",{value:!0}),Object.defineProperty(tt.prototype,"_bsontype",{value:"Long"});var et=/^(\+|-)?(\d+|(\d*\.\d*))?(E|e)?([-+])?(\d+)?$/,nt=/^(\+|-)?(Infinity|inf)$/i,it=/^(\+|-)?NaN$/i,rt=6111,ot=-6176,st=[124,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),at=[248,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),lt=[120,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0].reverse(),ut=/^([-+])?(\d+)?$/;function ht(t){return!isNaN(parseInt(t,10))}function ft(t){var e=tt.fromNumber(1e9),n=tt.fromNumber(0);if(!(t.parts[0]||t.parts[1]||t.parts[2]||t.parts[3]))return{quotient:t,rem:n};for(var i=0;i<=3;i++)n=(n=n.shiftLeft(32)).add(new tt(t.parts[i],0)),t.parts[i]=n.div(e).low,n=n.modulo(e);return{quotient:t,rem:n}}function ct(t,e){throw new S('"'.concat(t,'" is not a valid Decimal128 string - ').concat(e))}var dt=function(){function t(e){if(!(this instanceof t))return new t(e);if("string"==typeof e)this.bytes=t.fromString(e).bytes;else{if(!T(e))throw new S("Decimal128 must take a Buffer or string");if(16!==e.byteLength)throw new S("Decimal128 must take a Buffer of 16 bytes");this.bytes=e}}return t.fromString=function(e){var n,i=!1,r=!1,o=!1,s=0,a=0,l=0,u=0,h=0,f=[0],c=0,d=0,p=0,y=0,g=0,_=0,w=new tt(0,0),m=new tt(0,0),v=0;if(e.length>=7e3)throw new S(e+" not a valid Decimal128 string");var x=e.match(et),O=e.match(nt),k=e.match(it);if(!x&&!O&&!k||0===e.length)throw new S(e+" not a valid Decimal128 string");if(x){var E=x[2],A=x[4],N=x[5],B=x[6];A&&void 0===B&&ct(e,"missing exponent power"),A&&void 0===E&&ct(e,"missing exponent base"),void 0===A&&(N||B)&&ct(e,"missing e before exponent")}if("+"!==e[v]&&"-"!==e[v]||(i="-"===e[v++]),!ht(e[v])&&"."!==e[v]){if("i"===e[v]||"I"===e[v])return new t(b.from(i?at:lt));if("N"===e[v])return new t(b.from(st))}for(;ht(e[v])||"."===e[v];)"."!==e[v]?(c<34&&("0"!==e[v]||o)&&(o||(h=a),o=!0,f[d++]=parseInt(e[v],10),c+=1),o&&(l+=1),r&&(u+=1),a+=1,v+=1):(r&&ct(e,"contains multiple periods"),r=!0,v+=1);if(r&&!a)throw new S(e+" not a valid Decimal128 string");if("e"===e[v]||"E"===e[v]){var T=e.substr(++v).match(ut);if(!T||!T[2])return new t(b.from(st));g=parseInt(T[0],10),v+=T[0].length}if(e[v])return new t(b.from(st));if(p=0,c){if(y=c-1,1!==(s=l))for(;0===f[h+s-1];)s-=1}else p=0,y=0,f[0]=0,l=1,c=1,s=0;for(g<=u&&u-g>16384?g=ot:g-=u;g>rt;){if((y+=1)-p>34){if(f.join("").match(/^0+$/)){g=rt;break}ct(e,"overflow")}g-=1}for(;g<ot||c<l;){if(0===y&&s<c){g=ot,s=0;break}if(c<l?l-=1:y-=1,g<rt)g+=1;else{if(f.join("").match(/^0+$/)){g=rt;break}ct(e,"overflow")}}if(y-p+1<s){var U=a;r&&(h+=1,U+=1),i&&(h+=1,U+=1);var j=parseInt(e[h+y+1],10),I=0;if(j>=5&&(I=1,5===j))for(I=f[y]%2==1?1:0,_=h+y+2;_<U;_++)if(parseInt(e[_],10)){I=1;break}if(I)for(var R=y;R>=0;R--)if(++f[R]>9&&(f[R]=0,0===R)){if(!(g<rt))return new t(b.from(i?at:lt));g+=1,f[R]=1}}if(w=tt.fromNumber(0),m=tt.fromNumber(0),0===s)w=tt.fromNumber(0),m=tt.fromNumber(0);else if(y-p<17)for(R=p,m=tt.fromNumber(f[R++]),w=new tt(0,0);R<=y;R++)m=(m=m.multiply(tt.fromNumber(10))).add(tt.fromNumber(f[R]));else{for(R=p,w=tt.fromNumber(f[R++]);R<=y-17;R++)w=(w=w.multiply(tt.fromNumber(10))).add(tt.fromNumber(f[R]));for(m=tt.fromNumber(f[R++]);R<=y;R++)m=(m=m.multiply(tt.fromNumber(10))).add(tt.fromNumber(f[R]))}var D,L,P,M,z=function(t,e){if(!t&&!e)return{high:tt.fromNumber(0),low:tt.fromNumber(0)};var n=t.shiftRightUnsigned(32),i=new tt(t.getLowBits(),0),r=e.shiftRightUnsigned(32),o=new tt(e.getLowBits(),0),s=n.multiply(r),a=n.multiply(o),l=i.multiply(r),u=i.multiply(o);return s=s.add(a.shiftRightUnsigned(32)),a=new tt(a.getLowBits(),0).add(l).add(u.shiftRightUnsigned(32)),{high:s=s.add(a.shiftRightUnsigned(32)),low:u=a.shiftLeft(32).add(new tt(u.getLowBits(),0))}}(w,tt.fromString("100000000000000000"));z.low=z.low.add(m),L=m,((P=(D=z.low).high>>>0)<(M=L.high>>>0)||P===M&&D.low>>>0<L.low>>>0)&&(z.high=z.high.add(tt.fromNumber(1))),n=g+6176;var $={low:tt.fromNumber(0),high:tt.fromNumber(0)};z.high.shiftRightUnsigned(49).and(tt.fromNumber(1)).equals(tt.fromNumber(1))?($.high=$.high.or(tt.fromNumber(3).shiftLeft(61)),$.high=$.high.or(tt.fromNumber(n).and(tt.fromNumber(16383).shiftLeft(47))),$.high=$.high.or(z.high.and(tt.fromNumber(0x7fffffffffff)))):($.high=$.high.or(tt.fromNumber(16383&n).shiftLeft(49)),$.high=$.high.or(z.high.and(tt.fromNumber(562949953421311)))),$.low=z.low,i&&($.high=$.high.or(tt.fromString("9223372036854775808")));var C=b.alloc(16);return v=0,C[v++]=255&$.low.low,C[v++]=$.low.low>>8&255,C[v++]=$.low.low>>16&255,C[v++]=$.low.low>>24&255,C[v++]=255&$.low.high,C[v++]=$.low.high>>8&255,C[v++]=$.low.high>>16&255,C[v++]=$.low.high>>24&255,C[v++]=255&$.high.low,C[v++]=$.high.low>>8&255,C[v++]=$.high.low>>16&255,C[v++]=$.high.low>>24&255,C[v++]=255&$.high.high,C[v++]=$.high.high>>8&255,C[v++]=$.high.high>>16&255,C[v++]=$.high.high>>24&255,new t(C)},t.prototype.toString=function(){for(var t,e=0,n=new Array(36),i=0;i<n.length;i++)n[i]=0;var r,o,s,a=0,l=!1,u={parts:[0,0,0,0]},h=[];a=0;var f=this.bytes,c=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24,d=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24,p=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24,y=f[a++]|f[a++]<<8|f[a++]<<16|f[a++]<<24;a=0,(new tt(c,d),new tt(p,y)).lessThan(tt.ZERO)&&h.push("-");var g=y>>26&31;if(g>>3==3){if(30===g)return h.join("")+"Infinity";if(31===g)return"NaN";t=y>>15&16383,r=8+(y>>14&1)}else r=y>>14&7,t=y>>17&16383;var _=t-6176;if(u.parts[0]=(16383&y)+((15&r)<<14),u.parts[1]=p,u.parts[2]=d,u.parts[3]=c,0===u.parts[0]&&0===u.parts[1]&&0===u.parts[2]&&0===u.parts[3])l=!0;else for(s=3;s>=0;s--){var b=0,w=ft(u);if(u=w.quotient,b=w.rem.low)for(o=8;o>=0;o--)n[9*s+o]=b%10,b=Math.floor(b/10)}if(l)e=1,n[a]=0;else for(e=36;!n[a];)e-=1,a+=1;var m=e-1+_;if(m>=34||m<=-7||_>0){if(e>34)return h.push("".concat(0)),_>0?h.push("E+".concat(_)):_<0&&h.push("E".concat(_)),h.join("");for(h.push("".concat(n[a++])),(e-=1)&&h.push("."),i=0;i<e;i++)h.push("".concat(n[a++]));h.push("E"),m>0?h.push("+".concat(m)):h.push("".concat(m))}else if(_>=0)for(i=0;i<e;i++)h.push("".concat(n[a++]));else{var v=e+_;if(v>0)for(i=0;i<v;i++)h.push("".concat(n[a++]));else h.push("0");for(h.push(".");v++<0;)h.push("0");for(i=0;i<e-Math.max(v-1,0);i++)h.push("".concat(n[a++]))}return h.join("")},t.prototype.toJSON=function(){return{$numberDecimal:this.toString()}},t.prototype.toExtendedJSON=function(){return{$numberDecimal:this.toString()}},t.fromExtendedJSON=function(e){return t.fromString(e.$numberDecimal)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new Decimal128("'.concat(this.toString(),'")')},t}();Object.defineProperty(dt.prototype,"_bsontype",{value:"Decimal128"});var pt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toJSON=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toExtendedJSON=function(t){return t&&(t.legacy||t.relaxed&&isFinite(this.value))?this.value:Object.is(Math.sign(this.value),-0)?{$numberDouble:"-".concat(this.value.toFixed(1))}:(Number.isInteger(this.value)?(e=this.value.toFixed(1)).length>=13&&(e=this.value.toExponential(13).toUpperCase()):e=this.value.toString(),{$numberDouble:e});var e},t.fromExtendedJSON=function(e,n){var i=parseFloat(e.$numberDouble);return n&&n.relaxed?i:new t(i)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){var t=this.toExtendedJSON();return"new Double(".concat(t.$numberDouble,")")},t}();Object.defineProperty(pt.prototype,"_bsontype",{value:"Double"});var yt=function(){function t(e){if(!(this instanceof t))return new t(e);e instanceof Number&&(e=e.valueOf()),this.value=0|+e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(t){return this.value.toString(t)},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(t){return t&&(t.relaxed||t.legacy)?this.value:{$numberInt:this.value.toString()}},t.fromExtendedJSON=function(e,n){return n&&n.relaxed?parseInt(e.$numberInt,10):new t(e.$numberInt)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new Int32(".concat(this.valueOf(),")")},t}();Object.defineProperty(yt.prototype,"_bsontype",{value:"Int32"});var gt=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$maxKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MaxKey()"},t}();Object.defineProperty(gt.prototype,"_bsontype",{value:"MaxKey"});var _t=function(){function t(){if(!(this instanceof t))return new t}return t.prototype.toExtendedJSON=function(){return{$minKey:1}},t.fromExtendedJSON=function(){return new t},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return"new MinKey()"},t}();Object.defineProperty(_t.prototype,"_bsontype",{value:"MinKey"});var bt=new RegExp("^[0-9a-fA-F]{24}$"),wt=null,mt=Symbol("id"),vt=function(){function t(e){if(!(this instanceof t))return new t(e);var n;if("object"==typeof e&&e&&"id"in e){if("string"!=typeof e.id&&!ArrayBuffer.isView(e.id))throw new S("Argument passed in must have an id that is of type string or Buffer");n="toHexString"in e&&"function"==typeof e.toHexString?b.from(e.toHexString(),"hex"):e.id}else n=e;if(null==n||"number"==typeof n)this[mt]=t.generate("number"==typeof n?n:void 0);else if(ArrayBuffer.isView(n)&&12===n.byteLength)this[mt]=n instanceof b?n:P(n);else{if("string"!=typeof n)throw new S("Argument passed in does not match the accepted types");if(12===n.length){var i=b.from(n);if(12!==i.byteLength)throw new S("Argument passed in must be a string of 12 bytes");this[mt]=i}else{if(24!==n.length||!bt.test(n))throw new S("Argument passed in must be a string of 12 bytes or a string of 24 hex characters or an integer");this[mt]=b.from(n,"hex")}}t.cacheHexString&&(this.__id=this.id.toString("hex"))}return Object.defineProperty(t.prototype,"id",{get:function(){return this[mt]},set:function(e){this[mt]=e,t.cacheHexString&&(this.__id=e.toString("hex"))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"generationTime",{get:function(){return this.id.readInt32BE(0)},set:function(t){this.id.writeUInt32BE(t,0)},enumerable:!1,configurable:!0}),t.prototype.toHexString=function(){if(t.cacheHexString&&this.__id)return this.__id;var e=this.id.toString("hex");return t.cacheHexString&&!this.__id&&(this.__id=e),e},t.getInc=function(){return t.index=(t.index+1)%16777215},t.generate=function(e){"number"!=typeof e&&(e=Math.floor(Date.now()/1e3));var n=t.getInc(),i=b.alloc(12);return i.writeUInt32BE(e,0),null===wt&&(wt=N(5)),i[4]=wt[0],i[5]=wt[1],i[6]=wt[2],i[7]=wt[3],i[8]=wt[4],i[11]=255&n,i[10]=n>>8&255,i[9]=n>>16&255,i},t.prototype.toString=function(t){return t?this.id.toString(t):this.toHexString()},t.prototype.toJSON=function(){return this.toHexString()},t.prototype.equals=function(e){if(null==e)return!1;if(e instanceof t)return this[mt][11]===e[mt][11]&&this[mt].equals(e[mt]);if("string"==typeof e&&t.isValid(e)&&12===e.length&&T(this.id))return e===b.prototype.toString.call(this.id,"latin1");if("string"==typeof e&&t.isValid(e)&&24===e.length)return e.toLowerCase()===this.toHexString();if("string"==typeof e&&t.isValid(e)&&12===e.length)return b.from(e).equals(this.id);if("object"==typeof e&&"toHexString"in e&&"function"==typeof e.toHexString){var n=e.toHexString(),i=this.toHexString().toLowerCase();return"string"==typeof n&&n.toLowerCase()===i}return!1},t.prototype.getTimestamp=function(){var t=new Date,e=this.id.readUInt32BE(0);return t.setTime(1e3*Math.floor(e)),t},t.createPk=function(){return new t},t.createFromTime=function(e){var n=b.from([0,0,0,0,0,0,0,0,0,0,0,0]);return n.writeUInt32BE(e,0),new t(n)},t.createFromHexString=function(e){if(void 0===e||null!=e&&24!==e.length)throw new S("Argument passed in must be a single String of 12 bytes or a string of 24 hex characters");return new t(b.from(e,"hex"))},t.isValid=function(e){if(null==e)return!1;try{return new t(e),!0}catch(t){return!1}},t.prototype.toExtendedJSON=function(){return this.toHexString?{$oid:this.toHexString()}:{$oid:this.toString("hex")}},t.fromExtendedJSON=function(e){return new t(e.$oid)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t.prototype.inspect=function(){return'new ObjectId("'.concat(this.toHexString(),'")')},t.index=Math.floor(16777215*Math.random()),t}();Object.defineProperty(vt.prototype,"generate",{value:L((function(t){return vt.generate(t)}),"Please use the static `ObjectId.generate(time)` instead")}),Object.defineProperty(vt.prototype,"getInc",{value:L((function(){return vt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(vt.prototype,"get_inc",{value:L((function(){return vt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(vt,"get_inc",{value:L((function(){return vt.getInc()}),"Please use the static `ObjectId.getInc()` instead")}),Object.defineProperty(vt.prototype,"_bsontype",{value:"ObjectID"});var xt=function(){function t(e,n){if(!(this instanceof t))return new t(e,n);if(this.pattern=e,this.options=(null!=n?n:"").split("").sort().join(""),-1!==this.pattern.indexOf("\0"))throw new x("BSON Regex patterns cannot contain null bytes, found: ".concat(JSON.stringify(this.pattern)));if(-1!==this.options.indexOf("\0"))throw new x("BSON Regex options cannot contain null bytes, found: ".concat(JSON.stringify(this.options)));for(var i=0;i<this.options.length;i++)if("i"!==this.options[i]&&"m"!==this.options[i]&&"x"!==this.options[i]&&"l"!==this.options[i]&&"s"!==this.options[i]&&"u"!==this.options[i])throw new x("The regular expression option [".concat(this.options[i],"] is not supported"))}return t.parseOptions=function(t){return t?t.split("").sort().join(""):""},t.prototype.toExtendedJSON=function(t){return(t=t||{}).legacy?{$regex:this.pattern,$options:this.options}:{$regularExpression:{pattern:this.pattern,options:this.options}}},t.fromExtendedJSON=function(e){if("$regex"in e){if("string"==typeof e.$regex)return new t(e.$regex,t.parseOptions(e.$options));if("BSONRegExp"===e.$regex._bsontype)return e}if("$regularExpression"in e)return new t(e.$regularExpression.pattern,t.parseOptions(e.$regularExpression.options));throw new S("Unexpected BSONRegExp EJSON object form: ".concat(JSON.stringify(e)))},t}();Object.defineProperty(xt.prototype,"_bsontype",{value:"BSONRegExp"});var St=function(){function t(e){if(!(this instanceof t))return new t(e);this.value=e}return t.prototype.valueOf=function(){return this.value},t.prototype.toString=function(){return this.value},t.prototype.inspect=function(){return'new BSONSymbol("'.concat(this.value,'")')},t.prototype.toJSON=function(){return this.value},t.prototype.toExtendedJSON=function(){return{$symbol:this.value}},t.fromExtendedJSON=function(e){return new t(e.$symbol)},t.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},t}();Object.defineProperty(St.prototype,"_bsontype",{value:"Symbol"});var Ot=tt,kt=function(t){function e(n,i){var r=this;return r instanceof e?(r=tt.isLong(n)?t.call(this,n.low,n.high,!0)||this:D(n)&&void 0!==n.t&&void 0!==n.i?t.call(this,n.i,n.t,!0)||this:t.call(this,n,i,!0)||this,Object.defineProperty(r,"_bsontype",{value:"Timestamp",writable:!1,configurable:!1,enumerable:!1}),r):new e(n,i)}return m(e,t),e.prototype.toJSON=function(){return{$timestamp:this.toString()}},e.fromInt=function(t){return new e(tt.fromInt(t,!0))},e.fromNumber=function(t){return new e(tt.fromNumber(t,!0))},e.fromBits=function(t,n){return new e(t,n)},e.fromString=function(t,n){return new e(tt.fromString(t,!0,n))},e.prototype.toExtendedJSON=function(){return{$timestamp:{t:this.high>>>0,i:this.low>>>0}}},e.fromExtendedJSON=function(t){return new e(t.$timestamp)},e.prototype[Symbol.for("nodejs.util.inspect.custom")]=function(){return this.inspect()},e.prototype.inspect=function(){return"new Timestamp({ t: ".concat(this.getHighBits(),", i: ").concat(this.getLowBits()," })")},e.MAX_VALUE=tt.MAX_UNSIGNED_VALUE,e}(Ot);function Et(t){return D(t)&&Reflect.has(t,"_bsontype")&&"string"==typeof t._bsontype}var At=2147483647,Nt=-2147483648,Bt=0x8000000000000000,Tt=-0x8000000000000000,Ut={$oid:vt,$binary:Z,$uuid:Z,$symbol:St,$numberInt:yt,$numberDecimal:dt,$numberDouble:pt,$numberLong:tt,$minKey:_t,$maxKey:gt,$regex:xt,$regularExpression:xt,$timestamp:kt};function jt(t,e){if(void 0===e&&(e={}),"number"==typeof t){if(e.relaxed||e.legacy)return t;if(Math.floor(t)===t){if(t>=Nt&&t<=At)return new yt(t);if(t>=Tt&&t<=Bt)return tt.fromNumber(t)}return new pt(t)}if(null==t||"object"!=typeof t)return t;if(t.$undefined)return null;for(var n=Object.keys(t).filter((function(e){return e.startsWith("$")&&null!=t[e]})),i=0;i<n.length;i++){var r=Ut[n[i]];if(r)return r.fromExtendedJSON(t,e)}if(null!=t.$date){var o=t.$date,s=new Date;return e.legacy?"number"==typeof o?s.setTime(o):"string"==typeof o&&s.setTime(Date.parse(o)):"string"==typeof o?s.setTime(Date.parse(o)):tt.isLong(o)?s.setTime(o.toNumber()):"number"==typeof o&&e.relaxed&&s.setTime(o),s}if(null!=t.$code){var a=Object.assign({},t);return t.$scope&&(a.$scope=jt(t.$scope)),Y.fromExtendedJSON(t)}if(J(t)||t.$dbPointer){var l=t.$ref?t:t.$dbPointer;if(l instanceof H)return l;var u=Object.keys(l).filter((function(t){return t.startsWith("$")})),h=!0;if(u.forEach((function(t){-1===["$ref","$id","$db"].indexOf(t)&&(h=!1)})),h)return H.fromExtendedJSON(l)}return t}function It(t){var e=t.toISOString();return 0!==t.getUTCMilliseconds()?e:e.slice(0,-5)+"Z"}function Rt(t,e){if(("object"==typeof t||"function"==typeof t)&&null!==t){var n=e.seenObjects.findIndex((function(e){return e.obj===t}));if(-1!==n){var i=e.seenObjects.map((function(t){return t.propertyName})),r=i.slice(0,n).map((function(t){return"".concat(t," -> ")})).join(""),o=i[n],s=" -> "+i.slice(n+1,i.length-1).map((function(t){return"".concat(t," -> ")})).join(""),a=i[i.length-1],l=" ".repeat(r.length+o.length/2),u="-".repeat(s.length+(o.length+a.length)/2-1);throw new S("Converting circular structure to EJSON:\n"+"    ".concat(r).concat(o).concat(s).concat(a,"\n")+"    ".concat(l,"\\").concat(u,"/"))}e.seenObjects[e.seenObjects.length-1].obj=t}if(Array.isArray(t))return function(t,e){return t.map((function(t,n){e.seenObjects.push({propertyName:"index ".concat(n),obj:null});try{return Rt(t,e)}finally{e.seenObjects.pop()}}))}(t,e);if(void 0===t)return null;if(t instanceof Date||R(t)){var h=t.getTime(),f=h>-1&&h<2534023188e5;return e.legacy?e.relaxed&&f?{$date:t.getTime()}:{$date:It(t)}:e.relaxed&&f?{$date:It(t)}:{$date:{$numberLong:t.getTime().toString()}}}if(!("number"!=typeof t||e.relaxed&&isFinite(t))){if(Math.floor(t)===t){var c=t>=Tt&&t<=Bt;if(t>=Nt&&t<=At)return{$numberInt:t.toString()};if(c)return{$numberLong:t.toString()}}return{$numberDouble:t.toString()}}if(t instanceof RegExp||I(t)){var d=t.flags;if(void 0===d){var p=t.toString().match(/[gimuy]*$/);p&&(d=p[0])}return new xt(t.source,d).toExtendedJSON(e)}return null!=t&&"object"==typeof t?function(t,e){if(null==t||"object"!=typeof t)throw new x("not an object instance");var n=t._bsontype;if(void 0===n){var i={};for(var r in t){e.seenObjects.push({propertyName:r,obj:null});try{var o=Rt(t[r],e);"__proto__"===r?Object.defineProperty(i,r,{value:o,writable:!0,enumerable:!0,configurable:!0}):i[r]=o}finally{e.seenObjects.pop()}}return i}if(Et(t)){var s=t;if("function"!=typeof s.toExtendedJSON){var a=Pt[t._bsontype];if(!a)throw new S("Unrecognized or invalid _bsontype: "+t._bsontype);s=a(s)}return"Code"===n&&s.scope?s=new Y(s.code,Rt(s.scope,e)):"DBRef"===n&&s.oid&&(s=new H(Rt(s.collection,e),Rt(s.oid,e),Rt(s.db,e),Rt(s.fields,e))),s.toExtendedJSON(e)}throw new x("_bsontype must be a string, but was: "+typeof n)}(t,e):t}var Dt,Lt,Pt={Binary:function(t){return new Z(t.value(),t.sub_type)},Code:function(t){return new Y(t.code,t.scope)},DBRef:function(t){return new H(t.collection||t.namespace,t.oid,t.db,t.fields)},Decimal128:function(t){return new dt(t.bytes)},Double:function(t){return new pt(t.value)},Int32:function(t){return new yt(t.value)},Long:function(t){return tt.fromBits(null!=t.low?t.low:t.low_,null!=t.low?t.high:t.high_,null!=t.low?t.unsigned:t.unsigned_)},MaxKey:function(){return new gt},MinKey:function(){return new _t},ObjectID:function(t){return new vt(t)},ObjectId:function(t){return new vt(t)},BSONRegExp:function(t){return new xt(t.pattern,t.options)},Symbol:function(t){return new St(t.value)},Timestamp:function(t){return kt.fromBits(t.low,t.high)}};!function(t){function e(t,e){var n=Object.assign({},{relaxed:!0,legacy:!1},e);return"boolean"==typeof n.relaxed&&(n.strict=!n.relaxed),"boolean"==typeof n.strict&&(n.relaxed=!n.strict),JSON.parse(t,(function(t,e){if(-1!==t.indexOf("\0"))throw new x("BSON Document field names cannot contain null bytes, found: ".concat(JSON.stringify(t)));return jt(e,n)}))}function n(t,e,n,i){null!=n&&"object"==typeof n&&(i=n,n=0),null==e||"object"!=typeof e||Array.isArray(e)||(i=e,e=void 0,n=0);var r=Rt(t,Object.assign({relaxed:!0,legacy:!1},i,{seenObjects:[{propertyName:"(root)",obj:null}]}));return JSON.stringify(r,e,n)}t.parse=e,t.stringify=n,t.serialize=function(t,e){return e=e||{},JSON.parse(n(t,e))},t.deserialize=function(t,n){return n=n||{},e(JSON.stringify(t),n)}}(Dt||(Dt={}));var Mt=k();Lt=Mt.Map?Mt.Map:function(){function t(t){void 0===t&&(t=[]),this._keys=[],this._values={};for(var e=0;e<t.length;e++)if(null!=t[e]){var n=t[e],i=n[0],r=n[1];this._keys.push(i),this._values[i]={v:r,i:this._keys.length-1}}}return t.prototype.clear=function(){this._keys=[],this._values={}},t.prototype.delete=function(t){var e=this._values[t];return null!=e&&(delete this._values[t],this._keys.splice(e.i,1),!0)},t.prototype.entries=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?[n,t._values[n].v]:void 0,done:void 0===n}}}},t.prototype.forEach=function(t,e){e=e||this;for(var n=0;n<this._keys.length;n++){var i=this._keys[n];t.call(e,this._values[i].v,i,e)}},t.prototype.get=function(t){return this._values[t]?this._values[t].v:void 0},t.prototype.has=function(t){return null!=this._values[t]},t.prototype.keys=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?n:void 0,done:void 0===n}}}},t.prototype.set=function(t,e){return this._values[t]?(this._values[t].v=e,this):(this._keys.push(t),this._values[t]={v:e,i:this._keys.length-1},this)},t.prototype.values=function(){var t=this,e=0;return{next:function(){var n=t._keys[e++];return{value:void 0!==n?t._values[n].v:void 0,done:void 0===n}}}},Object.defineProperty(t.prototype,"size",{get:function(){return this._keys.length},enumerable:!1,configurable:!0}),t}();var zt=2147483647,$t=-2147483648,Ct=Math.pow(2,63)-1,Ft=-Math.pow(2,63),Kt=Math.pow(2,53),Zt=-Math.pow(2,53),Yt=1,Jt=2,Ht=3,Vt=4,qt=5,Xt=6,Wt=7,Gt=8,Qt=9,te=10,ee=11,ne=12,ie=13,re=14,oe=15,se=16,ae=17,le=18,ue=19,he=255,fe=127,ce=0,de=1,pe=2,ye=3,ge=4,_e=5,be=6,we=7,me=128;function ve(t,e,n){var i=5;if(Array.isArray(t))for(var r=0;r<t.length;r++)i+=xe(r.toString(),t[r],e,!0,n);else for(var o in"function"==typeof(null==t?void 0:t.toBSON)&&(t=t.toBSON()),t)i+=xe(o,t[o],e,!1,n);return i}function xe(t,e,n,i,r){switch(void 0===n&&(n=!1),void 0===i&&(i=!1),void 0===r&&(r=!1),"function"==typeof(null==e?void 0:e.toBSON)&&(e=e.toBSON()),typeof e){case"string":return 1+b.byteLength(t,"utf8")+1+4+b.byteLength(e,"utf8")+1;case"number":return Math.floor(e)===e&&e>=Zt&&e<=Kt&&e>=$t&&e<=zt?(null!=t?b.byteLength(t,"utf8")+1:0)+5:(null!=t?b.byteLength(t,"utf8")+1:0)+9;case"undefined":return i||!r?(null!=t?b.byteLength(t,"utf8")+1:0)+1:0;case"boolean":return(null!=t?b.byteLength(t,"utf8")+1:0)+2;case"object":if(null==e||"MinKey"===e._bsontype||"MaxKey"===e._bsontype)return(null!=t?b.byteLength(t,"utf8")+1:0)+1;if("ObjectId"===e._bsontype||"ObjectID"===e._bsontype)return(null!=t?b.byteLength(t,"utf8")+1:0)+13;if(e instanceof Date||R(e))return(null!=t?b.byteLength(t,"utf8")+1:0)+9;if(ArrayBuffer.isView(e)||e instanceof ArrayBuffer||B(e))return(null!=t?b.byteLength(t,"utf8")+1:0)+6+e.byteLength;if("Long"===e._bsontype||"Double"===e._bsontype||"Timestamp"===e._bsontype)return(null!=t?b.byteLength(t,"utf8")+1:0)+9;if("Decimal128"===e._bsontype)return(null!=t?b.byteLength(t,"utf8")+1:0)+17;if("Code"===e._bsontype)return null!=e.scope&&Object.keys(e.scope).length>0?(null!=t?b.byteLength(t,"utf8")+1:0)+1+4+4+b.byteLength(e.code.toString(),"utf8")+1+ve(e.scope,n,r):(null!=t?b.byteLength(t,"utf8")+1:0)+1+4+b.byteLength(e.code.toString(),"utf8")+1;if("Binary"===e._bsontype){var o=e;return o.sub_type===Z.SUBTYPE_BYTE_ARRAY?(null!=t?b.byteLength(t,"utf8")+1:0)+(o.position+1+4+1+4):(null!=t?b.byteLength(t,"utf8")+1:0)+(o.position+1+4+1)}if("Symbol"===e._bsontype)return(null!=t?b.byteLength(t,"utf8")+1:0)+b.byteLength(e.value,"utf8")+4+1+1;if("DBRef"===e._bsontype){var s=Object.assign({$ref:e.collection,$id:e.oid},e.fields);return null!=e.db&&(s.$db=e.db),(null!=t?b.byteLength(t,"utf8")+1:0)+1+ve(s,n,r)}return e instanceof RegExp||I(e)?(null!=t?b.byteLength(t,"utf8")+1:0)+1+b.byteLength(e.source,"utf8")+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1:"BSONRegExp"===e._bsontype?(null!=t?b.byteLength(t,"utf8")+1:0)+1+b.byteLength(e.pattern,"utf8")+1+b.byteLength(e.options,"utf8")+1:(null!=t?b.byteLength(t,"utf8")+1:0)+ve(e,n,r)+1;case"function":if(e instanceof RegExp||I(e)||"[object RegExp]"===String.call(e))return(null!=t?b.byteLength(t,"utf8")+1:0)+1+b.byteLength(e.source,"utf8")+1+(e.global?1:0)+(e.ignoreCase?1:0)+(e.multiline?1:0)+1;if(n&&null!=e.scope&&Object.keys(e.scope).length>0)return(null!=t?b.byteLength(t,"utf8")+1:0)+1+4+4+b.byteLength(E(e),"utf8")+1+ve(e.scope,n,r);if(n)return(null!=t?b.byteLength(t,"utf8")+1:0)+1+4+b.byteLength(E(e),"utf8")+1}return 0}function Se(t,e,n){for(var i=0,r=e;r<n;r+=1){var o=t[r];if(i){if(128!=(192&o))return!1;i-=1}else if(128&o)if(192==(224&o))i=1;else if(224==(240&o))i=2;else{if(240!=(248&o))return!1;i=3}}return!i}var Oe=tt.fromNumber(Kt),ke=tt.fromNumber(Zt),Ee={};function Ae(t,e,n){var i=(e=null==e?{}:e)&&e.index?e.index:0,r=t[i]|t[i+1]<<8|t[i+2]<<16|t[i+3]<<24;if(r<5)throw new x("bson size must be >= 5, is ".concat(r));if(e.allowObjectSmallerThanBufferSize&&t.length<r)throw new x("buffer length ".concat(t.length," must be >= bson size ").concat(r));if(!e.allowObjectSmallerThanBufferSize&&t.length!==r)throw new x("buffer length ".concat(t.length," must === bson size ").concat(r));if(r+i>t.byteLength)throw new x("(bson size ".concat(r," + options.index ").concat(i," must be <= buffer length ").concat(t.byteLength,")"));if(0!==t[i+r-1])throw new x("One object, sized correctly, with a spot for an EOO, but the EOO isn't 0x00");return Be(t,i,e,n)}var Ne=/^\$ref$|^\$id$|^\$db$/;function Be(t,e,n,i){void 0===i&&(i=!1);var r,o=null!=n.evalFunctions&&n.evalFunctions,s=null!=n.cacheFunctions&&n.cacheFunctions,a=null==n.fieldsAsRaw?null:n.fieldsAsRaw,l=null!=n.raw&&n.raw,u="boolean"==typeof n.bsonRegExp&&n.bsonRegExp,h=null!=n.promoteBuffers&&n.promoteBuffers,f=null==n.promoteLongs||n.promoteLongs,c=null==n.promoteValues||n.promoteValues,d=null==n.validation?{utf8:!0}:n.validation,p=!0,y=new Set,g=d.utf8;if("boolean"==typeof g)r=g;else{p=!1;var _=Object.keys(g).map((function(t){return g[t]}));if(0===_.length)throw new x("UTF-8 validation setting cannot be empty");if("boolean"!=typeof _[0])throw new x("Invalid UTF-8 validation option, must specify boolean values");if(r=_[0],!_.every((function(t){return t===r})))throw new x("Invalid UTF-8 validation option - keys must be all true or all false")}if(!p)for(var w=0,m=Object.keys(g);w<m.length;w++){var S=m[w];y.add(S)}var O=e;if(t.length<5)throw new x("corrupt bson message < 5 bytes long");var k=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;if(k<5||k>t.length)throw new x("corrupt bson message");for(var E=i?[]:{},A=0,N=!i&&null,B=new DataView(t.buffer,t.byteOffset,t.byteLength);;){var T=t[e++];if(0===T)break;for(var U=e;0!==t[U]&&U<t.length;)U++;if(U>=t.byteLength)throw new x("Bad BSON Document: illegal CString");var j,I=i?A++:t.toString("utf8",e,U);j=p||y.has(I)?r:!r,!1!==N&&"$"===I[0]&&(N=Ne.test(I));var R=void 0;if(e=U+1,T===Jt){if((ut=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||ut>t.length-e||0!==t[e+ut-1])throw new x("bad string length in bson");R=Ue(t,e,e+ut-1,j),e+=ut}else if(T===Wt){var D=b.alloc(12);t.copy(D,0,e,e+12),R=new vt(D),e+=12}else if(T===se&&!1===c)R=new yt(t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24);else if(T===se)R=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;else if(T===Yt&&!1===c)R=new pt(B.getFloat64(e,!0)),e+=8;else if(T===Yt)R=B.getFloat64(e,!0),e+=8;else if(T===Qt){var L=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,P=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;R=new Date(new tt(L,P).toNumber())}else if(T===Gt){if(0!==t[e]&&1!==t[e])throw new x("illegal boolean type value");R=1===t[e++]}else if(T===Ht){var M=e;if((at=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)<=0||at>t.length-e)throw new x("bad embedded document length in bson");if(l)R=t.slice(e,e+at);else{var z=n;p||(z=v(v({},n),{validation:{utf8:j}})),R=Be(t,M,z,!1)}e+=at}else if(T===Vt){M=e;var $=n,C=e+(at=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24);if(a&&a[I]){for(var F in $={},n)$[F]=n[F];$.raw=!0}if(p||($=v(v({},$),{validation:{utf8:j}})),R=Be(t,M,$,!0),0!==t[(e+=at)-1])throw new x("invalid array terminator byte");if(e!==C)throw new x("corrupted array bson")}else if(T===Xt)R=void 0;else if(T===te)R=null;else if(T===le){L=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,P=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;var K=new tt(L,P);R=f&&!0===c&&K.lessThanOrEqual(Oe)&&K.greaterThanOrEqual(ke)?K.toNumber():K}else if(T===ue){var V=b.alloc(16);t.copy(V,0,e,e+16),e+=16;var q=new dt(V);R="toObject"in q&&"function"==typeof q.toObject?q.toObject():q}else if(T===qt){var X=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,W=X,G=t[e++];if(X<0)throw new x("Negative binary type element size found");if(X>t.byteLength)throw new x("Binary type size larger than document size");if(null!=t.slice){if(G===Z.SUBTYPE_BYTE_ARRAY){if((X=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<0)throw new x("Negative binary type element size found for subtype 0x02");if(X>W-4)throw new x("Binary type with subtype 0x02 contains too long binary size");if(X<W-4)throw new x("Binary type with subtype 0x02 contains too short binary size")}R=h&&c?t.slice(e,e+X):new Z(t.slice(e,e+X),G)}else{var Q=b.alloc(X);if(G===Z.SUBTYPE_BYTE_ARRAY){if((X=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<0)throw new x("Negative binary type element size found for subtype 0x02");if(X>W-4)throw new x("Binary type with subtype 0x02 contains too long binary size");if(X<W-4)throw new x("Binary type with subtype 0x02 contains too short binary size")}for(U=0;U<X;U++)Q[U]=t[e+U];R=h&&c?Q:new Z(Q,G)}e+=X}else if(T===ee&&!1===u){for(U=e;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new x("Bad BSON Document: illegal CString");var et=t.toString("utf8",e,U);for(U=e=U+1;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new x("Bad BSON Document: illegal CString");var nt=t.toString("utf8",e,U);e=U+1;var it=new Array(nt.length);for(U=0;U<nt.length;U++)switch(nt[U]){case"m":it[U]="m";break;case"s":it[U]="g";break;case"i":it[U]="i"}R=new RegExp(et,it.join(""))}else if(T===ee&&!0===u){for(U=e;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new x("Bad BSON Document: illegal CString");for(et=t.toString("utf8",e,U),U=e=U+1;0!==t[U]&&U<t.length;)U++;if(U>=t.length)throw new x("Bad BSON Document: illegal CString");nt=t.toString("utf8",e,U),e=U+1,R=new xt(et,nt)}else if(T===re){if((ut=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||ut>t.length-e||0!==t[e+ut-1])throw new x("bad string length in bson");var rt=Ue(t,e,e+ut-1,j);R=c?rt:new St(rt),e+=ut}else if(T===ae)L=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,P=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24,R=new kt(L,P);else if(T===he)R=new _t;else if(T===fe)R=new gt;else if(T===ie){if((ut=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||ut>t.length-e||0!==t[e+ut-1])throw new x("bad string length in bson");var ot=Ue(t,e,e+ut-1,j);R=o?s?Te(ot,Ee,E):Te(ot):new Y(ot),e+=ut}else if(T===oe){var st=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24;if(st<13)throw new x("code_w_scope total size shorter minimum expected length");if((ut=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||ut>t.length-e||0!==t[e+ut-1])throw new x("bad string length in bson");ot=Ue(t,e,e+ut-1,j),M=e+=ut;var at=t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24,lt=Be(t,M,n,!1);if(e+=at,st<8+at+ut)throw new x("code_w_scope total size is too short, truncating scope");if(st>8+at+ut)throw new x("code_w_scope total size is too long, clips outer document");o?(R=s?Te(ot,Ee,E):Te(ot)).scope=lt:R=new Y(ot,lt)}else{if(T!==ne)throw new x("Detected unknown BSON type ".concat(T.toString(16),' for fieldname "').concat(I,'"'));var ut;if((ut=t[e++]|t[e++]<<8|t[e++]<<16|t[e++]<<24)<=0||ut>t.length-e||0!==t[e+ut-1])throw new x("bad string length in bson");if(null!=d&&d.utf8&&!Se(t,e,e+ut-1))throw new x("Invalid UTF-8 string in BSON document");var ht=t.toString("utf8",e,e+ut-1);e+=ut;var ft=b.alloc(12);t.copy(ft,0,e,e+12),D=new vt(ft),e+=12,R=new H(ht,D)}"__proto__"===I?Object.defineProperty(E,I,{value:R,writable:!0,enumerable:!0,configurable:!0}):E[I]=R}if(k!==e-O){if(i)throw new x("corrupt array bson");throw new x("corrupt object bson")}if(!N)return E;if(J(E)){var ct=Object.assign({},E);return delete ct.$ref,delete ct.$id,delete ct.$db,new H(E.$ref,E.$id,E.$db,ct)}return E}function Te(t,e,n){return e?(null==e[t]&&(e[t]=new Function(t)),e[t].bind(n)):new Function(t)}function Ue(t,e,n,i){var r=t.toString("utf8",e,n);if(i)for(var o=0;o<r.length;o++)if(65533===r.charCodeAt(o)){if(!Se(t,e,n))throw new x("Invalid UTF-8 string in BSON document");break}return r}var je=/\x00/,Ie=new Set(["$db","$ref","$id","$clusterTime"]);function Re(t,e,n,i,r){t[i++]=Jt;var o=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8");t[(i=i+o+1)-1]=0;var s=t.write(n,i+4,void 0,"utf8");return t[i+3]=s+1>>24&255,t[i+2]=s+1>>16&255,t[i+1]=s+1>>8&255,t[i]=s+1&255,i=i+4+s,t[i++]=0,i}var De=new Uint8Array(8),Le=new DataView(De.buffer,De.byteOffset,De.byteLength);function Pe(t,e,n,i,r){return Number.isInteger(n)&&n>=$t&&n<=zt?(t[i++]=se,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=n>>16&255,t[i++]=n>>24&255):(t[i++]=Yt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,Le.setFloat64(0,n,!0),t.set(De,i),i+=8),i}function Me(t,e,n,i,r){return t[i++]=te,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,i}function ze(t,e,n,i,r){return t[i++]=Gt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,t[i++]=n?1:0,i}function $e(t,e,n,i,r){t[i++]=Qt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var o=tt.fromNumber(n.getTime()),s=o.getLowBits(),a=o.getHighBits();return t[i++]=255&s,t[i++]=s>>8&255,t[i++]=s>>16&255,t[i++]=s>>24&255,t[i++]=255&a,t[i++]=a>>8&255,t[i++]=a>>16&255,t[i++]=a>>24&255,i}function Ce(t,e,n,i,r){if(t[i++]=ee,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,n.source&&null!=n.source.match(je))throw Error("value "+n.source+" must not contain null bytes");return i+=t.write(n.source,i,void 0,"utf8"),t[i++]=0,n.ignoreCase&&(t[i++]=105),n.global&&(t[i++]=115),n.multiline&&(t[i++]=109),t[i++]=0,i}function Fe(t,e,n,i,r){if(t[i++]=ee,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,null!=n.pattern.match(je))throw Error("pattern "+n.pattern+" must not contain null bytes");return i+=t.write(n.pattern,i,void 0,"utf8"),t[i++]=0,i+=t.write(n.options.split("").sort().join(""),i,void 0,"utf8"),t[i++]=0,i}function Ke(t,e,n,i,r){return null===n?t[i++]=te:"MinKey"===n._bsontype?t[i++]=he:t[i++]=fe,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,i}function Ze(t,e,n,i,r){if(t[i++]=Wt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,"string"==typeof n.id)t.write(n.id,i,void 0,"binary");else{if(!T(n.id))throw new S("object ["+JSON.stringify(n)+"] is not a valid ObjectId");t.set(n.id.subarray(0,12),i)}return i+12}function Ye(t,e,n,i,r){t[i++]=qt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var o=n.length;return t[i++]=255&o,t[i++]=o>>8&255,t[i++]=o>>16&255,t[i++]=o>>24&255,t[i++]=ce,t.set(P(n),i),i+o}function Je(t,e,n,i,r,o,s,a,l,u){void 0===r&&(r=!1),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===l&&(l=!1),void 0===u&&(u=[]);for(var h=0;h<u.length;h++)if(u[h]===n)throw new x("cyclic dependency detected");u.push(n),t[i++]=Array.isArray(n)?Vt:Ht,i+=l?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var f=nn(t,n,r,i,o+1,s,a,u);return u.pop(),f}function He(t,e,n,i,r){return t[i++]=ue,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,t.set(n.bytes.subarray(0,16),i),i+16}function Ve(t,e,n,i,r){t[i++]="Long"===n._bsontype?le:ae,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var o=n.getLowBits(),s=n.getHighBits();return t[i++]=255&o,t[i++]=o>>8&255,t[i++]=o>>16&255,t[i++]=o>>24&255,t[i++]=255&s,t[i++]=s>>8&255,t[i++]=s>>16&255,t[i++]=s>>24&255,i}function qe(t,e,n,i,r){return n=n.valueOf(),t[i++]=se,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=n>>16&255,t[i++]=n>>24&255,i}function Xe(t,e,n,i,r){return t[i++]=Yt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,Le.setFloat64(0,n.value,!0),t.set(De,i),i+8}function We(t,e,n,i,r,o,s){t[i++]=ie,i+=s?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var a=E(n),l=t.write(a,i+4,void 0,"utf8")+1;return t[i]=255&l,t[i+1]=l>>8&255,t[i+2]=l>>16&255,t[i+3]=l>>24&255,i=i+4+l-1,t[i++]=0,i}function Ge(t,e,n,i,r,o,s,a,l){if(void 0===r&&(r=!1),void 0===o&&(o=0),void 0===s&&(s=!1),void 0===a&&(a=!0),void 0===l&&(l=!1),n.scope&&"object"==typeof n.scope){t[i++]=oe,i+=l?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var u=i,h="string"==typeof n.code?n.code:n.code.toString();i+=4;var f=t.write(h,i+4,void 0,"utf8")+1;t[i]=255&f,t[i+1]=f>>8&255,t[i+2]=f>>16&255,t[i+3]=f>>24&255,t[i+4+f-1]=0,i=i+f+4;var c=nn(t,n.scope,r,i,o+1,s,a);i=c-1;var d=c-u;t[u++]=255&d,t[u++]=d>>8&255,t[u++]=d>>16&255,t[u++]=d>>24&255,t[i++]=0}else{t[i++]=ie,i+=l?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0,h=n.code.toString();var p=t.write(h,i+4,void 0,"utf8")+1;t[i]=255&p,t[i+1]=p>>8&255,t[i+2]=p>>16&255,t[i+3]=p>>24&255,i=i+4+p-1,t[i++]=0}return i}function Qe(t,e,n,i,r){t[i++]=qt,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var o=n.value(!0),s=n.position;return n.sub_type===Z.SUBTYPE_BYTE_ARRAY&&(s+=4),t[i++]=255&s,t[i++]=s>>8&255,t[i++]=s>>16&255,t[i++]=s>>24&255,t[i++]=n.sub_type,n.sub_type===Z.SUBTYPE_BYTE_ARRAY&&(s-=4,t[i++]=255&s,t[i++]=s>>8&255,t[i++]=s>>16&255,t[i++]=s>>24&255),t.set(o,i),i+n.position}function tn(t,e,n,i,r){t[i++]=re,i+=r?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var o=t.write(n.value,i+4,void 0,"utf8")+1;return t[i]=255&o,t[i+1]=o>>8&255,t[i+2]=o>>16&255,t[i+3]=o>>24&255,i=i+4+o-1,t[i++]=0,i}function en(t,e,n,i,r,o,s){t[i++]=Ht,i+=s?t.write(e,i,void 0,"ascii"):t.write(e,i,void 0,"utf8"),t[i++]=0;var a=i,l={$ref:n.collection||n.namespace,$id:n.oid};null!=n.db&&(l.$db=n.db);var u=nn(t,l=Object.assign(l,n.fields),!1,i,r+1,o),h=u-a;return t[a++]=255&h,t[a++]=h>>8&255,t[a++]=h>>16&255,t[a++]=h>>24&255,u}function nn(t,e,n,i,r,o,s,a){void 0===n&&(n=!1),void 0===i&&(i=0),void 0===r&&(r=0),void 0===o&&(o=!1),void 0===s&&(s=!0),void 0===a&&(a=[]),i=i||0,(a=a||[]).push(e);var l,u=i+4;if(Array.isArray(e))for(var h=0;h<e.length;h++){var f="".concat(h);if("function"==typeof(null==(g=e[h])?void 0:g.toBSON)&&(g=g.toBSON()),"string"==typeof g)u=Re(t,f,g,u,!0);else if("number"==typeof g)u=Pe(t,f,g,u,!0);else{if("bigint"==typeof g)throw new S("Unsupported type BigInt, please use Decimal128");if("boolean"==typeof g)u=ze(t,f,g,u,!0);else if(g instanceof Date||R(g))u=$e(t,f,g,u,!0);else if(void 0===g)u=Me(t,f,0,u,!0);else if(null===g)u=Me(t,f,0,u,!0);else if("ObjectId"===g._bsontype||"ObjectID"===g._bsontype)u=Ze(t,f,g,u,!0);else if(T(g))u=Ye(t,f,g,u,!0);else if(g instanceof RegExp||I(g))u=Ce(t,f,g,u,!0);else if("object"==typeof g&&null==g._bsontype)u=Je(t,f,g,u,n,r,o,s,!0,a);else if("object"==typeof g&&Et(g)&&"Decimal128"===g._bsontype)u=He(t,f,g,u,!0);else if("Long"===g._bsontype||"Timestamp"===g._bsontype)u=Ve(t,f,g,u,!0);else if("Double"===g._bsontype)u=Xe(t,f,g,u,!0);else if("function"==typeof g&&o)u=We(t,f,g,u,0,0,!0);else if("Code"===g._bsontype)u=Ge(t,f,g,u,n,r,o,s,!0);else if("Binary"===g._bsontype)u=Qe(t,f,g,u,!0);else if("Symbol"===g._bsontype)u=tn(t,f,g,u,!0);else if("DBRef"===g._bsontype)u=en(t,f,g,u,r,o,!0);else if("BSONRegExp"===g._bsontype)u=Fe(t,f,g,u,!0);else if("Int32"===g._bsontype)u=qe(t,f,g,u,!0);else if("MinKey"===g._bsontype||"MaxKey"===g._bsontype)u=Ke(t,f,g,u,!0);else if(void 0!==g._bsontype)throw new S("Unrecognized or invalid _bsontype: ".concat(String(g._bsontype)))}}else if(e instanceof Lt||(l=e,"[object Map]"===Object.prototype.toString.call(l)))for(var c=e.entries(),d=!1;!d;){var p=c.next();if(!(d=!!p.done)){f=p.value[0];var y=typeof(g=p.value[1]);if("string"==typeof f&&!Ie.has(f)){if(null!=f.match(je))throw Error("key "+f+" must not contain null bytes");if(n){if("$"===f[0])throw Error("key "+f+" must not start with '$'");if(~f.indexOf("."))throw Error("key "+f+" must not contain '.'")}}if("string"===y)u=Re(t,f,g,u);else if("number"===y)u=Pe(t,f,g,u);else{if("bigint"===y||U(g)||j(g))throw new S("Unsupported type BigInt, please use Decimal128");if("boolean"===y)u=ze(t,f,g,u);else if(g instanceof Date||R(g))u=$e(t,f,g,u);else if(null===g||void 0===g&&!1===s)u=Me(t,f,0,u);else if("ObjectId"===g._bsontype||"ObjectID"===g._bsontype)u=Ze(t,f,g,u);else if(T(g))u=Ye(t,f,g,u);else if(g instanceof RegExp||I(g))u=Ce(t,f,g,u);else if("object"===y&&null==g._bsontype)u=Je(t,f,g,u,n,r,o,s,!1,a);else if("object"===y&&"Decimal128"===g._bsontype)u=He(t,f,g,u);else if("Long"===g._bsontype||"Timestamp"===g._bsontype)u=Ve(t,f,g,u);else if("Double"===g._bsontype)u=Xe(t,f,g,u);else if("Code"===g._bsontype)u=Ge(t,f,g,u,n,r,o,s);else if("function"==typeof g&&o)u=We(t,f,g,u,0,0,o);else if("Binary"===g._bsontype)u=Qe(t,f,g,u);else if("Symbol"===g._bsontype)u=tn(t,f,g,u);else if("DBRef"===g._bsontype)u=en(t,f,g,u,r,o);else if("BSONRegExp"===g._bsontype)u=Fe(t,f,g,u);else if("Int32"===g._bsontype)u=qe(t,f,g,u);else if("MinKey"===g._bsontype||"MaxKey"===g._bsontype)u=Ke(t,f,g,u);else if(void 0!==g._bsontype)throw new S("Unrecognized or invalid _bsontype: ".concat(String(g._bsontype)))}}}else{if("function"==typeof(null==e?void 0:e.toBSON)&&null!=(e=e.toBSON())&&"object"!=typeof e)throw new S("toBSON function did not return an object");for(var f in e){var g;if("function"==typeof(null==(g=e[f])?void 0:g.toBSON)&&(g=g.toBSON()),y=typeof g,"string"==typeof f&&!Ie.has(f)){if(null!=f.match(je))throw Error("key "+f+" must not contain null bytes");if(n){if("$"===f[0])throw Error("key "+f+" must not start with '$'");if(~f.indexOf("."))throw Error("key "+f+" must not contain '.'")}}if("string"===y)u=Re(t,f,g,u);else if("number"===y)u=Pe(t,f,g,u);else{if("bigint"===y)throw new S("Unsupported type BigInt, please use Decimal128");if("boolean"===y)u=ze(t,f,g,u);else if(g instanceof Date||R(g))u=$e(t,f,g,u);else if(void 0===g)!1===s&&(u=Me(t,f,0,u));else if(null===g)u=Me(t,f,0,u);else if("ObjectId"===g._bsontype||"ObjectID"===g._bsontype)u=Ze(t,f,g,u);else if(T(g))u=Ye(t,f,g,u);else if(g instanceof RegExp||I(g))u=Ce(t,f,g,u);else if("object"===y&&null==g._bsontype)u=Je(t,f,g,u,n,r,o,s,!1,a);else if("object"===y&&"Decimal128"===g._bsontype)u=He(t,f,g,u);else if("Long"===g._bsontype||"Timestamp"===g._bsontype)u=Ve(t,f,g,u);else if("Double"===g._bsontype)u=Xe(t,f,g,u);else if("Code"===g._bsontype)u=Ge(t,f,g,u,n,r,o,s);else if("function"==typeof g&&o)u=We(t,f,g,u,0,0,o);else if("Binary"===g._bsontype)u=Qe(t,f,g,u);else if("Symbol"===g._bsontype)u=tn(t,f,g,u);else if("DBRef"===g._bsontype)u=en(t,f,g,u,r,o);else if("BSONRegExp"===g._bsontype)u=Fe(t,f,g,u);else if("Int32"===g._bsontype)u=qe(t,f,g,u);else if("MinKey"===g._bsontype||"MaxKey"===g._bsontype)u=Ke(t,f,g,u);else if(void 0!==g._bsontype)throw new S("Unrecognized or invalid _bsontype: ".concat(String(g._bsontype)))}}}a.pop(),t[u++]=0;var _=u-i;return t[i++]=255&_,t[i++]=_>>8&255,t[i++]=_>>16&255,t[i++]=_>>24&255,u}var rn=17825792,on=b.alloc(rn);function sn(t){on.length<t&&(on=b.alloc(t))}function an(t,e){void 0===e&&(e={});var n="boolean"==typeof e.checkKeys&&e.checkKeys,i="boolean"==typeof e.serializeFunctions&&e.serializeFunctions,r="boolean"!=typeof e.ignoreUndefined||e.ignoreUndefined,o="number"==typeof e.minInternalBufferSize?e.minInternalBufferSize:rn;on.length<o&&(on=b.alloc(o));var s=nn(on,t,n,0,0,i,r,[]),a=b.alloc(s);return on.copy(a,0,0,a.length),a}function ln(t,e,n){void 0===n&&(n={});var i="boolean"==typeof n.checkKeys&&n.checkKeys,r="boolean"==typeof n.serializeFunctions&&n.serializeFunctions,o="boolean"!=typeof n.ignoreUndefined||n.ignoreUndefined,s="number"==typeof n.index?n.index:0,a=nn(on,t,i,0,0,r,o);return on.copy(e,s,0,a),s+a-1}function un(t,e){return void 0===e&&(e={}),Ae(t instanceof b?t:P(t),e)}function hn(t,e){return void 0===e&&(e={}),ve(t,"boolean"==typeof(e=e||{}).serializeFunctions&&e.serializeFunctions,"boolean"!=typeof e.ignoreUndefined||e.ignoreUndefined)}function fn(t,e,n,i,r,o){for(var s=Object.assign({allowObjectSmallerThanBufferSize:!0,index:0},o),a=P(t),l=e,u=0;u<n;u++){var h=a[l]|a[l+1]<<8|a[l+2]<<16|a[l+3]<<24;s.index=l,i[r+u]=Ae(a,s),l+=h}return l}const cn={Binary:Z,Code:Y,DBRef:H,Decimal128:dt,Double:pt,Int32:yt,Long:tt,UUID:K,Map:Lt,MaxKey:gt,MinKey:_t,ObjectId:vt,ObjectID:vt,BSONRegExp:xt,BSONSymbol:St,Timestamp:kt,EJSON:Dt,setInternalBufferSize:sn,serialize:an,serializeWithBufferAndIndex:ln,deserialize:un,calculateObjectSize:hn,deserializeStream:fn,BSONError:x,BSONTypeError:S}},706:t=>{!function(){"use strict";t.exports=function(t){return(t instanceof Buffer?t:Buffer.from(t.toString(),"binary")).toString("base64")}}()},591:(t,e,n)=>{"use strict";const{Deflate:i,deflate:r,deflateRaw:o,gzip:s}=n(555),{Inflate:a,inflate:l,inflateRaw:u,ungzip:h}=n(843),f=n(619);t.exports.Deflate=i,t.exports.deflate=r,t.exports.deflateRaw=o,t.exports.gzip=s,t.exports.Inflate=a,t.exports.inflate=l,t.exports.inflateRaw=u,t.exports.ungzip=h,t.exports.constants=f},555:(t,e,n)=>{"use strict";const i=n(405),r=n(236),o=n(373),s=n(898),a=n(292),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_SYNC_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:c,Z_OK:d,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:y,Z_DEFAULT_STRATEGY:g,Z_DEFLATED:_}=n(619);function b(t){this.options=r.assign({level:y,method:_,chunkSize:16384,windowBits:15,memLevel:8,strategy:g},t||{});let e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=i.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(n!==d)throw new Error(s[n]);if(e.header&&i.deflateSetHeader(this.strm,e.header),e.dictionary){let t;if(t="string"==typeof e.dictionary?o.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,n=i.deflateSetDictionary(this.strm,t),n!==d)throw new Error(s[n]);this._dict_set=!0}}function w(t,e){const n=new b(e);if(n.push(t,!0),n.err)throw n.msg||s[n.err];return n.result}b.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize;let s,a;if(this.ended)return!1;for(a=e===~~e?e:!0===e?c:u,"string"==typeof t?n.input=o.string2buf(t):"[object ArrayBuffer]"===l.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;)if(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),(a===h||a===f)&&n.avail_out<=6)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else{if(s=i.deflate(n,a),s===p)return n.next_out>0&&this.onData(n.output.subarray(0,n.next_out)),s=i.deflateEnd(this.strm),this.onEnd(s),this.ended=!0,s===d;if(0!==n.avail_out){if(a>0&&n.next_out>0)this.onData(n.output.subarray(0,n.next_out)),n.avail_out=0;else if(0===n.avail_in)break}else this.onData(n.output)}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===d&&(this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Deflate=b,t.exports.deflate=w,t.exports.deflateRaw=function(t,e){return(e=e||{}).raw=!0,w(t,e)},t.exports.gzip=function(t,e){return(e=e||{}).gzip=!0,w(t,e)},t.exports.constants=n(619)},843:(t,e,n)=>{"use strict";const i=n(948),r=n(236),o=n(373),s=n(898),a=n(292),l=n(401),u=Object.prototype.toString,{Z_NO_FLUSH:h,Z_FINISH:f,Z_OK:c,Z_STREAM_END:d,Z_NEED_DICT:p,Z_STREAM_ERROR:y,Z_DATA_ERROR:g,Z_MEM_ERROR:_}=n(619);function b(t){this.options=r.assign({chunkSize:65536,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;let n=i.inflateInit2(this.strm,e.windowBits);if(n!==c)throw new Error(s[n]);if(this.header=new l,i.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=o.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=i.inflateSetDictionary(this.strm,e.dictionary),n!==c)))throw new Error(s[n])}function w(t,e){const n=new b(e);if(n.push(t),n.err)throw n.msg||s[n.err];return n.result}b.prototype.push=function(t,e){const n=this.strm,r=this.options.chunkSize,s=this.options.dictionary;let a,l,b;if(this.ended)return!1;for(l=e===~~e?e:!0===e?f:h,"[object ArrayBuffer]"===u.call(t)?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(0===n.avail_out&&(n.output=new Uint8Array(r),n.next_out=0,n.avail_out=r),a=i.inflate(n,l),a===p&&s&&(a=i.inflateSetDictionary(n,s),a===c?a=i.inflate(n,l):a===g&&(a=p));n.avail_in>0&&a===d&&n.state.wrap>0&&0!==t[n.next_in];)i.inflateReset(n),a=i.inflate(n,l);switch(a){case y:case g:case p:case _:return this.onEnd(a),this.ended=!0,!1}if(b=n.avail_out,n.next_out&&(0===n.avail_out||a===d))if("string"===this.options.to){let t=o.utf8border(n.output,n.next_out),e=n.next_out-t,i=o.buf2string(n.output,t);n.next_out=e,n.avail_out=r-e,e&&n.output.set(n.output.subarray(t,t+e),0),this.onData(i)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(a!==c||0!==b){if(a===d)return a=i.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===n.avail_in)break}}return!0},b.prototype.onData=function(t){this.chunks.push(t)},b.prototype.onEnd=function(t){t===c&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=r.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=w,t.exports.inflateRaw=function(t,e){return(e=e||{}).raw=!0,w(t,e)},t.exports.ungzip=w,t.exports.constants=n(619)},236:t=>{"use strict";const e=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);t.exports.assign=function(t){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const i=n.shift();if(i){if("object"!=typeof i)throw new TypeError(i+"must be non-object");for(const n in i)e(i,n)&&(t[n]=i[n])}}return t},t.exports.flattenChunks=t=>{let e=0;for(let n=0,i=t.length;n<i;n++)e+=t[n].length;const n=new Uint8Array(e);for(let e=0,i=0,r=t.length;e<r;e++){let r=t[e];n.set(r,i),i+=r.length}return n}},373:t=>{"use strict";let e=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){e=!1}const n=new Uint8Array(256);for(let t=0;t<256;t++)n[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;n[254]=n[254]=1,t.exports.string2buf=t=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(t);let e,n,i,r,o,s=t.length,a=0;for(r=0;r<s;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),a+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(a),o=0,r=0;o<a;r++)n=t.charCodeAt(r),55296==(64512&n)&&r+1<s&&(i=t.charCodeAt(r+1),56320==(64512&i)&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[o++]=n:n<2048?(e[o++]=192|n>>>6,e[o++]=128|63&n):n<65536?(e[o++]=224|n>>>12,e[o++]=128|n>>>6&63,e[o++]=128|63&n):(e[o++]=240|n>>>18,e[o++]=128|n>>>12&63,e[o++]=128|n>>>6&63,e[o++]=128|63&n);return e},t.exports.buf2string=(t,i)=>{const r=i||t.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(t.subarray(0,i));let o,s;const a=new Array(2*r);for(s=0,o=0;o<r;){let e=t[o++];if(e<128){a[s++]=e;continue}let i=n[e];if(i>4)a[s++]=65533,o+=i-1;else{for(e&=2===i?31:3===i?15:7;i>1&&o<r;)e=e<<6|63&t[o++],i--;i>1?a[s++]=65533:e<65536?a[s++]=e:(e-=65536,a[s++]=55296|e>>10&1023,a[s++]=56320|1023&e)}}return((t,n)=>{if(n<65534&&t.subarray&&e)return String.fromCharCode.apply(null,t.length===n?t:t.subarray(0,n));let i="";for(let e=0;e<n;e++)i+=String.fromCharCode(t[e]);return i})(a,s)},t.exports.utf8border=(t,e)=>{(e=e||t.length)>t.length&&(e=t.length);let i=e-1;for(;i>=0&&128==(192&t[i]);)i--;return i<0||0===i?e:i+n[t[i]]>e?i:e}},69:t=>{"use strict";t.exports=(t,e,n,i)=>{let r=65535&t|0,o=t>>>16&65535|0,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do{r=r+e[i++]|0,o=o+r|0}while(--s);r%=65521,o%=65521}return r|o<<16|0}},619:t=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},869:t=>{"use strict";const e=new Uint32Array((()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=1&t?3988292384^t>>>1:t>>>1;e[n]=t}return e})());t.exports=(t,n,i,r)=>{const o=e,s=r+i;t^=-1;for(let e=r;e<s;e++)t=t>>>8^o[255&(t^n[e])];return-1^t}},405:(t,e,n)=>{"use strict";const{_tr_init:i,_tr_stored_block:r,_tr_flush_block:o,_tr_tally:s,_tr_align:a}=n(342),l=n(69),u=n(869),h=n(898),{Z_NO_FLUSH:f,Z_PARTIAL_FLUSH:c,Z_FULL_FLUSH:d,Z_FINISH:p,Z_BLOCK:y,Z_OK:g,Z_STREAM_END:_,Z_STREAM_ERROR:b,Z_DATA_ERROR:w,Z_BUF_ERROR:m,Z_DEFAULT_COMPRESSION:v,Z_FILTERED:x,Z_HUFFMAN_ONLY:S,Z_RLE:O,Z_FIXED:k,Z_DEFAULT_STRATEGY:E,Z_UNKNOWN:A,Z_DEFLATED:N}=n(619),B=258,T=262,U=42,j=113,I=666,R=(t,e)=>(t.msg=h[e],e),D=t=>2*t-(t>4?9:0),L=t=>{let e=t.length;for(;--e>=0;)t[e]=0},P=t=>{let e,n,i,r=t.w_size;e=t.hash_size,i=e;do{n=t.head[--i],t.head[i]=n>=r?n-r:0}while(--e);e=r,i=e;do{n=t.prev[--i],t.prev[i]=n>=r?n-r:0}while(--e)};let M=(t,e,n)=>(e<<t.hash_shift^n)&t.hash_mask;const z=t=>{const e=t.state;let n=e.pending;n>t.avail_out&&(n=t.avail_out),0!==n&&(t.output.set(e.pending_buf.subarray(e.pending_out,e.pending_out+n),t.next_out),t.next_out+=n,e.pending_out+=n,t.total_out+=n,t.avail_out-=n,e.pending-=n,0===e.pending&&(e.pending_out=0))},$=(t,e)=>{o(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,z(t.strm)},C=(t,e)=>{t.pending_buf[t.pending++]=e},F=(t,e)=>{t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e},K=(t,e,n,i)=>{let r=t.avail_in;return r>i&&(r=i),0===r?0:(t.avail_in-=r,e.set(t.input.subarray(t.next_in,t.next_in+r),n),1===t.state.wrap?t.adler=l(t.adler,e,r,n):2===t.state.wrap&&(t.adler=u(t.adler,e,r,n)),t.next_in+=r,t.total_in+=r,r)},Z=(t,e)=>{let n,i,r=t.max_chain_length,o=t.strstart,s=t.prev_length,a=t.nice_match;const l=t.strstart>t.w_size-T?t.strstart-(t.w_size-T):0,u=t.window,h=t.w_mask,f=t.prev,c=t.strstart+B;let d=u[o+s-1],p=u[o+s];t.prev_length>=t.good_match&&(r>>=2),a>t.lookahead&&(a=t.lookahead);do{if(n=e,u[n+s]===p&&u[n+s-1]===d&&u[n]===u[o]&&u[++n]===u[o+1]){o+=2,n++;do{}while(u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&u[++o]===u[++n]&&o<c);if(i=B-(c-o),o=c-B,i>s){if(t.match_start=e,s=i,i>=a)break;d=u[o+s-1],p=u[o+s]}}}while((e=f[e&h])>l&&0!=--r);return s<=t.lookahead?s:t.lookahead},Y=t=>{const e=t.w_size;let n,i,r;do{if(i=t.window_size-t.lookahead-t.strstart,t.strstart>=e+(e-T)&&(t.window.set(t.window.subarray(e,e+e-i),0),t.match_start-=e,t.strstart-=e,t.block_start-=e,t.insert>t.strstart&&(t.insert=t.strstart),P(t),i+=e),0===t.strm.avail_in)break;if(n=K(t.strm,t.window,t.strstart+t.lookahead,i),t.lookahead+=n,t.lookahead+t.insert>=3)for(r=t.strstart-t.insert,t.ins_h=t.window[r],t.ins_h=M(t,t.ins_h,t.window[r+1]);t.insert&&(t.ins_h=M(t,t.ins_h,t.window[r+3-1]),t.prev[r&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=r,r++,t.insert--,!(t.lookahead+t.insert<3)););}while(t.lookahead<T&&0!==t.strm.avail_in)},J=(t,e)=>{let n,i,o,s=t.pending_buf_size-5>t.w_size?t.w_size:t.pending_buf_size-5,a=0,l=t.strm.avail_in;do{if(n=65535,o=t.bi_valid+42>>3,t.strm.avail_out<o)break;if(o=t.strm.avail_out-o,i=t.strstart-t.block_start,n>i+t.strm.avail_in&&(n=i+t.strm.avail_in),n>o&&(n=o),n<s&&(0===n&&e!==p||e===f||n!==i+t.strm.avail_in))break;a=e===p&&n===i+t.strm.avail_in?1:0,r(t,0,0,a),t.pending_buf[t.pending-4]=n,t.pending_buf[t.pending-3]=n>>8,t.pending_buf[t.pending-2]=~n,t.pending_buf[t.pending-1]=~n>>8,z(t.strm),i&&(i>n&&(i=n),t.strm.output.set(t.window.subarray(t.block_start,t.block_start+i),t.strm.next_out),t.strm.next_out+=i,t.strm.avail_out-=i,t.strm.total_out+=i,t.block_start+=i,n-=i),n&&(K(t.strm,t.strm.output,t.strm.next_out,n),t.strm.next_out+=n,t.strm.avail_out-=n,t.strm.total_out+=n)}while(0===a);return l-=t.strm.avail_in,l&&(l>=t.w_size?(t.matches=2,t.window.set(t.strm.input.subarray(t.strm.next_in-t.w_size,t.strm.next_in),0),t.strstart=t.w_size,t.insert=t.strstart):(t.window_size-t.strstart<=l&&(t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,t.insert>t.strstart&&(t.insert=t.strstart)),t.window.set(t.strm.input.subarray(t.strm.next_in-l,t.strm.next_in),t.strstart),t.strstart+=l,t.insert+=l>t.w_size-t.insert?t.w_size-t.insert:l),t.block_start=t.strstart),t.high_water<t.strstart&&(t.high_water=t.strstart),a?4:e!==f&&e!==p&&0===t.strm.avail_in&&t.strstart===t.block_start?2:(o=t.window_size-t.strstart,t.strm.avail_in>o&&t.block_start>=t.w_size&&(t.block_start-=t.w_size,t.strstart-=t.w_size,t.window.set(t.window.subarray(t.w_size,t.w_size+t.strstart),0),t.matches<2&&t.matches++,o+=t.w_size,t.insert>t.strstart&&(t.insert=t.strstart)),o>t.strm.avail_in&&(o=t.strm.avail_in),o&&(K(t.strm,t.window,t.strstart,o),t.strstart+=o,t.insert+=o>t.w_size-t.insert?t.w_size-t.insert:o),t.high_water<t.strstart&&(t.high_water=t.strstart),o=t.bi_valid+42>>3,o=t.pending_buf_size-o>65535?65535:t.pending_buf_size-o,s=o>t.w_size?t.w_size:o,i=t.strstart-t.block_start,(i>=s||(i||e===p)&&e!==f&&0===t.strm.avail_in&&i<=o)&&(n=i>o?o:i,a=e===p&&0===t.strm.avail_in&&n===i?1:0,r(t,t.block_start,n,a),t.block_start+=n,z(t.strm)),a?3:1)},H=(t,e)=>{let n,i;for(;;){if(t.lookahead<T){if(Y(t),t.lookahead<T&&e===f)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==n&&t.strstart-n<=t.w_size-T&&(t.match_length=Z(t,n)),t.match_length>=3)if(i=s(t,t.strstart-t.match_start,t.match_length-3),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=3){t.match_length--;do{t.strstart++,t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=M(t,t.ins_h,t.window[t.strstart+1]);else i=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(i&&($(t,!1),0===t.strm.avail_out))return 1}return t.insert=t.strstart<2?t.strstart:2,e===p?($(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&($(t,!1),0===t.strm.avail_out)?1:2},V=(t,e)=>{let n,i,r;for(;;){if(t.lookahead<T){if(Y(t),t.lookahead<T&&e===f)return 1;if(0===t.lookahead)break}if(n=0,t.lookahead>=3&&(t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=2,0!==n&&t.prev_length<t.max_lazy_match&&t.strstart-n<=t.w_size-T&&(t.match_length=Z(t,n),t.match_length<=5&&(t.strategy===x||3===t.match_length&&t.strstart-t.match_start>4096)&&(t.match_length=2)),t.prev_length>=3&&t.match_length<=t.prev_length){r=t.strstart+t.lookahead-3,i=s(t,t.strstart-1-t.prev_match,t.prev_length-3),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=r&&(t.ins_h=M(t,t.ins_h,t.window[t.strstart+3-1]),n=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=2,t.strstart++,i&&($(t,!1),0===t.strm.avail_out))return 1}else if(t.match_available){if(i=s(t,0,t.window[t.strstart-1]),i&&$(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return 1}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(i=s(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<2?t.strstart:2,e===p?($(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&($(t,!1),0===t.strm.avail_out)?1:2};function q(t,e,n,i,r){this.good_length=t,this.max_lazy=e,this.nice_length=n,this.max_chain=i,this.func=r}const X=[new q(0,0,0,0,J),new q(4,4,8,4,H),new q(4,5,16,8,H),new q(4,6,32,32,H),new q(4,4,16,16,V),new q(8,16,32,32,V),new q(8,16,128,128,V),new q(8,32,128,256,V),new q(32,128,258,1024,V),new q(32,258,258,4096,V)];function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=N,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),L(this.dyn_ltree),L(this.dyn_dtree),L(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),L(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),L(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const G=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.status!==U&&57!==e.status&&69!==e.status&&73!==e.status&&91!==e.status&&103!==e.status&&e.status!==j&&e.status!==I?1:0},Q=t=>{if(G(t))return R(t,b);t.total_in=t.total_out=0,t.data_type=A;const e=t.state;return e.pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=2===e.wrap?57:e.wrap?U:j,t.adler=2===e.wrap?0:1,e.last_flush=-2,i(e),g},tt=t=>{const e=Q(t);var n;return e===g&&((n=t.state).window_size=2*n.w_size,L(n.head),n.max_lazy_match=X[n.level].max_lazy,n.good_match=X[n.level].good_length,n.nice_match=X[n.level].nice_length,n.max_chain_length=X[n.level].max_chain,n.strstart=0,n.block_start=0,n.lookahead=0,n.insert=0,n.match_length=n.prev_length=2,n.match_available=0,n.ins_h=0),e},et=(t,e,n,i,r,o)=>{if(!t)return b;let s=1;if(e===v&&(e=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),r<1||r>9||n!==N||i<8||i>15||e<0||e>9||o<0||o>k||8===i&&1!==s)return R(t,b);8===i&&(i=9);const a=new W;return t.state=a,a.strm=t,a.status=U,a.wrap=s,a.gzhead=null,a.w_bits=i,a.w_size=1<<a.w_bits,a.w_mask=a.w_size-1,a.hash_bits=r+7,a.hash_size=1<<a.hash_bits,a.hash_mask=a.hash_size-1,a.hash_shift=~~((a.hash_bits+3-1)/3),a.window=new Uint8Array(2*a.w_size),a.head=new Uint16Array(a.hash_size),a.prev=new Uint16Array(a.w_size),a.lit_bufsize=1<<r+6,a.pending_buf_size=4*a.lit_bufsize,a.pending_buf=new Uint8Array(a.pending_buf_size),a.sym_buf=a.lit_bufsize,a.sym_end=3*(a.lit_bufsize-1),a.level=e,a.strategy=o,a.method=n,tt(t)};t.exports.deflateInit=(t,e)=>et(t,e,N,15,8,E),t.exports.deflateInit2=et,t.exports.deflateReset=tt,t.exports.deflateResetKeep=Q,t.exports.deflateSetHeader=(t,e)=>G(t)||2!==t.state.wrap?b:(t.state.gzhead=e,g),t.exports.deflate=(t,e)=>{if(G(t)||e>y||e<0)return t?R(t,b):b;const n=t.state;if(!t.output||0!==t.avail_in&&!t.input||n.status===I&&e!==p)return R(t,0===t.avail_out?m:b);const i=n.last_flush;if(n.last_flush=e,0!==n.pending){if(z(t),0===t.avail_out)return n.last_flush=-1,g}else if(0===t.avail_in&&D(e)<=D(i)&&e!==p)return R(t,m);if(n.status===I&&0!==t.avail_in)return R(t,m);if(n.status===U&&0===n.wrap&&(n.status=j),n.status===U){let e=N+(n.w_bits-8<<4)<<8,i=-1;if(i=n.strategy>=S||n.level<2?0:n.level<6?1:6===n.level?2:3,e|=i<<6,0!==n.strstart&&(e|=32),e+=31-e%31,F(n,e),0!==n.strstart&&(F(n,t.adler>>>16),F(n,65535&t.adler)),t.adler=1,n.status=j,z(t),0!==n.pending)return n.last_flush=-1,g}if(57===n.status)if(t.adler=0,C(n,31),C(n,139),C(n,8),n.gzhead)C(n,(n.gzhead.text?1:0)+(n.gzhead.hcrc?2:0)+(n.gzhead.extra?4:0)+(n.gzhead.name?8:0)+(n.gzhead.comment?16:0)),C(n,255&n.gzhead.time),C(n,n.gzhead.time>>8&255),C(n,n.gzhead.time>>16&255),C(n,n.gzhead.time>>24&255),C(n,9===n.level?2:n.strategy>=S||n.level<2?4:0),C(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(C(n,255&n.gzhead.extra.length),C(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(t.adler=u(t.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(C(n,0),C(n,0),C(n,0),C(n,0),C(n,0),C(n,9===n.level?2:n.strategy>=S||n.level<2?4:0),C(n,3),n.status=j,z(t),0!==n.pending)return n.last_flush=-1,g;if(69===n.status){if(n.gzhead.extra){let e=n.pending,i=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+i>n.pending_buf_size;){let r=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>e&&(t.adler=u(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex+=r,z(t),0!==n.pending)return n.last_flush=-1,g;e=0,i-=r}let r=new Uint8Array(n.gzhead.extra);n.pending_buf.set(r.subarray(n.gzindex,n.gzindex+i),n.pending),n.pending+=i,n.gzhead.hcrc&&n.pending>e&&(t.adler=u(t.adler,n.pending_buf,n.pending-e,e)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let e,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i)),z(t),0!==n.pending)return n.last_flush=-1,g;i=0}e=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,C(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let e,i=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i)),z(t),0!==n.pending)return n.last_flush=-1,g;i=0}e=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,C(n,e)}while(0!==e);n.gzhead.hcrc&&n.pending>i&&(t.adler=u(t.adler,n.pending_buf,n.pending-i,i))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(z(t),0!==n.pending))return n.last_flush=-1,g;C(n,255&t.adler),C(n,t.adler>>8&255),t.adler=0}if(n.status=j,z(t),0!==n.pending)return n.last_flush=-1,g}if(0!==t.avail_in||0!==n.lookahead||e!==f&&n.status!==I){let i=0===n.level?J(n,e):n.strategy===S?((t,e)=>{let n;for(;;){if(0===t.lookahead&&(Y(t),0===t.lookahead)){if(e===f)return 1;break}if(t.match_length=0,n=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,n&&($(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?($(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&($(t,!1),0===t.strm.avail_out)?1:2})(n,e):n.strategy===O?((t,e)=>{let n,i,r,o;const a=t.window;for(;;){if(t.lookahead<=B){if(Y(t),t.lookahead<=B&&e===f)return 1;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=3&&t.strstart>0&&(r=t.strstart-1,i=a[r],i===a[++r]&&i===a[++r]&&i===a[++r])){o=t.strstart+B;do{}while(i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&i===a[++r]&&r<o);t.match_length=B-(o-r),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=3?(n=s(t,1,t.match_length-3),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(n=s(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),n&&($(t,!1),0===t.strm.avail_out))return 1}return t.insert=0,e===p?($(t,!0),0===t.strm.avail_out?3:4):t.sym_next&&($(t,!1),0===t.strm.avail_out)?1:2})(n,e):X[n.level].func(n,e);if(3!==i&&4!==i||(n.status=I),1===i||3===i)return 0===t.avail_out&&(n.last_flush=-1),g;if(2===i&&(e===c?a(n):e!==y&&(r(n,0,0,!1),e===d&&(L(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),z(t),0===t.avail_out))return n.last_flush=-1,g}return e!==p?g:n.wrap<=0?_:(2===n.wrap?(C(n,255&t.adler),C(n,t.adler>>8&255),C(n,t.adler>>16&255),C(n,t.adler>>24&255),C(n,255&t.total_in),C(n,t.total_in>>8&255),C(n,t.total_in>>16&255),C(n,t.total_in>>24&255)):(F(n,t.adler>>>16),F(n,65535&t.adler)),z(t),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?g:_)},t.exports.deflateEnd=t=>{if(G(t))return b;const e=t.state.status;return t.state=null,e===j?R(t,w):g},t.exports.deflateSetDictionary=(t,e)=>{let n=e.length;if(G(t))return b;const i=t.state,r=i.wrap;if(2===r||1===r&&i.status!==U||i.lookahead)return b;if(1===r&&(t.adler=l(t.adler,e,n,0)),i.wrap=0,n>=i.w_size){0===r&&(L(i.head),i.strstart=0,i.block_start=0,i.insert=0);let t=new Uint8Array(i.w_size);t.set(e.subarray(n-i.w_size,n),0),e=t,n=i.w_size}const o=t.avail_in,s=t.next_in,a=t.input;for(t.avail_in=n,t.next_in=0,t.input=e,Y(i);i.lookahead>=3;){let t=i.strstart,e=i.lookahead-2;do{i.ins_h=M(i,i.ins_h,i.window[t+3-1]),i.prev[t&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=t,t++}while(--e);i.strstart=t,i.lookahead=2,Y(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,t.next_in=s,t.input=a,t.avail_in=o,i.wrap=r,g},t.exports.deflateInfo="pako deflate (from Nodeca project)"},401:t=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},264:t=>{"use strict";const e=16209;t.exports=function(t,n){let i,r,o,s,a,l,u,h,f,c,d,p,y,g,_,b,w,m,v,x,S,O,k,E;const A=t.state;i=t.next_in,k=t.input,r=i+(t.avail_in-5),o=t.next_out,E=t.output,s=o-(n-t.avail_out),a=o+(t.avail_out-257),l=A.dmax,u=A.wsize,h=A.whave,f=A.wnext,c=A.window,d=A.hold,p=A.bits,y=A.lencode,g=A.distcode,_=(1<<A.lenbits)-1,b=(1<<A.distbits)-1;t:do{p<15&&(d+=k[i++]<<p,p+=8,d+=k[i++]<<p,p+=8),w=y[d&_];e:for(;;){if(m=w>>>24,d>>>=m,p-=m,m=w>>>16&255,0===m)E[o++]=65535&w;else{if(!(16&m)){if(0==(64&m)){w=y[(65535&w)+(d&(1<<m)-1)];continue e}if(32&m){A.mode=16191;break t}t.msg="invalid literal/length code",A.mode=e;break t}v=65535&w,m&=15,m&&(p<m&&(d+=k[i++]<<p,p+=8),v+=d&(1<<m)-1,d>>>=m,p-=m),p<15&&(d+=k[i++]<<p,p+=8,d+=k[i++]<<p,p+=8),w=g[d&b];n:for(;;){if(m=w>>>24,d>>>=m,p-=m,m=w>>>16&255,!(16&m)){if(0==(64&m)){w=g[(65535&w)+(d&(1<<m)-1)];continue n}t.msg="invalid distance code",A.mode=e;break t}if(x=65535&w,m&=15,p<m&&(d+=k[i++]<<p,p+=8,p<m&&(d+=k[i++]<<p,p+=8)),x+=d&(1<<m)-1,x>l){t.msg="invalid distance too far back",A.mode=e;break t}if(d>>>=m,p-=m,m=o-s,x>m){if(m=x-m,m>h&&A.sane){t.msg="invalid distance too far back",A.mode=e;break t}if(S=0,O=c,0===f){if(S+=u-m,m<v){v-=m;do{E[o++]=c[S++]}while(--m);S=o-x,O=E}}else if(f<m){if(S+=u+f-m,m-=f,m<v){v-=m;do{E[o++]=c[S++]}while(--m);if(S=0,f<v){m=f,v-=m;do{E[o++]=c[S++]}while(--m);S=o-x,O=E}}}else if(S+=f-m,m<v){v-=m;do{E[o++]=c[S++]}while(--m);S=o-x,O=E}for(;v>2;)E[o++]=O[S++],E[o++]=O[S++],E[o++]=O[S++],v-=3;v&&(E[o++]=O[S++],v>1&&(E[o++]=O[S++]))}else{S=o-x;do{E[o++]=E[S++],E[o++]=E[S++],E[o++]=E[S++],v-=3}while(v>2);v&&(E[o++]=E[S++],v>1&&(E[o++]=E[S++]))}break}}break}}while(i<r&&o<a);v=p>>3,i-=v,p-=v<<3,d&=(1<<p)-1,t.next_in=i,t.next_out=o,t.avail_in=i<r?r-i+5:5-(i-r),t.avail_out=o<a?a-o+257:257-(o-a),A.hold=d,A.bits=p}},948:(t,e,n)=>{"use strict";const i=n(69),r=n(869),o=n(264),s=n(241),{Z_FINISH:a,Z_BLOCK:l,Z_TREES:u,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:c,Z_STREAM_ERROR:d,Z_DATA_ERROR:p,Z_MEM_ERROR:y,Z_BUF_ERROR:g,Z_DEFLATED:_}=n(619),b=16180,w=16190,m=16191,v=16192,x=16194,S=16199,O=16200,k=16206,E=16209,A=16210,N=t=>(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24);function B(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const T=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<b||e.mode>16211?1:0},U=t=>{if(T(t))return d;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=b,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(852),e.distcode=e.distdyn=new Int32Array(592),e.sane=1,e.back=-1,h},j=t=>{if(T(t))return d;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,U(t)},I=(t,e)=>{let n;if(T(t))return d;const i=t.state;return e<0?(n=0,e=-e):(n=5+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?d:(null!==i.window&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,j(t))},R=(t,e)=>{if(!t)return d;const n=new B;t.state=n,n.strm=t,n.window=null,n.mode=b;const i=I(t,e);return i!==h&&(t.state=null),i};let D,L,P=!0;const M=t=>{if(P){D=new Int32Array(512),L=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(s(1,t.lens,0,288,D,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;s(2,t.lens,0,32,L,0,t.work,{bits:5}),P=!1}t.lencode=D,t.lenbits=9,t.distcode=L,t.distbits=5},z=(t,e,n,i)=>{let r;const o=t.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new Uint8Array(o.wsize)),i>=o.wsize?(o.window.set(e.subarray(n-o.wsize,n),0),o.wnext=0,o.whave=o.wsize):(r=o.wsize-o.wnext,r>i&&(r=i),o.window.set(e.subarray(n-i,n-i+r),o.wnext),(i-=r)?(o.window.set(e.subarray(n-i,n),0),o.wnext=i,o.whave=o.wsize):(o.wnext+=r,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=r))),0};t.exports.inflateReset=j,t.exports.inflateReset2=I,t.exports.inflateResetKeep=U,t.exports.inflateInit=t=>R(t,15),t.exports.inflateInit2=R,t.exports.inflate=(t,e)=>{let n,B,U,j,I,R,D,L,P,$,C,F,K,Z,Y,J,H,V,q,X,W,G,Q=0;const tt=new Uint8Array(4);let et,nt;const it=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(T(t)||!t.output||!t.input&&0!==t.avail_in)return d;n=t.state,n.mode===m&&(n.mode=v),I=t.next_out,U=t.output,D=t.avail_out,j=t.next_in,B=t.input,R=t.avail_in,L=n.hold,P=n.bits,$=R,C=D,G=h;t:for(;;)switch(n.mode){case b:if(0===n.wrap){n.mode=v;break}for(;P<16;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(2&n.wrap&&35615===L){0===n.wbits&&(n.wbits=15),n.check=0,tt[0]=255&L,tt[1]=L>>>8&255,n.check=r(n.check,tt,2,0),L=0,P=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&L)<<8)+(L>>8))%31){t.msg="incorrect header check",n.mode=E;break}if((15&L)!==_){t.msg="unknown compression method",n.mode=E;break}if(L>>>=4,P-=4,W=8+(15&L),0===n.wbits&&(n.wbits=W),W>15||W>n.wbits){t.msg="invalid window size",n.mode=E;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=512&L?16189:m,L=0,P=0;break;case 16181:for(;P<16;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(n.flags=L,(255&n.flags)!==_){t.msg="unknown compression method",n.mode=E;break}if(57344&n.flags){t.msg="unknown header flags set",n.mode=E;break}n.head&&(n.head.text=L>>8&1),512&n.flags&&4&n.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,n.check=r(n.check,tt,2,0)),L=0,P=0,n.mode=16182;case 16182:for(;P<32;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}n.head&&(n.head.time=L),512&n.flags&&4&n.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,tt[2]=L>>>16&255,tt[3]=L>>>24&255,n.check=r(n.check,tt,4,0)),L=0,P=0,n.mode=16183;case 16183:for(;P<16;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}n.head&&(n.head.xflags=255&L,n.head.os=L>>8),512&n.flags&&4&n.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,n.check=r(n.check,tt,2,0)),L=0,P=0,n.mode=16184;case 16184:if(1024&n.flags){for(;P<16;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}n.length=L,n.head&&(n.head.extra_len=L),512&n.flags&&4&n.wrap&&(tt[0]=255&L,tt[1]=L>>>8&255,n.check=r(n.check,tt,2,0)),L=0,P=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&(F=n.length,F>R&&(F=R),F&&(n.head&&(W=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(B.subarray(j,j+F),W)),512&n.flags&&4&n.wrap&&(n.check=r(n.check,B,F,j)),R-=F,j+=F,n.length-=F),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===R)break t;F=0;do{W=B[j+F++],n.head&&W&&n.length<65536&&(n.head.name+=String.fromCharCode(W))}while(W&&F<R);if(512&n.flags&&4&n.wrap&&(n.check=r(n.check,B,F,j)),R-=F,j+=F,W)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===R)break t;F=0;do{W=B[j+F++],n.head&&W&&n.length<65536&&(n.head.comment+=String.fromCharCode(W))}while(W&&F<R);if(512&n.flags&&4&n.wrap&&(n.check=r(n.check,B,F,j)),R-=F,j+=F,W)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;P<16;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(4&n.wrap&&L!==(65535&n.check)){t.msg="header crc mismatch",n.mode=E;break}L=0,P=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=m;break;case 16189:for(;P<32;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}t.adler=n.check=N(L),L=0,P=0,n.mode=w;case w:if(0===n.havedict)return t.next_out=I,t.avail_out=D,t.next_in=j,t.avail_in=R,n.hold=L,n.bits=P,c;t.adler=n.check=1,n.mode=m;case m:if(e===l||e===u)break t;case v:if(n.last){L>>>=7&P,P-=7&P,n.mode=k;break}for(;P<3;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}switch(n.last=1&L,L>>>=1,P-=1,3&L){case 0:n.mode=16193;break;case 1:if(M(n),n.mode=S,e===u){L>>>=2,P-=2;break t}break;case 2:n.mode=16196;break;case 3:t.msg="invalid block type",n.mode=E}L>>>=2,P-=2;break;case 16193:for(L>>>=7&P,P-=7&P;P<32;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if((65535&L)!=(L>>>16^65535)){t.msg="invalid stored block lengths",n.mode=E;break}if(n.length=65535&L,L=0,P=0,n.mode=x,e===u)break t;case x:n.mode=16195;case 16195:if(F=n.length,F){if(F>R&&(F=R),F>D&&(F=D),0===F)break t;U.set(B.subarray(j,j+F),I),R-=F,j+=F,D-=F,I+=F,n.length-=F;break}n.mode=m;break;case 16196:for(;P<14;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(n.nlen=257+(31&L),L>>>=5,P-=5,n.ndist=1+(31&L),L>>>=5,P-=5,n.ncode=4+(15&L),L>>>=4,P-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=E;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;P<3;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}n.lens[it[n.have++]]=7&L,L>>>=3,P-=3}for(;n.have<19;)n.lens[it[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,et={bits:n.lenbits},G=s(0,n.lens,0,19,n.lencode,0,n.work,et),n.lenbits=et.bits,G){t.msg="invalid code lengths set",n.mode=E;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;Q=n.lencode[L&(1<<n.lenbits)-1],Y=Q>>>24,J=Q>>>16&255,H=65535&Q,!(Y<=P);){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(H<16)L>>>=Y,P-=Y,n.lens[n.have++]=H;else{if(16===H){for(nt=Y+2;P<nt;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(L>>>=Y,P-=Y,0===n.have){t.msg="invalid bit length repeat",n.mode=E;break}W=n.lens[n.have-1],F=3+(3&L),L>>>=2,P-=2}else if(17===H){for(nt=Y+3;P<nt;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}L>>>=Y,P-=Y,W=0,F=3+(7&L),L>>>=3,P-=3}else{for(nt=Y+7;P<nt;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}L>>>=Y,P-=Y,W=0,F=11+(127&L),L>>>=7,P-=7}if(n.have+F>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=E;break}for(;F--;)n.lens[n.have++]=W}}if(n.mode===E)break;if(0===n.lens[256]){t.msg="invalid code -- missing end-of-block",n.mode=E;break}if(n.lenbits=9,et={bits:n.lenbits},G=s(1,n.lens,0,n.nlen,n.lencode,0,n.work,et),n.lenbits=et.bits,G){t.msg="invalid literal/lengths set",n.mode=E;break}if(n.distbits=6,n.distcode=n.distdyn,et={bits:n.distbits},G=s(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,et),n.distbits=et.bits,G){t.msg="invalid distances set",n.mode=E;break}if(n.mode=S,e===u)break t;case S:n.mode=O;case O:if(R>=6&&D>=258){t.next_out=I,t.avail_out=D,t.next_in=j,t.avail_in=R,n.hold=L,n.bits=P,o(t,C),I=t.next_out,U=t.output,D=t.avail_out,j=t.next_in,B=t.input,R=t.avail_in,L=n.hold,P=n.bits,n.mode===m&&(n.back=-1);break}for(n.back=0;Q=n.lencode[L&(1<<n.lenbits)-1],Y=Q>>>24,J=Q>>>16&255,H=65535&Q,!(Y<=P);){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(J&&0==(240&J)){for(V=Y,q=J,X=H;Q=n.lencode[X+((L&(1<<V+q)-1)>>V)],Y=Q>>>24,J=Q>>>16&255,H=65535&Q,!(V+Y<=P);){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}L>>>=V,P-=V,n.back+=V}if(L>>>=Y,P-=Y,n.back+=Y,n.length=H,0===J){n.mode=16205;break}if(32&J){n.back=-1,n.mode=m;break}if(64&J){t.msg="invalid literal/length code",n.mode=E;break}n.extra=15&J,n.mode=16201;case 16201:if(n.extra){for(nt=n.extra;P<nt;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}n.length+=L&(1<<n.extra)-1,L>>>=n.extra,P-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;Q=n.distcode[L&(1<<n.distbits)-1],Y=Q>>>24,J=Q>>>16&255,H=65535&Q,!(Y<=P);){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(0==(240&J)){for(V=Y,q=J,X=H;Q=n.distcode[X+((L&(1<<V+q)-1)>>V)],Y=Q>>>24,J=Q>>>16&255,H=65535&Q,!(V+Y<=P);){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}L>>>=V,P-=V,n.back+=V}if(L>>>=Y,P-=Y,n.back+=Y,64&J){t.msg="invalid distance code",n.mode=E;break}n.offset=H,n.extra=15&J,n.mode=16203;case 16203:if(n.extra){for(nt=n.extra;P<nt;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}n.offset+=L&(1<<n.extra)-1,L>>>=n.extra,P-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=E;break}n.mode=16204;case 16204:if(0===D)break t;if(F=C-D,n.offset>F){if(F=n.offset-F,F>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=E;break}F>n.wnext?(F-=n.wnext,K=n.wsize-F):K=n.wnext-F,F>n.length&&(F=n.length),Z=n.window}else Z=U,K=I-n.offset,F=n.length;F>D&&(F=D),D-=F,n.length-=F;do{U[I++]=Z[K++]}while(--F);0===n.length&&(n.mode=O);break;case 16205:if(0===D)break t;U[I++]=n.length,D--,n.mode=O;break;case k:if(n.wrap){for(;P<32;){if(0===R)break t;R--,L|=B[j++]<<P,P+=8}if(C-=D,t.total_out+=C,n.total+=C,4&n.wrap&&C&&(t.adler=n.check=n.flags?r(n.check,U,C,I-C):i(n.check,U,C,I-C)),C=D,4&n.wrap&&(n.flags?L:N(L))!==n.check){t.msg="incorrect data check",n.mode=E;break}L=0,P=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;P<32;){if(0===R)break t;R--,L+=B[j++]<<P,P+=8}if(4&n.wrap&&L!==(4294967295&n.total)){t.msg="incorrect length check",n.mode=E;break}L=0,P=0}n.mode=16208;case 16208:G=f;break t;case E:G=p;break t;case A:return y;default:return d}return t.next_out=I,t.avail_out=D,t.next_in=j,t.avail_in=R,n.hold=L,n.bits=P,(n.wsize||C!==t.avail_out&&n.mode<E&&(n.mode<k||e!==a))&&z(t,t.output,t.next_out,C-t.avail_out)?(n.mode=A,y):($-=t.avail_in,C-=t.avail_out,t.total_in+=$,t.total_out+=C,n.total+=C,4&n.wrap&&C&&(t.adler=n.check=n.flags?r(n.check,U,C,t.next_out-C):i(n.check,U,C,t.next_out-C)),t.data_type=n.bits+(n.last?64:0)+(n.mode===m?128:0)+(n.mode===S||n.mode===x?256:0),(0===$&&0===C||e===a)&&G===h&&(G=g),G)},t.exports.inflateEnd=t=>{if(T(t))return d;let e=t.state;return e.window&&(e.window=null),t.state=null,h},t.exports.inflateGetHeader=(t,e)=>{if(T(t))return d;const n=t.state;return 0==(2&n.wrap)?d:(n.head=e,e.done=!1,h)},t.exports.inflateSetDictionary=(t,e)=>{const n=e.length;let r,o,s;return T(t)?d:(r=t.state,0!==r.wrap&&r.mode!==w?d:r.mode===w&&(o=1,o=i(o,e,n,0),o!==r.check)?p:(s=z(t,e,n,n),s?(r.mode=A,y):(r.havedict=1,h)))},t.exports.inflateInfo="pako inflate (from Nodeca project)"},241:t=>{"use strict";const e=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),n=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),r=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(t,o,s,a,l,u,h,f)=>{const c=f.bits;let d,p,y,g,_,b,w=0,m=0,v=0,x=0,S=0,O=0,k=0,E=0,A=0,N=0,B=null;const T=new Uint16Array(16),U=new Uint16Array(16);let j,I,R,D=null;for(w=0;w<=15;w++)T[w]=0;for(m=0;m<a;m++)T[o[s+m]]++;for(S=c,x=15;x>=1&&0===T[x];x--);if(S>x&&(S=x),0===x)return l[u++]=20971520,l[u++]=20971520,f.bits=1,0;for(v=1;v<x&&0===T[v];v++);for(S<v&&(S=v),E=1,w=1;w<=15;w++)if(E<<=1,E-=T[w],E<0)return-1;if(E>0&&(0===t||1!==x))return-1;for(U[1]=0,w=1;w<15;w++)U[w+1]=U[w]+T[w];for(m=0;m<a;m++)0!==o[s+m]&&(h[U[o[s+m]]++]=m);if(0===t?(B=D=h,b=20):1===t?(B=e,D=n,b=257):(B=i,D=r,b=0),N=0,m=0,w=v,_=u,O=S,k=0,y=-1,A=1<<S,g=A-1,1===t&&A>852||2===t&&A>592)return 1;for(;;){j=w-k,h[m]+1<b?(I=0,R=h[m]):h[m]>=b?(I=D[h[m]-b],R=B[h[m]-b]):(I=96,R=0),d=1<<w-k,p=1<<O,v=p;do{p-=d,l[_+(N>>k)+p]=j<<24|I<<16|R|0}while(0!==p);for(d=1<<w-1;N&d;)d>>=1;if(0!==d?(N&=d-1,N+=d):N=0,m++,0==--T[w]){if(w===x)break;w=o[s+h[m]]}if(w>S&&(N&g)!==y){for(0===k&&(k=S),_+=v,O=w-k,E=1<<O;O+k<x&&(E-=T[O+k],!(E<=0));)O++,E<<=1;if(A+=1<<O,1===t&&A>852||2===t&&A>592)return 1;y=N&g,l[y]=S<<24|O<<16|_-u|0}}return 0!==N&&(l[_+N]=w-k<<24|64<<16|0),f.bits=S,0}},898:t=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},342:t=>{"use strict";function e(t){let e=t.length;for(;--e>=0;)t[e]=0}const n=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),i=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),r=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),o=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=new Array(576);e(s);const a=new Array(60);e(a);const l=new Array(512);e(l);const u=new Array(256);e(u);const h=new Array(29);e(h);const f=new Array(30);function c(t,e,n,i,r){this.static_tree=t,this.extra_bits=e,this.extra_base=n,this.elems=i,this.max_length=r,this.has_stree=t&&t.length}let d,p,y;function g(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}e(f);const _=t=>t<256?l[t]:l[256+(t>>>7)],b=(t,e)=>{t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255},w=(t,e,n)=>{t.bi_valid>16-n?(t.bi_buf|=e<<t.bi_valid&65535,b(t,t.bi_buf),t.bi_buf=e>>16-t.bi_valid,t.bi_valid+=n-16):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=n)},m=(t,e,n)=>{w(t,n[2*e],n[2*e+1])},v=(t,e)=>{let n=0;do{n|=1&t,t>>>=1,n<<=1}while(--e>0);return n>>>1},x=(t,e,n)=>{const i=new Array(16);let r,o,s=0;for(r=1;r<=15;r++)s=s+n[r-1]<<1,i[r]=s;for(o=0;o<=e;o++){let e=t[2*o+1];0!==e&&(t[2*o]=v(i[e]++,e))}},S=t=>{let e;for(e=0;e<286;e++)t.dyn_ltree[2*e]=0;for(e=0;e<30;e++)t.dyn_dtree[2*e]=0;for(e=0;e<19;e++)t.bl_tree[2*e]=0;t.dyn_ltree[512]=1,t.opt_len=t.static_len=0,t.sym_next=t.matches=0},O=t=>{t.bi_valid>8?b(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0},k=(t,e,n,i)=>{const r=2*e,o=2*n;return t[r]<t[o]||t[r]===t[o]&&i[e]<=i[n]},E=(t,e,n)=>{const i=t.heap[n];let r=n<<1;for(;r<=t.heap_len&&(r<t.heap_len&&k(e,t.heap[r+1],t.heap[r],t.depth)&&r++,!k(e,i,t.heap[r],t.depth));)t.heap[n]=t.heap[r],n=r,r<<=1;t.heap[n]=i},A=(t,e,r)=>{let o,s,a,l,c=0;if(0!==t.sym_next)do{o=255&t.pending_buf[t.sym_buf+c++],o+=(255&t.pending_buf[t.sym_buf+c++])<<8,s=t.pending_buf[t.sym_buf+c++],0===o?m(t,s,e):(a=u[s],m(t,a+256+1,e),l=n[a],0!==l&&(s-=h[a],w(t,s,l)),o--,a=_(o),m(t,a,r),l=i[a],0!==l&&(o-=f[a],w(t,o,l)))}while(c<t.sym_next);m(t,256,e)},N=(t,e)=>{const n=e.dyn_tree,i=e.stat_desc.static_tree,r=e.stat_desc.has_stree,o=e.stat_desc.elems;let s,a,l,u=-1;for(t.heap_len=0,t.heap_max=573,s=0;s<o;s++)0!==n[2*s]?(t.heap[++t.heap_len]=u=s,t.depth[s]=0):n[2*s+1]=0;for(;t.heap_len<2;)l=t.heap[++t.heap_len]=u<2?++u:0,n[2*l]=1,t.depth[l]=0,t.opt_len--,r&&(t.static_len-=i[2*l+1]);for(e.max_code=u,s=t.heap_len>>1;s>=1;s--)E(t,n,s);l=o;do{s=t.heap[1],t.heap[1]=t.heap[t.heap_len--],E(t,n,1),a=t.heap[1],t.heap[--t.heap_max]=s,t.heap[--t.heap_max]=a,n[2*l]=n[2*s]+n[2*a],t.depth[l]=(t.depth[s]>=t.depth[a]?t.depth[s]:t.depth[a])+1,n[2*s+1]=n[2*a+1]=l,t.heap[1]=l++,E(t,n,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],((t,e)=>{const n=e.dyn_tree,i=e.max_code,r=e.stat_desc.static_tree,o=e.stat_desc.has_stree,s=e.stat_desc.extra_bits,a=e.stat_desc.extra_base,l=e.stat_desc.max_length;let u,h,f,c,d,p,y=0;for(c=0;c<=15;c++)t.bl_count[c]=0;for(n[2*t.heap[t.heap_max]+1]=0,u=t.heap_max+1;u<573;u++)h=t.heap[u],c=n[2*n[2*h+1]+1]+1,c>l&&(c=l,y++),n[2*h+1]=c,h>i||(t.bl_count[c]++,d=0,h>=a&&(d=s[h-a]),p=n[2*h],t.opt_len+=p*(c+d),o&&(t.static_len+=p*(r[2*h+1]+d)));if(0!==y){do{for(c=l-1;0===t.bl_count[c];)c--;t.bl_count[c]--,t.bl_count[c+1]+=2,t.bl_count[l]--,y-=2}while(y>0);for(c=l;0!==c;c--)for(h=t.bl_count[c];0!==h;)f=t.heap[--u],f>i||(n[2*f+1]!==c&&(t.opt_len+=(c-n[2*f+1])*n[2*f],n[2*f+1]=c),h--)}})(t,e),x(n,u,t.bl_count)},B=(t,e,n)=>{let i,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),e[2*(n+1)+1]=65535,i=0;i<=n;i++)r=s,s=e[2*(i+1)+1],++a<l&&r===s||(a<u?t.bl_tree[2*r]+=a:0!==r?(r!==o&&t.bl_tree[2*r]++,t.bl_tree[32]++):a<=10?t.bl_tree[34]++:t.bl_tree[36]++,a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4))},T=(t,e,n)=>{let i,r,o=-1,s=e[1],a=0,l=7,u=4;for(0===s&&(l=138,u=3),i=0;i<=n;i++)if(r=s,s=e[2*(i+1)+1],!(++a<l&&r===s)){if(a<u)do{m(t,r,t.bl_tree)}while(0!=--a);else 0!==r?(r!==o&&(m(t,r,t.bl_tree),a--),m(t,16,t.bl_tree),w(t,a-3,2)):a<=10?(m(t,17,t.bl_tree),w(t,a-3,3)):(m(t,18,t.bl_tree),w(t,a-11,7));a=0,o=r,0===s?(l=138,u=3):r===s?(l=6,u=3):(l=7,u=4)}};let U=!1;const j=(t,e,n,i)=>{w(t,0+(i?1:0),3),O(t),b(t,n),b(t,~n),n&&t.pending_buf.set(t.window.subarray(e,e+n),t.pending),t.pending+=n};t.exports._tr_init=t=>{U||((()=>{let t,e,o,g,_;const b=new Array(16);for(o=0,g=0;g<28;g++)for(h[g]=o,t=0;t<1<<n[g];t++)u[o++]=g;for(u[o-1]=g,_=0,g=0;g<16;g++)for(f[g]=_,t=0;t<1<<i[g];t++)l[_++]=g;for(_>>=7;g<30;g++)for(f[g]=_<<7,t=0;t<1<<i[g]-7;t++)l[256+_++]=g;for(e=0;e<=15;e++)b[e]=0;for(t=0;t<=143;)s[2*t+1]=8,t++,b[8]++;for(;t<=255;)s[2*t+1]=9,t++,b[9]++;for(;t<=279;)s[2*t+1]=7,t++,b[7]++;for(;t<=287;)s[2*t+1]=8,t++,b[8]++;for(x(s,287,b),t=0;t<30;t++)a[2*t+1]=5,a[2*t]=v(t,5);d=new c(s,n,257,286,15),p=new c(a,i,0,30,15),y=new c(new Array(0),r,0,19,7)})(),U=!0),t.l_desc=new g(t.dyn_ltree,d),t.d_desc=new g(t.dyn_dtree,p),t.bl_desc=new g(t.bl_tree,y),t.bi_buf=0,t.bi_valid=0,S(t)},t.exports._tr_stored_block=j,t.exports._tr_flush_block=(t,e,n,i)=>{let r,l,u=0;t.level>0?(2===t.strm.data_type&&(t.strm.data_type=(t=>{let e,n=4093624447;for(e=0;e<=31;e++,n>>>=1)if(1&n&&0!==t.dyn_ltree[2*e])return 0;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return 1;for(e=32;e<256;e++)if(0!==t.dyn_ltree[2*e])return 1;return 0})(t)),N(t,t.l_desc),N(t,t.d_desc),u=(t=>{let e;for(B(t,t.dyn_ltree,t.l_desc.max_code),B(t,t.dyn_dtree,t.d_desc.max_code),N(t,t.bl_desc),e=18;e>=3&&0===t.bl_tree[2*o[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e})(t),r=t.opt_len+3+7>>>3,l=t.static_len+3+7>>>3,l<=r&&(r=l)):r=l=n+5,n+4<=r&&-1!==e?j(t,e,n,i):4===t.strategy||l===r?(w(t,2+(i?1:0),3),A(t,s,a)):(w(t,4+(i?1:0),3),((t,e,n,i)=>{let r;for(w(t,e-257,5),w(t,n-1,5),w(t,i-4,4),r=0;r<i;r++)w(t,t.bl_tree[2*o[r]+1],3);T(t,t.dyn_ltree,e-1),T(t,t.dyn_dtree,n-1)})(t,t.l_desc.max_code+1,t.d_desc.max_code+1,u+1),A(t,t.dyn_ltree,t.dyn_dtree)),S(t),i&&O(t)},t.exports._tr_tally=(t,e,n)=>(t.pending_buf[t.sym_buf+t.sym_next++]=e,t.pending_buf[t.sym_buf+t.sym_next++]=e>>8,t.pending_buf[t.sym_buf+t.sym_next++]=n,0===e?t.dyn_ltree[2*n]++:(t.matches++,e--,t.dyn_ltree[2*(u[n]+256+1)]++,t.dyn_dtree[2*_(e)]++),t.sym_next===t.sym_end),t.exports._tr_align=t=>{w(t,2,3),m(t,256,s),(t=>{16===t.bi_valid?(b(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)})(t)}},292:t=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var o=e[i]={id:i,loaded:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{"use strict";const t=n(26),e=n(297),i=n(13),r=n(516),o={PrivateKey:e.PrivateKey,PublicKey:e.PublicKey,SharedKey:e.SharedKey,Token:e.Token,Connection:t.Connection,Session:t.Session,Channel:t.Channel,Route:t.Route,State:r.State,Telekinesis:r.Telekinesis,injectFirstArg:r.injectFirstArg,blockArgEvaluation:r.blockArgEvaluation,Entrypoint:i.Entrypoint,authenticate:i.authenticate};window.TK=o})()})();